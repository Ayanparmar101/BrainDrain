function gS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function yS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Y_={exports:{}},zc={},J_={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var al=Symbol.for("react.element"),vS=Symbol.for("react.portal"),_S=Symbol.for("react.fragment"),wS=Symbol.for("react.strict_mode"),ES=Symbol.for("react.profiler"),IS=Symbol.for("react.provider"),xS=Symbol.for("react.context"),TS=Symbol.for("react.forward_ref"),SS=Symbol.for("react.suspense"),CS=Symbol.for("react.memo"),AS=Symbol.for("react.lazy"),py=Symbol.iterator;function RS(t){return t===null||typeof t!="object"?null:(t=py&&t[py]||t["@@iterator"],typeof t=="function"?t:null)}var X_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z_=Object.assign,e1={};function no(t,e,n){this.props=t,this.context=e,this.refs=e1,this.updater=n||X_}no.prototype.isReactComponent={};no.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};no.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function t1(){}t1.prototype=no.prototype;function gp(t,e,n){this.props=t,this.context=e,this.refs=e1,this.updater=n||X_}var yp=gp.prototype=new t1;yp.constructor=gp;Z_(yp,no.prototype);yp.isPureReactComponent=!0;var my=Array.isArray,n1=Object.prototype.hasOwnProperty,vp={current:null},r1={key:!0,ref:!0,__self:!0,__source:!0};function i1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)n1.call(e,r)&&!r1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:al,type:t,key:s,ref:o,props:i,_owner:vp.current}}function kS(t,e){return{$$typeof:al,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _p(t){return typeof t=="object"&&t!==null&&t.$$typeof===al}function bS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gy=/\/+/g;function qd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bS(""+t.key):e.toString(36)}function hu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case al:case vS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+qd(o,0):r,my(i)?(n="",t!=null&&(n=t.replace(gy,"$&/")+"/"),hu(i,e,n,"",function(d){return d})):i!=null&&(_p(i)&&(i=kS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",my(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+qd(s,a);o+=hu(s,e,n,u,i)}else if(u=RS(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+qd(s,a++),o+=hu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zl(t,e,n){if(t==null)return t;var r=[],i=0;return hu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function PS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},fu={transition:null},NS={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:fu,ReactCurrentOwner:vp};function s1(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:zl,forEach:function(t,e,n){zl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zl(t,function(){e++}),e},toArray:function(t){return zl(t,function(e){return e})||[]},only:function(t){if(!_p(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=no;oe.Fragment=_S;oe.Profiler=ES;oe.PureComponent=gp;oe.StrictMode=wS;oe.Suspense=SS;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NS;oe.act=s1;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Z_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=vp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)n1.call(e,u)&&!r1.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var d=0;d<u;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:al,type:t.type,key:i,ref:s,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:xS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:IS,_context:t},t.Consumer=t};oe.createElement=i1;oe.createFactory=function(t){var e=i1.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:TS,render:t}};oe.isValidElement=_p;oe.lazy=function(t){return{$$typeof:AS,_payload:{_status:-1,_result:t},_init:PS}};oe.memo=function(t,e){return{$$typeof:CS,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=fu.transition;fu.transition={};try{t()}finally{fu.transition=e}};oe.unstable_act=s1;oe.useCallback=function(t,e){return _t.current.useCallback(t,e)};oe.useContext=function(t){return _t.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};oe.useEffect=function(t,e){return _t.current.useEffect(t,e)};oe.useId=function(){return _t.current.useId()};oe.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return _t.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};oe.useRef=function(t){return _t.current.useRef(t)};oe.useState=function(t){return _t.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return _t.current.useTransition()};oe.version="18.3.1";J_.exports=oe;var F=J_.exports;const o1=yS(F),DS=gS({__proto__:null,default:o1},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS=F,VS=Symbol.for("react.element"),jS=Symbol.for("react.fragment"),OS=Object.prototype.hasOwnProperty,FS=MS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LS={key:!0,ref:!0,__self:!0,__source:!0};function a1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)OS.call(e,r)&&!LS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:VS,type:t,key:s,ref:o,props:i,_owner:FS.current}}zc.Fragment=jS;zc.jsx=a1;zc.jsxs=a1;Y_.exports=zc;var c=Y_.exports,Vh={},l1={exports:{}},Ft={},u1={exports:{}},c1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,O){var q=H.length;H.push(O);e:for(;0<q;){var ee=q-1>>>1,re=H[ee];if(0<i(re,O))H[ee]=O,H[q]=re,q=ee;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var O=H[0],q=H.pop();if(q!==O){H[0]=q;e:for(var ee=0,re=H.length,Te=re>>>1;ee<Te;){var ke=2*(ee+1)-1,Me=H[ke],be=ke+1,rt=H[be];if(0>i(Me,q))be<re&&0>i(rt,Me)?(H[ee]=rt,H[be]=q,ee=be):(H[ee]=Me,H[ke]=q,ee=ke);else if(be<re&&0>i(rt,q))H[ee]=rt,H[be]=q,ee=be;else break e}}return O}function i(H,O){var q=H.sortIndex-O.sortIndex;return q!==0?q:H.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],d=[],f=1,p=null,g=3,w=!1,E=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var O=n(d);O!==null;){if(O.callback===null)r(d);else if(O.startTime<=H)r(d),O.sortIndex=O.expirationTime,e(u,O);else break;O=n(d)}}function V(H){if(k=!1,S(H),!E)if(n(u)!==null)E=!0,Kn(j);else{var O=n(d);O!==null&&Qn(V,O.startTime-H)}}function j(H,O){E=!1,k&&(k=!1,I(v),v=-1),w=!0;var q=g;try{for(S(O),p=n(u);p!==null&&(!(p.expirationTime>O)||H&&!b());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,g=p.priorityLevel;var re=ee(p.expirationTime<=O);O=t.unstable_now(),typeof re=="function"?p.callback=re:p===n(u)&&r(u),S(O)}else r(u);p=n(u)}if(p!==null)var Te=!0;else{var ke=n(d);ke!==null&&Qn(V,ke.startTime-O),Te=!1}return Te}finally{p=null,g=q,w=!1}}var z=!1,x=null,v=-1,C=5,R=-1;function b(){return!(t.unstable_now()-R<C)}function N(){if(x!==null){var H=t.unstable_now();R=H;var O=!0;try{O=x(!0,H)}finally{O?A():(z=!1,x=null)}}else z=!1}var A;if(typeof _=="function")A=function(){_(N)};else if(typeof MessageChannel<"u"){var Be=new MessageChannel,Et=Be.port2;Be.port1.onmessage=N,A=function(){Et.postMessage(null)}}else A=function(){T(N,0)};function Kn(H){x=H,z||(z=!0,A())}function Qn(H,O){v=T(function(){H(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){E||w||(E=!0,Kn(j))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var O=3;break;default:O=g}var q=g;g=O;try{return H()}finally{g=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,O){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var q=g;g=H;try{return O()}finally{g=q}},t.unstable_scheduleCallback=function(H,O,q){var ee=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ee+q:ee):q=ee,H){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=q+re,H={id:f++,callback:O,priorityLevel:H,startTime:q,expirationTime:re,sortIndex:-1},q>ee?(H.sortIndex=q,e(d,H),n(u)===null&&H===n(d)&&(k?(I(v),v=-1):k=!0,Qn(V,q-ee))):(H.sortIndex=re,e(u,H),E||w||(E=!0,Kn(j))),H},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(H){var O=g;return function(){var q=g;g=O;try{return H.apply(this,arguments)}finally{g=q}}}})(c1);u1.exports=c1;var zS=u1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS=F,Vt=zS;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d1=new Set,xa={};function Bi(t,e){Ms(t,e),Ms(t+"Capture",e)}function Ms(t,e){for(xa[t]=e,t=0;t<e.length;t++)d1.add(e[t])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jh=Object.prototype.hasOwnProperty,US=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yy={},vy={};function $S(t){return jh.call(vy,t)?!0:jh.call(yy,t)?!1:US.test(t)?vy[t]=!0:(yy[t]=!0,!1)}function WS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function HS(t,e,n,r){if(e===null||typeof e>"u"||WS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var wp=/[\-:]([a-z])/g;function Ep(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wp,Ep);nt[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wp,Ep);nt[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wp,Ep);nt[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ip(t,e,n,r){var i=nt.hasOwnProperty(e)?nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(HS(e,n,i,r)&&(n=null),r||i===null?$S(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wn=BS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bl=Symbol.for("react.element"),cs=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),xp=Symbol.for("react.strict_mode"),Oh=Symbol.for("react.profiler"),h1=Symbol.for("react.provider"),f1=Symbol.for("react.context"),Tp=Symbol.for("react.forward_ref"),Fh=Symbol.for("react.suspense"),Lh=Symbol.for("react.suspense_list"),Sp=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),p1=Symbol.for("react.offscreen"),_y=Symbol.iterator;function No(t){return t===null||typeof t!="object"?null:(t=_y&&t[_y]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Kd;function Ho(t){if(Kd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kd=e&&e[1]||""}return`
`+Kd+t}var Qd=!1;function Yd(t,e){if(!t||Qd)return"";Qd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Qd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ho(t):""}function GS(t){switch(t.tag){case 5:return Ho(t.type);case 16:return Ho("Lazy");case 13:return Ho("Suspense");case 19:return Ho("SuspenseList");case 0:case 2:case 15:return t=Yd(t.type,!1),t;case 11:return t=Yd(t.type.render,!1),t;case 1:return t=Yd(t.type,!0),t;default:return""}}function zh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ds:return"Fragment";case cs:return"Portal";case Oh:return"Profiler";case xp:return"StrictMode";case Fh:return"Suspense";case Lh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case f1:return(t.displayName||"Context")+".Consumer";case h1:return(t._context.displayName||"Context")+".Provider";case Tp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sp:return e=t.displayName||null,e!==null?e:zh(t.type)||"Memo";case ar:e=t._payload,t=t._init;try{return zh(t(e))}catch{}}return null}function qS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zh(e);case 8:return e===xp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function m1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KS(t){var e=m1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ul(t){t._valueTracker||(t._valueTracker=KS(t))}function g1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=m1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $u(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bh(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=jr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function y1(t,e){e=e.checked,e!=null&&Ip(t,"checked",e,!1)}function Uh(t,e){y1(t,e);var n=jr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$h(t,e.type,n):e.hasOwnProperty("defaultValue")&&$h(t,e.type,jr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ey(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $h(t,e,n){(e!=="number"||$u(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Go=Array.isArray;function xs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Iy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Go(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jr(n)}}function v1(t,e){var n=jr(e.value),r=jr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $l,w1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($l=$l||document.createElement("div"),$l.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$l.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ta(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QS=["Webkit","ms","Moz","O"];Object.keys(na).forEach(function(t){QS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),na[e]=na[t]})});function E1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||na.hasOwnProperty(t)&&na[t]?(""+e).trim():e+"px"}function I1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=E1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var YS=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gh(t,e){if(e){if(YS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function qh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kh=null;function Cp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qh=null,Ts=null,Ss=null;function Ty(t){if(t=cl(t)){if(typeof Qh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Hc(e),Qh(t.stateNode,t.type,e))}}function x1(t){Ts?Ss?Ss.push(t):Ss=[t]:Ts=t}function T1(){if(Ts){var t=Ts,e=Ss;if(Ss=Ts=null,Ty(t),e)for(t=0;t<e.length;t++)Ty(e[t])}}function S1(t,e){return t(e)}function C1(){}var Jd=!1;function A1(t,e,n){if(Jd)return t(e,n);Jd=!0;try{return S1(t,e,n)}finally{Jd=!1,(Ts!==null||Ss!==null)&&(C1(),T1())}}function Sa(t,e){var n=t.stateNode;if(n===null)return null;var r=Hc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Yh=!1;if(jn)try{var Do={};Object.defineProperty(Do,"passive",{get:function(){Yh=!0}}),window.addEventListener("test",Do,Do),window.removeEventListener("test",Do,Do)}catch{Yh=!1}function JS(t,e,n,r,i,s,o,a,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ra=!1,Wu=null,Hu=!1,Jh=null,XS={onError:function(t){ra=!0,Wu=t}};function ZS(t,e,n,r,i,s,o,a,u){ra=!1,Wu=null,JS.apply(XS,arguments)}function e2(t,e,n,r,i,s,o,a,u){if(ZS.apply(this,arguments),ra){if(ra){var d=Wu;ra=!1,Wu=null}else throw Error(U(198));Hu||(Hu=!0,Jh=d)}}function Ui(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function R1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sy(t){if(Ui(t)!==t)throw Error(U(188))}function t2(t){var e=t.alternate;if(!e){if(e=Ui(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Sy(i),t;if(s===r)return Sy(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function k1(t){return t=t2(t),t!==null?b1(t):null}function b1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=b1(t);if(e!==null)return e;t=t.sibling}return null}var P1=Vt.unstable_scheduleCallback,Cy=Vt.unstable_cancelCallback,n2=Vt.unstable_shouldYield,r2=Vt.unstable_requestPaint,Ve=Vt.unstable_now,i2=Vt.unstable_getCurrentPriorityLevel,Ap=Vt.unstable_ImmediatePriority,N1=Vt.unstable_UserBlockingPriority,Gu=Vt.unstable_NormalPriority,s2=Vt.unstable_LowPriority,D1=Vt.unstable_IdlePriority,Bc=null,_n=null;function o2(t){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Bc,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:u2,a2=Math.log,l2=Math.LN2;function u2(t){return t>>>=0,t===0?32:31-(a2(t)/l2|0)|0}var Wl=64,Hl=4194304;function qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=qo(a):(s&=o,s!==0&&(r=qo(s)))}else o=n&~i,o!==0?r=qo(o):s!==0&&(r=qo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sn(e),i=1<<n,r|=t[n],e&=~i;return r}function c2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-sn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=c2(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Xh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function M1(){var t=Wl;return Wl<<=1,!(Wl&4194240)&&(Wl=64),t}function Xd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ll(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sn(e),t[e]=n}function h2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-sn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Rp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-sn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var he=0;function V1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var j1,kp,O1,F1,L1,Zh=!1,Gl=[],Er=null,Ir=null,xr=null,Ca=new Map,Aa=new Map,cr=[],f2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ay(t,e){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Ca.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Aa.delete(e.pointerId)}}function Mo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=cl(e),e!==null&&kp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function p2(t,e,n,r,i){switch(e){case"focusin":return Er=Mo(Er,t,e,n,r,i),!0;case"dragenter":return Ir=Mo(Ir,t,e,n,r,i),!0;case"mouseover":return xr=Mo(xr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ca.set(s,Mo(Ca.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Aa.set(s,Mo(Aa.get(s)||null,t,e,n,r,i)),!0}return!1}function z1(t){var e=di(t.target);if(e!==null){var n=Ui(e);if(n!==null){if(e=n.tag,e===13){if(e=R1(n),e!==null){t.blockedOn=e,L1(t.priority,function(){O1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ef(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kh=r,n.target.dispatchEvent(r),Kh=null}else return e=cl(n),e!==null&&kp(e),t.blockedOn=n,!1;e.shift()}return!0}function Ry(t,e,n){pu(t)&&n.delete(e)}function m2(){Zh=!1,Er!==null&&pu(Er)&&(Er=null),Ir!==null&&pu(Ir)&&(Ir=null),xr!==null&&pu(xr)&&(xr=null),Ca.forEach(Ry),Aa.forEach(Ry)}function Vo(t,e){t.blockedOn===e&&(t.blockedOn=null,Zh||(Zh=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,m2)))}function Ra(t){function e(i){return Vo(i,t)}if(0<Gl.length){Vo(Gl[0],t);for(var n=1;n<Gl.length;n++){var r=Gl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Er!==null&&Vo(Er,t),Ir!==null&&Vo(Ir,t),xr!==null&&Vo(xr,t),Ca.forEach(e),Aa.forEach(e),n=0;n<cr.length;n++)r=cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cr.length&&(n=cr[0],n.blockedOn===null);)z1(n),n.blockedOn===null&&cr.shift()}var Cs=Wn.ReactCurrentBatchConfig,Ku=!0;function g2(t,e,n,r){var i=he,s=Cs.transition;Cs.transition=null;try{he=1,bp(t,e,n,r)}finally{he=i,Cs.transition=s}}function y2(t,e,n,r){var i=he,s=Cs.transition;Cs.transition=null;try{he=4,bp(t,e,n,r)}finally{he=i,Cs.transition=s}}function bp(t,e,n,r){if(Ku){var i=ef(t,e,n,r);if(i===null)lh(t,e,r,Qu,n),Ay(t,r);else if(p2(i,t,e,n,r))r.stopPropagation();else if(Ay(t,r),e&4&&-1<f2.indexOf(t)){for(;i!==null;){var s=cl(i);if(s!==null&&j1(s),s=ef(t,e,n,r),s===null&&lh(t,e,r,Qu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else lh(t,e,r,null,n)}}var Qu=null;function ef(t,e,n,r){if(Qu=null,t=Cp(r),t=di(t),t!==null)if(e=Ui(t),e===null)t=null;else if(n=e.tag,n===13){if(t=R1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qu=t,null}function B1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i2()){case Ap:return 1;case N1:return 4;case Gu:case s2:return 16;case D1:return 536870912;default:return 16}default:return 16}}var yr=null,Pp=null,mu=null;function U1(){if(mu)return mu;var t,e=Pp,n=e.length,r,i="value"in yr?yr.value:yr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return mu=i.slice(t,1<r?1-r:void 0)}function gu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ql(){return!0}function ky(){return!1}function Lt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ql:ky,this.isPropagationStopped=ky,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),e}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Np=Lt(ro),ul=Re({},ro,{view:0,detail:0}),v2=Lt(ul),Zd,eh,jo,Uc=Re({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jo&&(jo&&t.type==="mousemove"?(Zd=t.screenX-jo.screenX,eh=t.screenY-jo.screenY):eh=Zd=0,jo=t),Zd)},movementY:function(t){return"movementY"in t?t.movementY:eh}}),by=Lt(Uc),_2=Re({},Uc,{dataTransfer:0}),w2=Lt(_2),E2=Re({},ul,{relatedTarget:0}),th=Lt(E2),I2=Re({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),x2=Lt(I2),T2=Re({},ro,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),S2=Lt(T2),C2=Re({},ro,{data:0}),Py=Lt(C2),A2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k2[t])?!!e[t]:!1}function Dp(){return b2}var P2=Re({},ul,{key:function(t){if(t.key){var e=A2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?R2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dp,charCode:function(t){return t.type==="keypress"?gu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),N2=Lt(P2),D2=Re({},Uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ny=Lt(D2),M2=Re({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dp}),V2=Lt(M2),j2=Re({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),O2=Lt(j2),F2=Re({},Uc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),L2=Lt(F2),z2=[9,13,27,32],Mp=jn&&"CompositionEvent"in window,ia=null;jn&&"documentMode"in document&&(ia=document.documentMode);var B2=jn&&"TextEvent"in window&&!ia,$1=jn&&(!Mp||ia&&8<ia&&11>=ia),Dy=" ",My=!1;function W1(t,e){switch(t){case"keyup":return z2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function H1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hs=!1;function U2(t,e){switch(t){case"compositionend":return H1(e);case"keypress":return e.which!==32?null:(My=!0,Dy);case"textInput":return t=e.data,t===Dy&&My?null:t;default:return null}}function $2(t,e){if(hs)return t==="compositionend"||!Mp&&W1(t,e)?(t=U1(),mu=Pp=yr=null,hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $1&&e.locale!=="ko"?null:e.data;default:return null}}var W2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!W2[t.type]:e==="textarea"}function G1(t,e,n,r){x1(r),e=Yu(e,"onChange"),0<e.length&&(n=new Np("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sa=null,ka=null;function H2(t){rw(t,0)}function $c(t){var e=ms(t);if(g1(e))return t}function G2(t,e){if(t==="change")return e}var q1=!1;if(jn){var nh;if(jn){var rh="oninput"in document;if(!rh){var jy=document.createElement("div");jy.setAttribute("oninput","return;"),rh=typeof jy.oninput=="function"}nh=rh}else nh=!1;q1=nh&&(!document.documentMode||9<document.documentMode)}function Oy(){sa&&(sa.detachEvent("onpropertychange",K1),ka=sa=null)}function K1(t){if(t.propertyName==="value"&&$c(ka)){var e=[];G1(e,ka,t,Cp(t)),A1(H2,e)}}function q2(t,e,n){t==="focusin"?(Oy(),sa=e,ka=n,sa.attachEvent("onpropertychange",K1)):t==="focusout"&&Oy()}function K2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $c(ka)}function Q2(t,e){if(t==="click")return $c(e)}function Y2(t,e){if(t==="input"||t==="change")return $c(e)}function J2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:J2;function ba(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!jh.call(e,i)||!an(t[i],e[i]))return!1}return!0}function Fy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ly(t,e){var n=Fy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fy(n)}}function Q1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Q1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Y1(){for(var t=window,e=$u();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$u(t.document)}return e}function Vp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function X2(t){var e=Y1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Q1(n.ownerDocument.documentElement,n)){if(r!==null&&Vp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ly(n,s);var o=Ly(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Z2=jn&&"documentMode"in document&&11>=document.documentMode,fs=null,tf=null,oa=null,nf=!1;function zy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nf||fs==null||fs!==$u(r)||(r=fs,"selectionStart"in r&&Vp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oa&&ba(oa,r)||(oa=r,r=Yu(tf,"onSelect"),0<r.length&&(e=new Np("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fs)))}function Kl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ps={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionend:Kl("Transition","TransitionEnd")},ih={},J1={};jn&&(J1=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Wc(t){if(ih[t])return ih[t];if(!ps[t])return t;var e=ps[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in J1)return ih[t]=e[n];return t}var X1=Wc("animationend"),Z1=Wc("animationiteration"),ew=Wc("animationstart"),tw=Wc("transitionend"),nw=new Map,By="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(t,e){nw.set(t,e),Bi(e,[t])}for(var sh=0;sh<By.length;sh++){var oh=By[sh],eC=oh.toLowerCase(),tC=oh[0].toUpperCase()+oh.slice(1);Ur(eC,"on"+tC)}Ur(X1,"onAnimationEnd");Ur(Z1,"onAnimationIteration");Ur(ew,"onAnimationStart");Ur("dblclick","onDoubleClick");Ur("focusin","onFocus");Ur("focusout","onBlur");Ur(tw,"onTransitionEnd");Ms("onMouseEnter",["mouseout","mouseover"]);Ms("onMouseLeave",["mouseout","mouseover"]);Ms("onPointerEnter",["pointerout","pointerover"]);Ms("onPointerLeave",["pointerout","pointerover"]);Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ko));function Uy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,e2(r,e,void 0,t),t.currentTarget=null}function rw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,d=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Uy(i,a,d),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,d=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Uy(i,a,d),s=u}}}if(Hu)throw t=Jh,Hu=!1,Jh=null,t}function _e(t,e){var n=e[lf];n===void 0&&(n=e[lf]=new Set);var r=t+"__bubble";n.has(r)||(iw(e,t,2,!1),n.add(r))}function ah(t,e,n){var r=0;e&&(r|=4),iw(n,t,r,e)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function Pa(t){if(!t[Ql]){t[Ql]=!0,d1.forEach(function(n){n!=="selectionchange"&&(nC.has(n)||ah(n,!1,t),ah(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ql]||(e[Ql]=!0,ah("selectionchange",!1,e))}}function iw(t,e,n,r){switch(B1(e)){case 1:var i=g2;break;case 4:i=y2;break;default:i=bp}n=i.bind(null,e,n,t),i=void 0,!Yh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function lh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=di(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}A1(function(){var d=s,f=Cp(n),p=[];e:{var g=nw.get(t);if(g!==void 0){var w=Np,E=t;switch(t){case"keypress":if(gu(n)===0)break e;case"keydown":case"keyup":w=N2;break;case"focusin":E="focus",w=th;break;case"focusout":E="blur",w=th;break;case"beforeblur":case"afterblur":w=th;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=by;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=w2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=V2;break;case X1:case Z1:case ew:w=x2;break;case tw:w=O2;break;case"scroll":w=v2;break;case"wheel":w=L2;break;case"copy":case"cut":case"paste":w=S2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Ny}var k=(e&4)!==0,T=!k&&t==="scroll",I=k?g!==null?g+"Capture":null:g;k=[];for(var _=d,S;_!==null;){S=_;var V=S.stateNode;if(S.tag===5&&V!==null&&(S=V,I!==null&&(V=Sa(_,I),V!=null&&k.push(Na(_,V,S)))),T)break;_=_.return}0<k.length&&(g=new w(g,E,null,n,f),p.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==Kh&&(E=n.relatedTarget||n.fromElement)&&(di(E)||E[On]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(E=n.relatedTarget||n.toElement,w=d,E=E?di(E):null,E!==null&&(T=Ui(E),E!==T||E.tag!==5&&E.tag!==6)&&(E=null)):(w=null,E=d),w!==E)){if(k=by,V="onMouseLeave",I="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=Ny,V="onPointerLeave",I="onPointerEnter",_="pointer"),T=w==null?g:ms(w),S=E==null?g:ms(E),g=new k(V,_+"leave",w,n,f),g.target=T,g.relatedTarget=S,V=null,di(f)===d&&(k=new k(I,_+"enter",E,n,f),k.target=S,k.relatedTarget=T,V=k),T=V,w&&E)t:{for(k=w,I=E,_=0,S=k;S;S=Ji(S))_++;for(S=0,V=I;V;V=Ji(V))S++;for(;0<_-S;)k=Ji(k),_--;for(;0<S-_;)I=Ji(I),S--;for(;_--;){if(k===I||I!==null&&k===I.alternate)break t;k=Ji(k),I=Ji(I)}k=null}else k=null;w!==null&&$y(p,g,w,k,!1),E!==null&&T!==null&&$y(p,T,E,k,!0)}}e:{if(g=d?ms(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var j=G2;else if(Vy(g))if(q1)j=Y2;else{j=K2;var z=q2}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(j=Q2);if(j&&(j=j(t,d))){G1(p,j,n,f);break e}z&&z(t,g,d),t==="focusout"&&(z=g._wrapperState)&&z.controlled&&g.type==="number"&&$h(g,"number",g.value)}switch(z=d?ms(d):window,t){case"focusin":(Vy(z)||z.contentEditable==="true")&&(fs=z,tf=d,oa=null);break;case"focusout":oa=tf=fs=null;break;case"mousedown":nf=!0;break;case"contextmenu":case"mouseup":case"dragend":nf=!1,zy(p,n,f);break;case"selectionchange":if(Z2)break;case"keydown":case"keyup":zy(p,n,f)}var x;if(Mp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else hs?W1(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&($1&&n.locale!=="ko"&&(hs||v!=="onCompositionStart"?v==="onCompositionEnd"&&hs&&(x=U1()):(yr=f,Pp="value"in yr?yr.value:yr.textContent,hs=!0)),z=Yu(d,v),0<z.length&&(v=new Py(v,t,null,n,f),p.push({event:v,listeners:z}),x?v.data=x:(x=H1(n),x!==null&&(v.data=x)))),(x=B2?U2(t,n):$2(t,n))&&(d=Yu(d,"onBeforeInput"),0<d.length&&(f=new Py("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=x))}rw(p,e)})}function Na(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sa(t,n),s!=null&&r.unshift(Na(t,s,i)),s=Sa(t,e),s!=null&&r.push(Na(t,s,i))),t=t.return}return r}function Ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $y(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,d=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&d!==null&&(a=d,i?(u=Sa(n,s),u!=null&&o.unshift(Na(n,u,a))):i||(u=Sa(n,s),u!=null&&o.push(Na(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var rC=/\r\n?/g,iC=/\u0000|\uFFFD/g;function Wy(t){return(typeof t=="string"?t:""+t).replace(rC,`
`).replace(iC,"")}function Yl(t,e,n){if(e=Wy(e),Wy(t)!==e&&n)throw Error(U(425))}function Ju(){}var rf=null,sf=null;function of(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var af=typeof setTimeout=="function"?setTimeout:void 0,sC=typeof clearTimeout=="function"?clearTimeout:void 0,Hy=typeof Promise=="function"?Promise:void 0,oC=typeof queueMicrotask=="function"?queueMicrotask:typeof Hy<"u"?function(t){return Hy.resolve(null).then(t).catch(aC)}:af;function aC(t){setTimeout(function(){throw t})}function uh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ra(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ra(e)}function Tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var io=Math.random().toString(36).slice(2),mn="__reactFiber$"+io,Da="__reactProps$"+io,On="__reactContainer$"+io,lf="__reactEvents$"+io,lC="__reactListeners$"+io,uC="__reactHandles$"+io;function di(t){var e=t[mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[On]||n[mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gy(t);t!==null;){if(n=t[mn])return n;t=Gy(t)}return e}t=n,n=t.parentNode}return null}function cl(t){return t=t[mn]||t[On],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ms(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Hc(t){return t[Da]||null}var uf=[],gs=-1;function $r(t){return{current:t}}function we(t){0>gs||(t.current=uf[gs],uf[gs]=null,gs--)}function ye(t,e){gs++,uf[gs]=t.current,t.current=e}var Or={},ht=$r(Or),St=$r(!1),Ii=Or;function Vs(t,e){var n=t.type.contextTypes;if(!n)return Or;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ct(t){return t=t.childContextTypes,t!=null}function Xu(){we(St),we(ht)}function qy(t,e,n){if(ht.current!==Or)throw Error(U(168));ye(ht,e),ye(St,n)}function sw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,qS(t)||"Unknown",i));return Re({},n,r)}function Zu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Or,Ii=ht.current,ye(ht,t),ye(St,St.current),!0}function Ky(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=sw(t,e,Ii),r.__reactInternalMemoizedMergedChildContext=t,we(St),we(ht),ye(ht,t)):we(St),ye(St,n)}var An=null,Gc=!1,ch=!1;function ow(t){An===null?An=[t]:An.push(t)}function cC(t){Gc=!0,ow(t)}function Wr(){if(!ch&&An!==null){ch=!0;var t=0,e=he;try{var n=An;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}An=null,Gc=!1}catch(i){throw An!==null&&(An=An.slice(t+1)),P1(Ap,Wr),i}finally{he=e,ch=!1}}return null}var ys=[],vs=0,ec=null,tc=0,zt=[],Bt=0,xi=null,Rn=1,kn="";function ni(t,e){ys[vs++]=tc,ys[vs++]=ec,ec=t,tc=e}function aw(t,e,n){zt[Bt++]=Rn,zt[Bt++]=kn,zt[Bt++]=xi,xi=t;var r=Rn;t=kn;var i=32-sn(r)-1;r&=~(1<<i),n+=1;var s=32-sn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Rn=1<<32-sn(e)+i|n<<i|r,kn=s+t}else Rn=1<<s|n<<i|r,kn=t}function jp(t){t.return!==null&&(ni(t,1),aw(t,1,0))}function Op(t){for(;t===ec;)ec=ys[--vs],ys[vs]=null,tc=ys[--vs],ys[vs]=null;for(;t===xi;)xi=zt[--Bt],zt[Bt]=null,kn=zt[--Bt],zt[Bt]=null,Rn=zt[--Bt],zt[Bt]=null}var Mt=null,Pt=null,Ie=!1,nn=null;function lw(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Pt=Tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xi!==null?{id:Rn,overflow:kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Pt=null,!0):!1;default:return!1}}function cf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function df(t){if(Ie){var e=Pt;if(e){var n=e;if(!Qy(t,e)){if(cf(t))throw Error(U(418));e=Tr(n.nextSibling);var r=Mt;e&&Qy(t,e)?lw(r,n):(t.flags=t.flags&-4097|2,Ie=!1,Mt=t)}}else{if(cf(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ie=!1,Mt=t}}}function Yy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function Jl(t){if(t!==Mt)return!1;if(!Ie)return Yy(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!of(t.type,t.memoizedProps)),e&&(e=Pt)){if(cf(t))throw uw(),Error(U(418));for(;e;)lw(t,e),e=Tr(e.nextSibling)}if(Yy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pt=Tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pt=null}}else Pt=Mt?Tr(t.stateNode.nextSibling):null;return!0}function uw(){for(var t=Pt;t;)t=Tr(t.nextSibling)}function js(){Pt=Mt=null,Ie=!1}function Fp(t){nn===null?nn=[t]:nn.push(t)}var dC=Wn.ReactCurrentBatchConfig;function Oo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Xl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jy(t){var e=t._init;return e(t._payload)}function cw(t){function e(I,_){if(t){var S=I.deletions;S===null?(I.deletions=[_],I.flags|=16):S.push(_)}}function n(I,_){if(!t)return null;for(;_!==null;)e(I,_),_=_.sibling;return null}function r(I,_){for(I=new Map;_!==null;)_.key!==null?I.set(_.key,_):I.set(_.index,_),_=_.sibling;return I}function i(I,_){return I=Rr(I,_),I.index=0,I.sibling=null,I}function s(I,_,S){return I.index=S,t?(S=I.alternate,S!==null?(S=S.index,S<_?(I.flags|=2,_):S):(I.flags|=2,_)):(I.flags|=1048576,_)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function a(I,_,S,V){return _===null||_.tag!==6?(_=yh(S,I.mode,V),_.return=I,_):(_=i(_,S),_.return=I,_)}function u(I,_,S,V){var j=S.type;return j===ds?f(I,_,S.props.children,V,S.key):_!==null&&(_.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ar&&Jy(j)===_.type)?(V=i(_,S.props),V.ref=Oo(I,_,S),V.return=I,V):(V=xu(S.type,S.key,S.props,null,I.mode,V),V.ref=Oo(I,_,S),V.return=I,V)}function d(I,_,S,V){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=vh(S,I.mode,V),_.return=I,_):(_=i(_,S.children||[]),_.return=I,_)}function f(I,_,S,V,j){return _===null||_.tag!==7?(_=gi(S,I.mode,V,j),_.return=I,_):(_=i(_,S),_.return=I,_)}function p(I,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=yh(""+_,I.mode,S),_.return=I,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Bl:return S=xu(_.type,_.key,_.props,null,I.mode,S),S.ref=Oo(I,null,_),S.return=I,S;case cs:return _=vh(_,I.mode,S),_.return=I,_;case ar:var V=_._init;return p(I,V(_._payload),S)}if(Go(_)||No(_))return _=gi(_,I.mode,S,null),_.return=I,_;Xl(I,_)}return null}function g(I,_,S,V){var j=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return j!==null?null:a(I,_,""+S,V);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Bl:return S.key===j?u(I,_,S,V):null;case cs:return S.key===j?d(I,_,S,V):null;case ar:return j=S._init,g(I,_,j(S._payload),V)}if(Go(S)||No(S))return j!==null?null:f(I,_,S,V,null);Xl(I,S)}return null}function w(I,_,S,V,j){if(typeof V=="string"&&V!==""||typeof V=="number")return I=I.get(S)||null,a(_,I,""+V,j);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Bl:return I=I.get(V.key===null?S:V.key)||null,u(_,I,V,j);case cs:return I=I.get(V.key===null?S:V.key)||null,d(_,I,V,j);case ar:var z=V._init;return w(I,_,S,z(V._payload),j)}if(Go(V)||No(V))return I=I.get(S)||null,f(_,I,V,j,null);Xl(_,V)}return null}function E(I,_,S,V){for(var j=null,z=null,x=_,v=_=0,C=null;x!==null&&v<S.length;v++){x.index>v?(C=x,x=null):C=x.sibling;var R=g(I,x,S[v],V);if(R===null){x===null&&(x=C);break}t&&x&&R.alternate===null&&e(I,x),_=s(R,_,v),z===null?j=R:z.sibling=R,z=R,x=C}if(v===S.length)return n(I,x),Ie&&ni(I,v),j;if(x===null){for(;v<S.length;v++)x=p(I,S[v],V),x!==null&&(_=s(x,_,v),z===null?j=x:z.sibling=x,z=x);return Ie&&ni(I,v),j}for(x=r(I,x);v<S.length;v++)C=w(x,I,v,S[v],V),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?v:C.key),_=s(C,_,v),z===null?j=C:z.sibling=C,z=C);return t&&x.forEach(function(b){return e(I,b)}),Ie&&ni(I,v),j}function k(I,_,S,V){var j=No(S);if(typeof j!="function")throw Error(U(150));if(S=j.call(S),S==null)throw Error(U(151));for(var z=j=null,x=_,v=_=0,C=null,R=S.next();x!==null&&!R.done;v++,R=S.next()){x.index>v?(C=x,x=null):C=x.sibling;var b=g(I,x,R.value,V);if(b===null){x===null&&(x=C);break}t&&x&&b.alternate===null&&e(I,x),_=s(b,_,v),z===null?j=b:z.sibling=b,z=b,x=C}if(R.done)return n(I,x),Ie&&ni(I,v),j;if(x===null){for(;!R.done;v++,R=S.next())R=p(I,R.value,V),R!==null&&(_=s(R,_,v),z===null?j=R:z.sibling=R,z=R);return Ie&&ni(I,v),j}for(x=r(I,x);!R.done;v++,R=S.next())R=w(x,I,v,R.value,V),R!==null&&(t&&R.alternate!==null&&x.delete(R.key===null?v:R.key),_=s(R,_,v),z===null?j=R:z.sibling=R,z=R);return t&&x.forEach(function(N){return e(I,N)}),Ie&&ni(I,v),j}function T(I,_,S,V){if(typeof S=="object"&&S!==null&&S.type===ds&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Bl:e:{for(var j=S.key,z=_;z!==null;){if(z.key===j){if(j=S.type,j===ds){if(z.tag===7){n(I,z.sibling),_=i(z,S.props.children),_.return=I,I=_;break e}}else if(z.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ar&&Jy(j)===z.type){n(I,z.sibling),_=i(z,S.props),_.ref=Oo(I,z,S),_.return=I,I=_;break e}n(I,z);break}else e(I,z);z=z.sibling}S.type===ds?(_=gi(S.props.children,I.mode,V,S.key),_.return=I,I=_):(V=xu(S.type,S.key,S.props,null,I.mode,V),V.ref=Oo(I,_,S),V.return=I,I=V)}return o(I);case cs:e:{for(z=S.key;_!==null;){if(_.key===z)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(I,_.sibling),_=i(_,S.children||[]),_.return=I,I=_;break e}else{n(I,_);break}else e(I,_);_=_.sibling}_=vh(S,I.mode,V),_.return=I,I=_}return o(I);case ar:return z=S._init,T(I,_,z(S._payload),V)}if(Go(S))return E(I,_,S,V);if(No(S))return k(I,_,S,V);Xl(I,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(I,_.sibling),_=i(_,S),_.return=I,I=_):(n(I,_),_=yh(S,I.mode,V),_.return=I,I=_),o(I)):n(I,_)}return T}var Os=cw(!0),dw=cw(!1),nc=$r(null),rc=null,_s=null,Lp=null;function zp(){Lp=_s=rc=null}function Bp(t){var e=nc.current;we(nc),t._currentValue=e}function hf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function As(t,e){rc=t,Lp=_s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tt=!0),t.firstContext=null)}function Qt(t){var e=t._currentValue;if(Lp!==t)if(t={context:t,memoizedValue:e,next:null},_s===null){if(rc===null)throw Error(U(308));_s=t,rc.dependencies={lanes:0,firstContext:t}}else _s=_s.next=t;return e}var hi=null;function Up(t){hi===null?hi=[t]:hi.push(t)}function hw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Up(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fn(t,r)}function Fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function $p(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fn(t,n)}return i=r.interleaved,i===null?(e.next=e,Up(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fn(t,n)}function yu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rp(t,n)}}function Xy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ic(t,e,n,r){var i=t.updateQueue;lr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,f=d=u=null,a=s;do{var g=a.lane,w=a.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,k=a;switch(g=e,w=n,k.tag){case 1:if(E=k.payload,typeof E=="function"){p=E.call(w,p,g);break e}p=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=k.payload,g=typeof E=="function"?E.call(w,p,g):E,g==null)break e;p=Re({},p,g);break e;case 2:lr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else w={eventTime:w,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=w,u=p):f=f.next=w,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Si|=o,t.lanes=o,t.memoizedState=p}}function Zy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var dl={},wn=$r(dl),Ma=$r(dl),Va=$r(dl);function fi(t){if(t===dl)throw Error(U(174));return t}function Wp(t,e){switch(ye(Va,e),ye(Ma,t),ye(wn,dl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hh(e,t)}we(wn),ye(wn,e)}function Fs(){we(wn),we(Ma),we(Va)}function pw(t){fi(Va.current);var e=fi(wn.current),n=Hh(e,t.type);e!==n&&(ye(Ma,t),ye(wn,n))}function Hp(t){Ma.current===t&&(we(wn),we(Ma))}var Se=$r(0);function sc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dh=[];function Gp(){for(var t=0;t<dh.length;t++)dh[t]._workInProgressVersionPrimary=null;dh.length=0}var vu=Wn.ReactCurrentDispatcher,hh=Wn.ReactCurrentBatchConfig,Ti=0,Ae=null,$e=null,Qe=null,oc=!1,aa=!1,ja=0,hC=0;function st(){throw Error(U(321))}function qp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function Kp(t,e,n,r,i,s){if(Ti=s,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vu.current=t===null||t.memoizedState===null?gC:yC,t=n(r,i),aa){s=0;do{if(aa=!1,ja=0,25<=s)throw Error(U(301));s+=1,Qe=$e=null,e.updateQueue=null,vu.current=vC,t=n(r,i)}while(aa)}if(vu.current=ac,e=$e!==null&&$e.next!==null,Ti=0,Qe=$e=Ae=null,oc=!1,e)throw Error(U(300));return t}function Qp(){var t=ja!==0;return ja=0,t}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Ae.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Yt(){if($e===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Qe===null?Ae.memoizedState:Qe.next;if(e!==null)Qe=e,$e=t;else{if(t===null)throw Error(U(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Qe===null?Ae.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function Oa(t,e){return typeof e=="function"?e(t):e}function fh(t){var e=Yt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=$e,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,d=s;do{var f=d.lane;if((Ti&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(a=u=p,o=r):u=u.next=p,Ae.lanes|=f,Si|=f}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=a,an(r,e.memoizedState)||(Tt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ae.lanes|=s,Si|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ph(t){var e=Yt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);an(s,e.memoizedState)||(Tt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function mw(){}function gw(t,e){var n=Ae,r=Yt(),i=e(),s=!an(r.memoizedState,i);if(s&&(r.memoizedState=i,Tt=!0),r=r.queue,Yp(_w.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,Fa(9,vw.bind(null,n,r,i,e),void 0,null),Je===null)throw Error(U(349));Ti&30||yw(n,e,i)}return i}function yw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vw(t,e,n,r){e.value=n,e.getSnapshot=r,ww(e)&&Ew(t)}function _w(t,e,n){return n(function(){ww(e)&&Ew(t)})}function ww(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function Ew(t){var e=Fn(t,1);e!==null&&on(e,t,1,-1)}function ev(t){var e=fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:t},e.queue=t,t=t.dispatch=mC.bind(null,Ae,t),[e.memoizedState,t]}function Fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Iw(){return Yt().memoizedState}function _u(t,e,n,r){var i=fn();Ae.flags|=t,i.memoizedState=Fa(1|e,n,void 0,r===void 0?null:r)}function qc(t,e,n,r){var i=Yt();r=r===void 0?null:r;var s=void 0;if($e!==null){var o=$e.memoizedState;if(s=o.destroy,r!==null&&qp(r,o.deps)){i.memoizedState=Fa(e,n,s,r);return}}Ae.flags|=t,i.memoizedState=Fa(1|e,n,s,r)}function tv(t,e){return _u(8390656,8,t,e)}function Yp(t,e){return qc(2048,8,t,e)}function xw(t,e){return qc(4,2,t,e)}function Tw(t,e){return qc(4,4,t,e)}function Sw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cw(t,e,n){return n=n!=null?n.concat([t]):null,qc(4,4,Sw.bind(null,e,t),n)}function Jp(){}function Aw(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Rw(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kw(t,e,n){return Ti&21?(an(n,e)||(n=M1(),Ae.lanes|=n,Si|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=n)}function fC(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=hh.transition;hh.transition={};try{t(!1),e()}finally{he=n,hh.transition=r}}function bw(){return Yt().memoizedState}function pC(t,e,n){var r=Ar(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Pw(t))Nw(e,n);else if(n=hw(t,e,n,r),n!==null){var i=yt();on(n,t,r,i),Dw(n,e,r)}}function mC(t,e,n){var r=Ar(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Pw(t))Nw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,an(a,o)){var u=e.interleaved;u===null?(i.next=i,Up(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=hw(t,e,i,r),n!==null&&(i=yt(),on(n,t,r,i),Dw(n,e,r))}}function Pw(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function Nw(t,e){aa=oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Dw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rp(t,n)}}var ac={readContext:Qt,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},gC={readContext:Qt,useCallback:function(t,e){return fn().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:tv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_u(4194308,4,Sw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _u(4194308,4,t,e)},useInsertionEffect:function(t,e){return _u(4,2,t,e)},useMemo:function(t,e){var n=fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=pC.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=fn();return t={current:t},e.memoizedState=t},useState:ev,useDebugValue:Jp,useDeferredValue:function(t){return fn().memoizedState=t},useTransition:function(){var t=ev(!1),e=t[0];return t=fC.bind(null,t[1]),fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,i=fn();if(Ie){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Je===null)throw Error(U(349));Ti&30||yw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,tv(_w.bind(null,r,s,t),[t]),r.flags|=2048,Fa(9,vw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=fn(),e=Je.identifierPrefix;if(Ie){var n=kn,r=Rn;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ja++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yC={readContext:Qt,useCallback:Aw,useContext:Qt,useEffect:Yp,useImperativeHandle:Cw,useInsertionEffect:xw,useLayoutEffect:Tw,useMemo:Rw,useReducer:fh,useRef:Iw,useState:function(){return fh(Oa)},useDebugValue:Jp,useDeferredValue:function(t){var e=Yt();return kw(e,$e.memoizedState,t)},useTransition:function(){var t=fh(Oa)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:mw,useSyncExternalStore:gw,useId:bw,unstable_isNewReconciler:!1},vC={readContext:Qt,useCallback:Aw,useContext:Qt,useEffect:Yp,useImperativeHandle:Cw,useInsertionEffect:xw,useLayoutEffect:Tw,useMemo:Rw,useReducer:ph,useRef:Iw,useState:function(){return ph(Oa)},useDebugValue:Jp,useDeferredValue:function(t){var e=Yt();return $e===null?e.memoizedState=t:kw(e,$e.memoizedState,t)},useTransition:function(){var t=ph(Oa)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:mw,useSyncExternalStore:gw,useId:bw,unstable_isNewReconciler:!1};function Zt(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ff(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kc={isMounted:function(t){return(t=t._reactInternals)?Ui(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yt(),i=Ar(t),s=Dn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Sr(t,s,i),e!==null&&(on(e,t,i,r),yu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yt(),i=Ar(t),s=Dn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Sr(t,s,i),e!==null&&(on(e,t,i,r),yu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yt(),r=Ar(t),i=Dn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Sr(t,i,r),e!==null&&(on(e,t,r,n),yu(e,t,r))}};function nv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ba(n,r)||!ba(i,s):!0}function Mw(t,e,n){var r=!1,i=Or,s=e.contextType;return typeof s=="object"&&s!==null?s=Qt(s):(i=Ct(e)?Ii:ht.current,r=e.contextTypes,s=(r=r!=null)?Vs(t,i):Or),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function rv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Kc.enqueueReplaceState(e,e.state,null)}function pf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},$p(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Qt(s):(s=Ct(e)?Ii:ht.current,i.context=Vs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ff(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Kc.enqueueReplaceState(i,i.state,null),ic(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ls(t,e){try{var n="",r=e;do n+=GS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function mh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _C=typeof WeakMap=="function"?WeakMap:Map;function Vw(t,e,n){n=Dn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){uc||(uc=!0,Sf=r),mf(t,e)},n}function jw(t,e,n){n=Dn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){mf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){mf(t,e),typeof r!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function iv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _C;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=DC.bind(null,t,e,n),e.then(t,t))}function sv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ov(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dn(-1,1),e.tag=2,Sr(n,e,1))),n.lanes|=1),t)}var wC=Wn.ReactCurrentOwner,Tt=!1;function mt(t,e,n,r){e.child=t===null?dw(e,null,n,r):Os(e,t.child,n,r)}function av(t,e,n,r,i){n=n.render;var s=e.ref;return As(e,i),r=Kp(t,e,n,r,s,i),n=Qp(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):(Ie&&n&&jp(e),e.flags|=1,mt(t,e,r,i),e.child)}function lv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!sm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ow(t,e,s,r,i)):(t=xu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ba,n(o,r)&&t.ref===e.ref)return Ln(t,e,i)}return e.flags|=1,t=Rr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Ow(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ba(s,r)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,Ln(t,e,i)}return gf(t,e,n,r,i)}function Fw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Es,kt),kt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Es,kt),kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ye(Es,kt),kt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ye(Es,kt),kt|=r;return mt(t,e,i,n),e.child}function Lw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gf(t,e,n,r,i){var s=Ct(n)?Ii:ht.current;return s=Vs(e,s),As(e,i),n=Kp(t,e,n,r,s,i),r=Qp(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ln(t,e,i)):(Ie&&r&&jp(e),e.flags|=1,mt(t,e,n,i),e.child)}function uv(t,e,n,r,i){if(Ct(n)){var s=!0;Zu(e)}else s=!1;if(As(e,i),e.stateNode===null)wu(t,e),Mw(e,n,r),pf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Qt(d):(d=Ct(n)?Ii:ht.current,d=Vs(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==d)&&rv(e,o,r,d),lr=!1;var g=e.memoizedState;o.state=g,ic(e,r,o,i),u=e.memoizedState,a!==r||g!==u||St.current||lr?(typeof f=="function"&&(ff(e,n,f,r),u=e.memoizedState),(a=lr||nv(e,n,a,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,fw(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Zt(e.type,a),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Qt(u):(u=Ct(n)?Ii:ht.current,u=Vs(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||g!==u)&&rv(e,o,r,u),lr=!1,g=e.memoizedState,o.state=g,ic(e,r,o,i);var E=e.memoizedState;a!==p||g!==E||St.current||lr?(typeof w=="function"&&(ff(e,n,w,r),E=e.memoizedState),(d=lr||nv(e,n,d,r,g,E,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return yf(t,e,n,r,s,i)}function yf(t,e,n,r,i,s){Lw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ky(e,n,!1),Ln(t,e,s);r=e.stateNode,wC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Os(e,t.child,null,s),e.child=Os(e,null,a,s)):mt(t,e,a,s),e.memoizedState=r.state,i&&Ky(e,n,!0),e.child}function zw(t){var e=t.stateNode;e.pendingContext?qy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qy(t,e.context,!1),Wp(t,e.containerInfo)}function cv(t,e,n,r,i){return js(),Fp(i),e.flags|=256,mt(t,e,n,r),e.child}var vf={dehydrated:null,treeContext:null,retryLane:0};function _f(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bw(t,e,n){var r=e.pendingProps,i=Se.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ye(Se,i&1),t===null)return df(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Jc(o,r,0,null),t=gi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=_f(n),e.memoizedState=vf,t):Xp(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return EC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Rr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Rr(a,s):(s=gi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?_f(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=vf,r}return s=t.child,t=s.sibling,r=Rr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xp(t,e){return e=Jc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zl(t,e,n,r){return r!==null&&Fp(r),Os(e,t.child,null,n),t=Xp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function EC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=mh(Error(U(422))),Zl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Jc({mode:"visible",children:r.children},i,0,null),s=gi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Os(e,t.child,null,o),e.child.memoizedState=_f(o),e.memoizedState=vf,s);if(!(e.mode&1))return Zl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=mh(s,r,void 0),Zl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Tt||a){if(r=Je,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Fn(t,i),on(r,t,i,-1))}return im(),r=mh(Error(U(421))),Zl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=MC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Pt=Tr(i.nextSibling),Mt=e,Ie=!0,nn=null,t!==null&&(zt[Bt++]=Rn,zt[Bt++]=kn,zt[Bt++]=xi,Rn=t.id,kn=t.overflow,xi=e),e=Xp(e,r.children),e.flags|=4096,e)}function dv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hf(t.return,e,n)}function gh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Uw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(mt(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dv(t,n,e);else if(t.tag===19)dv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Se,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gh(e,!0,n,null,s);break;case"together":gh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Si|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function IC(t,e,n){switch(e.tag){case 3:zw(e),js();break;case 5:pw(e);break;case 1:Ct(e.type)&&Zu(e);break;case 4:Wp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ye(nc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?Bw(t,e,n):(ye(Se,Se.current&1),t=Ln(t,e,n),t!==null?t.sibling:null);ye(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Uw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ye(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,Fw(t,e,n)}return Ln(t,e,n)}var $w,wf,Ww,Hw;$w=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wf=function(){};Ww=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,fi(wn.current);var s=null;switch(n){case"input":i=Bh(t,i),r=Bh(t,r),s=[];break;case"select":i=Re({},i,{value:void 0}),r=Re({},r,{value:void 0}),s=[];break;case"textarea":i=Wh(t,i),r=Wh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ju)}Gh(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(xa.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(a=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==a&&(u!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(xa.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&_e("scroll",t),s||a===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};Hw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fo(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xC(t,e,n){var r=e.pendingProps;switch(Op(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Ct(e.type)&&Xu(),ot(e),null;case 3:return r=e.stateNode,Fs(),we(St),we(ht),Gp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Jl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nn!==null&&(Rf(nn),nn=null))),wf(t,e),ot(e),null;case 5:Hp(e);var i=fi(Va.current);if(n=e.type,t!==null&&e.stateNode!=null)Ww(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ot(e),null}if(t=fi(wn.current),Jl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[mn]=e,r[Da]=s,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(i=0;i<Ko.length;i++)_e(Ko[i],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":wy(r,s),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_e("invalid",r);break;case"textarea":Iy(r,s),_e("invalid",r)}Gh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Yl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Yl(r.textContent,a,t),i=["children",""+a]):xa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":Ul(r),Ey(r,s,!0);break;case"textarea":Ul(r),xy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ju)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[mn]=e,t[Da]=r,$w(t,e,!1,!1),e.stateNode=t;e:{switch(o=qh(n,r),n){case"dialog":_e("cancel",t),_e("close",t),i=r;break;case"iframe":case"object":case"embed":_e("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ko.length;i++)_e(Ko[i],t);i=r;break;case"source":_e("error",t),i=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),i=r;break;case"details":_e("toggle",t),i=r;break;case"input":wy(t,r),i=Bh(t,r),_e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Re({},r,{value:void 0}),_e("invalid",t);break;case"textarea":Iy(t,r),i=Wh(t,r),_e("invalid",t);break;default:i=r}Gh(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?I1(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&w1(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ta(t,u):typeof u=="number"&&Ta(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xa.hasOwnProperty(s)?u!=null&&s==="onScroll"&&_e("scroll",t):u!=null&&Ip(t,s,u,o))}switch(n){case"input":Ul(t),Ey(t,r,!1);break;case"textarea":Ul(t),xy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+jr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?xs(t,!!r.multiple,s,!1):r.defaultValue!=null&&xs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ju)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)Hw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=fi(Va.current),fi(wn.current),Jl(e)){if(r=e.stateNode,n=e.memoizedProps,r[mn]=e,(s=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:Yl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mn]=e,e.stateNode=r}return ot(e),null;case 13:if(we(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Pt!==null&&e.mode&1&&!(e.flags&128))uw(),js(),e.flags|=98560,s=!1;else if(s=Jl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[mn]=e}else js(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),s=!1}else nn!==null&&(Rf(nn),nn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?We===0&&(We=3):im())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return Fs(),wf(t,e),t===null&&Pa(e.stateNode.containerInfo),ot(e),null;case 10:return Bp(e.type._context),ot(e),null;case 17:return Ct(e.type)&&Xu(),ot(e),null;case 19:if(we(Se),s=e.memoizedState,s===null)return ot(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fo(s,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sc(t),o!==null){for(e.flags|=128,Fo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Se,Se.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ve()>zs&&(e.flags|=128,r=!0,Fo(s,!1),e.lanes=4194304)}else{if(!r)if(t=sc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ie)return ot(e),null}else 2*Ve()-s.renderingStartTime>zs&&n!==1073741824&&(e.flags|=128,r=!0,Fo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ve(),e.sibling=null,n=Se.current,ye(Se,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return rm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function TC(t,e){switch(Op(e),e.tag){case 1:return Ct(e.type)&&Xu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fs(),we(St),we(ht),Gp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hp(e),null;case 13:if(we(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));js()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Se),null;case 4:return Fs(),null;case 10:return Bp(e.type._context),null;case 22:case 23:return rm(),null;case 24:return null;default:return null}}var eu=!1,ut=!1,SC=typeof WeakSet=="function"?WeakSet:Set,K=null;function ws(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function Ef(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var hv=!1;function CC(t,e){if(rf=Ku,t=Y1(),Vp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var w;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break t;if(g===n&&++d===i&&(a=o),g===s&&++f===r&&(u=o),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(sf={focusedElem:t,selectionRange:n},Ku=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var k=E.memoizedProps,T=E.memoizedState,I=e.stateNode,_=I.getSnapshotBeforeUpdate(e.elementType===e.type?k:Zt(e.type,k),T);I.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(V){Ne(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return E=hv,hv=!1,E}function la(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ef(e,n,s)}i=i.next}while(i!==r)}}function Qc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function If(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gw(t){var e=t.alternate;e!==null&&(t.alternate=null,Gw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mn],delete e[Da],delete e[lf],delete e[lC],delete e[uC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qw(t){return t.tag===5||t.tag===3||t.tag===4}function fv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ju));else if(r!==4&&(t=t.child,t!==null))for(xf(t,e,n),t=t.sibling;t!==null;)xf(t,e,n),t=t.sibling}function Tf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Tf(t,e,n),t=t.sibling;t!==null;)Tf(t,e,n),t=t.sibling}var Xe=null,en=!1;function nr(t,e,n){for(n=n.child;n!==null;)Kw(t,e,n),n=n.sibling}function Kw(t,e,n){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Bc,n)}catch{}switch(n.tag){case 5:ut||ws(n,e);case 6:var r=Xe,i=en;Xe=null,nr(t,e,n),Xe=r,en=i,Xe!==null&&(en?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(en?(t=Xe,n=n.stateNode,t.nodeType===8?uh(t.parentNode,n):t.nodeType===1&&uh(t,n),Ra(t)):uh(Xe,n.stateNode));break;case 4:r=Xe,i=en,Xe=n.stateNode.containerInfo,en=!0,nr(t,e,n),Xe=r,en=i;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ef(n,e,o),i=i.next}while(i!==r)}nr(t,e,n);break;case 1:if(!ut&&(ws(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ne(n,e,a)}nr(t,e,n);break;case 21:nr(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,nr(t,e,n),ut=r):nr(t,e,n);break;default:nr(t,e,n)}}function pv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SC),e.forEach(function(r){var i=VC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xe=a.stateNode,en=!1;break e;case 3:Xe=a.stateNode.containerInfo,en=!0;break e;case 4:Xe=a.stateNode.containerInfo,en=!0;break e}a=a.return}if(Xe===null)throw Error(U(160));Kw(s,o,i),Xe=null,en=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Ne(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qw(e,t),e=e.sibling}function Qw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),dn(t),r&4){try{la(3,t,t.return),Qc(3,t)}catch(k){Ne(t,t.return,k)}try{la(5,t,t.return)}catch(k){Ne(t,t.return,k)}}break;case 1:Jt(e,t),dn(t),r&512&&n!==null&&ws(n,n.return);break;case 5:if(Jt(e,t),dn(t),r&512&&n!==null&&ws(n,n.return),t.flags&32){var i=t.stateNode;try{Ta(i,"")}catch(k){Ne(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&y1(i,s),qh(a,o);var d=qh(a,s);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?I1(i,p):f==="dangerouslySetInnerHTML"?w1(i,p):f==="children"?Ta(i,p):Ip(i,f,p,d)}switch(a){case"input":Uh(i,s);break;case"textarea":v1(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?xs(i,!!s.multiple,w,!1):g!==!!s.multiple&&(s.defaultValue!=null?xs(i,!!s.multiple,s.defaultValue,!0):xs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Da]=s}catch(k){Ne(t,t.return,k)}}break;case 6:if(Jt(e,t),dn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){Ne(t,t.return,k)}}break;case 3:if(Jt(e,t),dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ra(e.containerInfo)}catch(k){Ne(t,t.return,k)}break;case 4:Jt(e,t),dn(t);break;case 13:Jt(e,t),dn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(tm=Ve())),r&4&&pv(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(d=ut)||f,Jt(e,t),ut=d):Jt(e,t),dn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(K=t,f=t.child;f!==null;){for(p=K=f;K!==null;){switch(g=K,w=g.child,g.tag){case 0:case 11:case 14:case 15:la(4,g,g.return);break;case 1:ws(g,g.return);var E=g.stateNode;if(typeof E.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(k){Ne(r,n,k)}}break;case 5:ws(g,g.return);break;case 22:if(g.memoizedState!==null){gv(p);continue}}w!==null?(w.return=g,K=w):gv(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=E1("display",o))}catch(k){Ne(t,t.return,k)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(k){Ne(t,t.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Jt(e,t),dn(t),r&4&&pv(t);break;case 21:break;default:Jt(e,t),dn(t)}}function dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qw(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ta(i,""),r.flags&=-33);var s=fv(t);Tf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=fv(t);xf(t,a,o);break;default:throw Error(U(161))}}catch(u){Ne(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AC(t,e,n){K=t,Yw(t)}function Yw(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||eu;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ut;a=eu;var d=ut;if(eu=o,(ut=u)&&!d)for(K=i;K!==null;)o=K,u=o.child,o.tag===22&&o.memoizedState!==null?yv(i):u!==null?(u.return=o,K=u):yv(i);for(;s!==null;)K=s,Yw(s),s=s.sibling;K=i,eu=a,ut=d}mv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):mv(t)}}function mv(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||Qc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Zy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Ra(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ut||e.flags&512&&If(e)}catch(g){Ne(e,e.return,g)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function gv(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function yv(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qc(4,e)}catch(u){Ne(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ne(e,i,u)}}var s=e.return;try{If(e)}catch(u){Ne(e,s,u)}break;case 5:var o=e.return;try{If(e)}catch(u){Ne(e,o,u)}}}catch(u){Ne(e,e.return,u)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var RC=Math.ceil,lc=Wn.ReactCurrentDispatcher,Zp=Wn.ReactCurrentOwner,qt=Wn.ReactCurrentBatchConfig,ce=0,Je=null,Fe=null,tt=0,kt=0,Es=$r(0),We=0,La=null,Si=0,Yc=0,em=0,ua=null,It=null,tm=0,zs=1/0,Cn=null,uc=!1,Sf=null,Cr=null,tu=!1,vr=null,cc=0,ca=0,Cf=null,Eu=-1,Iu=0;function yt(){return ce&6?Ve():Eu!==-1?Eu:Eu=Ve()}function Ar(t){return t.mode&1?ce&2&&tt!==0?tt&-tt:dC.transition!==null?(Iu===0&&(Iu=M1()),Iu):(t=he,t!==0||(t=window.event,t=t===void 0?16:B1(t.type)),t):1}function on(t,e,n,r){if(50<ca)throw ca=0,Cf=null,Error(U(185));ll(t,n,r),(!(ce&2)||t!==Je)&&(t===Je&&(!(ce&2)&&(Yc|=n),We===4&&dr(t,tt)),At(t,r),n===1&&ce===0&&!(e.mode&1)&&(zs=Ve()+500,Gc&&Wr()))}function At(t,e){var n=t.callbackNode;d2(t,e);var r=qu(t,t===Je?tt:0);if(r===0)n!==null&&Cy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Cy(n),e===1)t.tag===0?cC(vv.bind(null,t)):ow(vv.bind(null,t)),oC(function(){!(ce&6)&&Wr()}),n=null;else{switch(V1(r)){case 1:n=Ap;break;case 4:n=N1;break;case 16:n=Gu;break;case 536870912:n=D1;break;default:n=Gu}n=iE(n,Jw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Jw(t,e){if(Eu=-1,Iu=0,ce&6)throw Error(U(327));var n=t.callbackNode;if(Rs()&&t.callbackNode!==n)return null;var r=qu(t,t===Je?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dc(t,r);else{e=r;var i=ce;ce|=2;var s=Zw();(Je!==t||tt!==e)&&(Cn=null,zs=Ve()+500,mi(t,e));do try{PC();break}catch(a){Xw(t,a)}while(!0);zp(),lc.current=s,ce=i,Fe!==null?e=0:(Je=null,tt=0,e=We)}if(e!==0){if(e===2&&(i=Xh(t),i!==0&&(r=i,e=Af(t,i))),e===1)throw n=La,mi(t,0),dr(t,r),At(t,Ve()),n;if(e===6)dr(t,r);else{if(i=t.current.alternate,!(r&30)&&!kC(i)&&(e=dc(t,r),e===2&&(s=Xh(t),s!==0&&(r=s,e=Af(t,s))),e===1))throw n=La,mi(t,0),dr(t,r),At(t,Ve()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:ri(t,It,Cn);break;case 3:if(dr(t,r),(r&130023424)===r&&(e=tm+500-Ve(),10<e)){if(qu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=af(ri.bind(null,t,It,Cn),e);break}ri(t,It,Cn);break;case 4:if(dr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-sn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RC(r/1960))-r,10<r){t.timeoutHandle=af(ri.bind(null,t,It,Cn),r);break}ri(t,It,Cn);break;case 5:ri(t,It,Cn);break;default:throw Error(U(329))}}}return At(t,Ve()),t.callbackNode===n?Jw.bind(null,t):null}function Af(t,e){var n=ua;return t.current.memoizedState.isDehydrated&&(mi(t,e).flags|=256),t=dc(t,e),t!==2&&(e=It,It=n,e!==null&&Rf(e)),t}function Rf(t){It===null?It=t:It.push.apply(It,t)}function kC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!an(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e){for(e&=~em,e&=~Yc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sn(e),r=1<<n;t[n]=-1,e&=~r}}function vv(t){if(ce&6)throw Error(U(327));Rs();var e=qu(t,0);if(!(e&1))return At(t,Ve()),null;var n=dc(t,e);if(t.tag!==0&&n===2){var r=Xh(t);r!==0&&(e=r,n=Af(t,r))}if(n===1)throw n=La,mi(t,0),dr(t,e),At(t,Ve()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ri(t,It,Cn),At(t,Ve()),null}function nm(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(zs=Ve()+500,Gc&&Wr())}}function Ci(t){vr!==null&&vr.tag===0&&!(ce&6)&&Rs();var e=ce;ce|=1;var n=qt.transition,r=he;try{if(qt.transition=null,he=1,t)return t()}finally{he=r,qt.transition=n,ce=e,!(ce&6)&&Wr()}}function rm(){kt=Es.current,we(Es)}function mi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,sC(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(Op(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xu();break;case 3:Fs(),we(St),we(ht),Gp();break;case 5:Hp(r);break;case 4:Fs();break;case 13:we(Se);break;case 19:we(Se);break;case 10:Bp(r.type._context);break;case 22:case 23:rm()}n=n.return}if(Je=t,Fe=t=Rr(t.current,null),tt=kt=e,We=0,La=null,em=Yc=Si=0,It=ua=null,hi!==null){for(e=0;e<hi.length;e++)if(n=hi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}hi=null}return t}function Xw(t,e){do{var n=Fe;try{if(zp(),vu.current=ac,oc){for(var r=Ae.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}oc=!1}if(Ti=0,Qe=$e=Ae=null,aa=!1,ja=0,Zp.current=null,n===null||n.return===null){We=1,La=e,Fe=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=tt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=a,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=sv(o);if(w!==null){w.flags&=-257,ov(w,o,a,s,e),w.mode&1&&iv(s,d,e),e=w,u=d;var E=e.updateQueue;if(E===null){var k=new Set;k.add(u),e.updateQueue=k}else E.add(u);break e}else{if(!(e&1)){iv(s,d,e),im();break e}u=Error(U(426))}}else if(Ie&&a.mode&1){var T=sv(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),ov(T,o,a,s,e),Fp(Ls(u,a));break e}}s=u=Ls(u,a),We!==4&&(We=2),ua===null?ua=[s]:ua.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=Vw(s,u,e);Xy(s,I);break e;case 1:a=u;var _=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Cr===null||!Cr.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=jw(s,a,e);Xy(s,V);break e}}s=s.return}while(s!==null)}tE(n)}catch(j){e=j,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function Zw(){var t=lc.current;return lc.current=ac,t===null?ac:t}function im(){(We===0||We===3||We===2)&&(We=4),Je===null||!(Si&268435455)&&!(Yc&268435455)||dr(Je,tt)}function dc(t,e){var n=ce;ce|=2;var r=Zw();(Je!==t||tt!==e)&&(Cn=null,mi(t,e));do try{bC();break}catch(i){Xw(t,i)}while(!0);if(zp(),ce=n,lc.current=r,Fe!==null)throw Error(U(261));return Je=null,tt=0,We}function bC(){for(;Fe!==null;)eE(Fe)}function PC(){for(;Fe!==null&&!n2();)eE(Fe)}function eE(t){var e=rE(t.alternate,t,kt);t.memoizedProps=t.pendingProps,e===null?tE(t):Fe=e,Zp.current=null}function tE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TC(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Fe=null;return}}else if(n=xC(n,e,kt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);We===0&&(We=5)}function ri(t,e,n){var r=he,i=qt.transition;try{qt.transition=null,he=1,NC(t,e,n,r)}finally{qt.transition=i,he=r}return null}function NC(t,e,n,r){do Rs();while(vr!==null);if(ce&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(h2(t,s),t===Je&&(Fe=Je=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tu||(tu=!0,iE(Gu,function(){return Rs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=qt.transition,qt.transition=null;var o=he;he=1;var a=ce;ce|=4,Zp.current=null,CC(t,n),Qw(n,t),X2(sf),Ku=!!rf,sf=rf=null,t.current=n,AC(n),r2(),ce=a,he=o,qt.transition=s}else t.current=n;if(tu&&(tu=!1,vr=t,cc=i),s=t.pendingLanes,s===0&&(Cr=null),o2(n.stateNode),At(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(uc)throw uc=!1,t=Sf,Sf=null,t;return cc&1&&t.tag!==0&&Rs(),s=t.pendingLanes,s&1?t===Cf?ca++:(ca=0,Cf=t):ca=0,Wr(),null}function Rs(){if(vr!==null){var t=V1(cc),e=qt.transition,n=he;try{if(qt.transition=null,he=16>t?16:t,vr===null)var r=!1;else{if(t=vr,vr=null,cc=0,ce&6)throw Error(U(331));var i=ce;for(ce|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var d=a[u];for(K=d;K!==null;){var f=K;switch(f.tag){case 0:case 11:case 15:la(8,f,s)}var p=f.child;if(p!==null)p.return=f,K=p;else for(;K!==null;){f=K;var g=f.sibling,w=f.return;if(Gw(f),f===d){K=null;break}if(g!==null){g.return=w,K=g;break}K=w}}}var E=s.alternate;if(E!==null){var k=E.child;if(k!==null){E.child=null;do{var T=k.sibling;k.sibling=null,k=T}while(k!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:la(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,K=I;break e}K=s.return}}var _=t.current;for(K=_;K!==null;){o=K;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,K=S;else e:for(o=_;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Qc(9,a)}}catch(j){Ne(a,a.return,j)}if(a===o){K=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,K=V;break e}K=a.return}}if(ce=i,Wr(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Bc,t)}catch{}r=!0}return r}finally{he=n,qt.transition=e}}return!1}function _v(t,e,n){e=Ls(n,e),e=Vw(t,e,1),t=Sr(t,e,1),e=yt(),t!==null&&(ll(t,1,e),At(t,e))}function Ne(t,e,n){if(t.tag===3)_v(t,t,n);else for(;e!==null;){if(e.tag===3){_v(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cr===null||!Cr.has(r))){t=Ls(n,t),t=jw(e,t,1),e=Sr(e,t,1),t=yt(),e!==null&&(ll(e,1,t),At(e,t));break}}e=e.return}}function DC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(tt&n)===n&&(We===4||We===3&&(tt&130023424)===tt&&500>Ve()-tm?mi(t,0):em|=n),At(t,e)}function nE(t,e){e===0&&(t.mode&1?(e=Hl,Hl<<=1,!(Hl&130023424)&&(Hl=4194304)):e=1);var n=yt();t=Fn(t,e),t!==null&&(ll(t,e,n),At(t,n))}function MC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nE(t,n)}function VC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),nE(t,n)}var rE;rE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||St.current)Tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tt=!1,IC(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,Ie&&e.flags&1048576&&aw(e,tc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;wu(t,e),t=e.pendingProps;var i=Vs(e,ht.current);As(e,n),i=Kp(null,e,r,t,i,n);var s=Qp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ct(r)?(s=!0,Zu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$p(e),i.updater=Kc,e.stateNode=i,i._reactInternals=e,pf(e,r,t,n),e=yf(null,e,r,!0,s,n)):(e.tag=0,Ie&&s&&jp(e),mt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(wu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=OC(r),t=Zt(r,t),i){case 0:e=gf(null,e,r,t,n);break e;case 1:e=uv(null,e,r,t,n);break e;case 11:e=av(null,e,r,t,n);break e;case 14:e=lv(null,e,r,Zt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),gf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),uv(t,e,r,i,n);case 3:e:{if(zw(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,fw(t,e),ic(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ls(Error(U(423)),e),e=cv(t,e,r,n,i);break e}else if(r!==i){i=Ls(Error(U(424)),e),e=cv(t,e,r,n,i);break e}else for(Pt=Tr(e.stateNode.containerInfo.firstChild),Mt=e,Ie=!0,nn=null,n=dw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(js(),r===i){e=Ln(t,e,n);break e}mt(t,e,r,n)}e=e.child}return e;case 5:return pw(e),t===null&&df(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,of(r,i)?o=null:s!==null&&of(r,s)&&(e.flags|=32),Lw(t,e),mt(t,e,o,n),e.child;case 6:return t===null&&df(e),null;case 13:return Bw(t,e,n);case 4:return Wp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Os(e,null,r,n):mt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),av(t,e,r,i,n);case 7:return mt(t,e,e.pendingProps,n),e.child;case 8:return mt(t,e,e.pendingProps.children,n),e.child;case 12:return mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ye(nc,r._currentValue),r._currentValue=o,s!==null)if(an(s.value,o)){if(s.children===i.children&&!St.current){e=Ln(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Dn(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),hf(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),hf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}mt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,As(e,n),i=Qt(i),r=r(i),e.flags|=1,mt(t,e,r,n),e.child;case 14:return r=e.type,i=Zt(r,e.pendingProps),i=Zt(r.type,i),lv(t,e,r,i,n);case 15:return Ow(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),wu(t,e),e.tag=1,Ct(r)?(t=!0,Zu(e)):t=!1,As(e,n),Mw(e,r,i),pf(e,r,i,n),yf(null,e,r,!0,t,n);case 19:return Uw(t,e,n);case 22:return Fw(t,e,n)}throw Error(U(156,e.tag))};function iE(t,e){return P1(t,e)}function jC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new jC(t,e,n,r)}function sm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OC(t){if(typeof t=="function")return sm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tp)return 11;if(t===Sp)return 14}return 2}function Rr(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")sm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ds:return gi(n.children,i,s,e);case xp:o=8,i|=8;break;case Oh:return t=Wt(12,n,e,i|2),t.elementType=Oh,t.lanes=s,t;case Fh:return t=Wt(13,n,e,i),t.elementType=Fh,t.lanes=s,t;case Lh:return t=Wt(19,n,e,i),t.elementType=Lh,t.lanes=s,t;case p1:return Jc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case h1:o=10;break e;case f1:o=9;break e;case Tp:o=11;break e;case Sp:o=14;break e;case ar:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Wt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function gi(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function Jc(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=p1,t.lanes=n,t.stateNode={isHidden:!1},t}function yh(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function vh(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xd(0),this.expirationTimes=Xd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function om(t,e,n,r,i,s,o,a,u){return t=new FC(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$p(s),t}function LC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function sE(t){if(!t)return Or;t=t._reactInternals;e:{if(Ui(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ct(n))return sw(t,n,e)}return e}function oE(t,e,n,r,i,s,o,a,u){return t=om(n,r,!0,t,i,s,o,a,u),t.context=sE(null),n=t.current,r=yt(),i=Ar(n),s=Dn(r,i),s.callback=e??null,Sr(n,s,i),t.current.lanes=i,ll(t,i,r),At(t,r),t}function Xc(t,e,n,r){var i=e.current,s=yt(),o=Ar(i);return n=sE(n),e.context===null?e.context=n:e.pendingContext=n,e=Dn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Sr(i,e,o),t!==null&&(on(t,i,o,s),yu(t,i,o)),o}function hc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function am(t,e){wv(t,e),(t=t.alternate)&&wv(t,e)}function zC(){return null}var aE=typeof reportError=="function"?reportError:function(t){console.error(t)};function lm(t){this._internalRoot=t}Zc.prototype.render=lm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Xc(t,e,null,null)};Zc.prototype.unmount=lm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ci(function(){Xc(null,t,null,null)}),e[On]=null}};function Zc(t){this._internalRoot=t}Zc.prototype.unstable_scheduleHydration=function(t){if(t){var e=F1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cr.length&&e!==0&&e<cr[n].priority;n++);cr.splice(n,0,t),n===0&&z1(t)}};function um(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ed(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ev(){}function BC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=hc(o);s.call(d)}}var o=oE(e,r,t,0,null,!1,!1,"",Ev);return t._reactRootContainer=o,t[On]=o.current,Pa(t.nodeType===8?t.parentNode:t),Ci(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var d=hc(u);a.call(d)}}var u=om(t,0,!1,null,null,!1,!1,"",Ev);return t._reactRootContainer=u,t[On]=u.current,Pa(t.nodeType===8?t.parentNode:t),Ci(function(){Xc(e,u,n,r)}),u}function td(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=hc(o);a.call(u)}}Xc(e,o,t,i)}else o=BC(n,e,t,i,r);return hc(o)}j1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qo(e.pendingLanes);n!==0&&(Rp(e,n|1),At(e,Ve()),!(ce&6)&&(zs=Ve()+500,Wr()))}break;case 13:Ci(function(){var r=Fn(t,1);if(r!==null){var i=yt();on(r,t,1,i)}}),am(t,1)}};kp=function(t){if(t.tag===13){var e=Fn(t,134217728);if(e!==null){var n=yt();on(e,t,134217728,n)}am(t,134217728)}};O1=function(t){if(t.tag===13){var e=Ar(t),n=Fn(t,e);if(n!==null){var r=yt();on(n,t,e,r)}am(t,e)}};F1=function(){return he};L1=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};Qh=function(t,e,n){switch(e){case"input":if(Uh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Hc(r);if(!i)throw Error(U(90));g1(r),Uh(r,i)}}}break;case"textarea":v1(t,n);break;case"select":e=n.value,e!=null&&xs(t,!!n.multiple,e,!1)}};S1=nm;C1=Ci;var UC={usingClientEntryPoint:!1,Events:[cl,ms,Hc,x1,T1,nm]},Lo={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$C={bundleType:Lo.bundleType,version:Lo.version,rendererPackageName:Lo.rendererPackageName,rendererConfig:Lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=k1(t),t===null?null:t.stateNode},findFiberByHostInstance:Lo.findFiberByHostInstance||zC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{Bc=nu.inject($C),_n=nu}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UC;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!um(e))throw Error(U(200));return LC(t,e,null,n)};Ft.createRoot=function(t,e){if(!um(t))throw Error(U(299));var n=!1,r="",i=aE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=om(t,1,!1,null,null,n,!1,r,i),t[On]=e.current,Pa(t.nodeType===8?t.parentNode:t),new lm(e)};Ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=k1(e),t=t===null?null:t.stateNode,t};Ft.flushSync=function(t){return Ci(t)};Ft.hydrate=function(t,e,n){if(!ed(e))throw Error(U(200));return td(null,t,e,!0,n)};Ft.hydrateRoot=function(t,e,n){if(!um(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=aE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=oE(e,null,t,1,n??null,i,!1,s,o),t[On]=e.current,Pa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zc(e)};Ft.render=function(t,e,n){if(!ed(e))throw Error(U(200));return td(null,t,e,!1,n)};Ft.unmountComponentAtNode=function(t){if(!ed(t))throw Error(U(40));return t._reactRootContainer?(Ci(function(){td(null,null,t,!1,function(){t._reactRootContainer=null,t[On]=null})}),!0):!1};Ft.unstable_batchedUpdates=nm;Ft.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ed(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return td(t,e,n,!1,r)};Ft.version="18.3.1-next-f1338f8080-20240426";function lE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lE)}catch(t){console.error(t)}}lE(),l1.exports=Ft;var WC=l1.exports,Iv=WC;Vh.createRoot=Iv.createRoot,Vh.hydrateRoot=Iv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function za(){return za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},za.apply(this,arguments)}var _r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_r||(_r={}));const xv="popstate";function HC(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return kf("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:fc(i)}return qC(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GC(){return Math.random().toString(36).substr(2,8)}function Tv(t,e){return{usr:t.state,key:t.key,idx:e}}function kf(t,e,n,r){return n===void 0&&(n=null),za({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?so(e):e,{state:n,key:e&&e.key||r||GC()})}function fc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function so(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function qC(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=_r.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(za({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){a=_r.Pop;let T=f(),I=T==null?null:T-d;d=T,u&&u({action:a,location:k.location,delta:I})}function g(T,I){a=_r.Push;let _=kf(k.location,T,I);d=f()+1;let S=Tv(_,d),V=k.createHref(_);try{o.pushState(S,"",V)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(V)}s&&u&&u({action:a,location:k.location,delta:1})}function w(T,I){a=_r.Replace;let _=kf(k.location,T,I);d=f();let S=Tv(_,d),V=k.createHref(_);o.replaceState(S,"",V),s&&u&&u({action:a,location:k.location,delta:0})}function E(T){let I=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof T=="string"?T:fc(T);return _=_.replace(/ $/,"%20"),je(I,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,I)}let k={get action(){return a},get location(){return t(i,o)},listen(T){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(xv,p),u=T,()=>{i.removeEventListener(xv,p),u=null}},createHref(T){return e(i,T)},createURL:E,encodeLocation(T){let I=E(T);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:g,replace:w,go(T){return o.go(T)}};return k}var Sv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Sv||(Sv={}));function KC(t,e,n){return n===void 0&&(n="/"),QC(t,e,n)}function QC(t,e,n,r){let i=typeof e=="string"?so(e):e,s=dm(i.pathname||"/",n);if(s==null)return null;let o=uE(t);YC(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let d=lA(s);a=sA(o[u],d)}return a}function uE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(je(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=kr([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(je(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),uE(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:rA(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of cE(s.path))i(s,o,u)}),e}function cE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=cE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function YC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const JC=/^:[\w-]+$/,XC=3,ZC=2,eA=1,tA=10,nA=-2,Cv=t=>t==="*";function rA(t,e){let n=t.split("/"),r=n.length;return n.some(Cv)&&(r+=nA),e&&(r+=ZC),n.filter(i=>!Cv(i)).reduce((i,s)=>i+(JC.test(s)?XC:s===""?eA:tA),r)}function iA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function sA(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],d=a===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=oA({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:kr([s,p.pathname]),pathnameBase:fA(kr([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=kr([s,p.pathnameBase]))}return o}function oA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:w}=f;if(g==="*"){let k=a[p]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const E=a[p];return w&&!E?d[g]=void 0:d[g]=(E||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function aA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function dm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const uA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cA=t=>uA.test(t);function dA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?so(t):t,s;if(n)if(cA(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),cm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Av(n.substring(1),"/"):s=Av(n,e)}else s=e;return{pathname:s,search:pA(r),hash:mA(i)}}function Av(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function _h(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hm(t,e){let n=hA(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function fm(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=so(t):(i=za({},t),je(!i.pathname||!i.pathname.includes("?"),_h("?","pathname","search",i)),je(!i.pathname||!i.pathname.includes("#"),_h("#","pathname","hash",i)),je(!i.search||!i.search.includes("#"),_h("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}a=p>=0?e[p]:"/"}let u=dA(i,a),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const kr=t=>t.join("/").replace(/\/\/+/g,"/"),fA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dE=["post","put","patch","delete"];new Set(dE);const yA=["get",...dE];new Set(yA);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ba(){return Ba=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ba.apply(this,arguments)}const pm=F.createContext(null),vA=F.createContext(null),Hr=F.createContext(null),nd=F.createContext(null),Hn=F.createContext({outlet:null,matches:[],isDataRoute:!1}),hE=F.createContext(null);function _A(t,e){let{relative:n}=e===void 0?{}:e;oo()||je(!1);let{basename:r,navigator:i}=F.useContext(Hr),{hash:s,pathname:o,search:a}=pE(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:kr([r,o])),i.createHref({pathname:u,search:a,hash:s})}function oo(){return F.useContext(nd)!=null}function ao(){return oo()||je(!1),F.useContext(nd).location}function fE(t){F.useContext(Hr).static||F.useLayoutEffect(t)}function $i(){let{isDataRoute:t}=F.useContext(Hn);return t?DA():wA()}function wA(){oo()||je(!1);let t=F.useContext(pm),{basename:e,future:n,navigator:r}=F.useContext(Hr),{matches:i}=F.useContext(Hn),{pathname:s}=ao(),o=JSON.stringify(hm(i,n.v7_relativeSplatPath)),a=F.useRef(!1);return fE(()=>{a.current=!0}),F.useCallback(function(d,f){if(f===void 0&&(f={}),!a.current)return;if(typeof d=="number"){r.go(d);return}let p=fm(d,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:kr([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,s,t])}function EA(){let{matches:t}=F.useContext(Hn),e=t[t.length-1];return e?e.params:{}}function pE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=F.useContext(Hr),{matches:i}=F.useContext(Hn),{pathname:s}=ao(),o=JSON.stringify(hm(i,r.v7_relativeSplatPath));return F.useMemo(()=>fm(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function IA(t,e){return xA(t,e)}function xA(t,e,n,r){oo()||je(!1);let{navigator:i}=F.useContext(Hr),{matches:s}=F.useContext(Hn),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=ao(),f;if(e){var p;let T=typeof e=="string"?so(e):e;u==="/"||(p=T.pathname)!=null&&p.startsWith(u)||je(!1),f=T}else f=d;let g=f.pathname||"/",w=g;if(u!=="/"){let T=u.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(T.length).join("/")}let E=KC(t,{pathname:w}),k=RA(E&&E.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:kr([u,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?u:kr([u,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,r);return e&&k?F.createElement(nd.Provider,{value:{location:Ba({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:_r.Pop}},k):k}function TA(){let t=NA(),e=gA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:i},n):null,null)}const SA=F.createElement(TA,null);class CA extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(Hn.Provider,{value:this.props.routeContext},F.createElement(hE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AA(t){let{routeContext:e,match:n,children:r}=t,i=F.useContext(pm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(Hn.Provider,{value:e},r)}function RA(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let f=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);f>=0||je(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:w}=n,E=p.route.loader&&g[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||E){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let w,E=!1,k=null,T=null;n&&(w=a&&p.route.id?a[p.route.id]:void 0,k=p.route.errorElement||SA,u&&(d<0&&g===0?(MA("route-fallback"),E=!0,T=null):d===g&&(E=!0,T=p.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,g+1)),_=()=>{let S;return w?S=k:E?S=T:p.route.Component?S=F.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=f,F.createElement(AA,{match:p,routeContext:{outlet:f,matches:I,isDataRoute:n!=null},children:S})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?F.createElement(CA,{location:n.location,revalidation:n.revalidation,component:k,error:w,children:_(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):_()},null)}var mE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mE||{}),gE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gE||{});function kA(t){let e=F.useContext(pm);return e||je(!1),e}function bA(t){let e=F.useContext(vA);return e||je(!1),e}function PA(t){let e=F.useContext(Hn);return e||je(!1),e}function yE(t){let e=PA(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function NA(){var t;let e=F.useContext(hE),n=bA(),r=yE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function DA(){let{router:t}=kA(mE.UseNavigateStable),e=yE(gE.UseNavigateStable),n=F.useRef(!1);return fE(()=>{n.current=!0}),F.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ba({fromRouteId:e},s)))},[t,e])}const Rv={};function MA(t,e,n){Rv[t]||(Rv[t]=!0)}function VA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function hn(t){let{to:e,replace:n,state:r,relative:i}=t;oo()||je(!1);let{future:s,static:o}=F.useContext(Hr),{matches:a}=F.useContext(Hn),{pathname:u}=ao(),d=$i(),f=fm(e,hm(a,s.v7_relativeSplatPath),u,i==="path"),p=JSON.stringify(f);return F.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:i}),[d,p,i,n,r]),null}function Xt(t){je(!1)}function jA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=_r.Pop,navigator:s,static:o=!1,future:a}=t;oo()&&je(!1);let u=e.replace(/^\/*/,"/"),d=F.useMemo(()=>({basename:u,navigator:s,static:o,future:Ba({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=so(r));let{pathname:f="/",search:p="",hash:g="",state:w=null,key:E="default"}=r,k=F.useMemo(()=>{let T=dm(f,u);return T==null?null:{location:{pathname:T,search:p,hash:g,state:w,key:E},navigationType:i}},[u,f,p,g,w,E,i]);return k==null?null:F.createElement(Hr.Provider,{value:d},F.createElement(nd.Provider,{children:n,value:k}))}function OA(t){let{children:e,location:n}=t;return IA(bf(e),n)}new Promise(()=>{});function bf(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(r,i)=>{if(!F.isValidElement(r))return;let s=[...e,i];if(r.type===F.Fragment){n.push.apply(n,bf(r.props.children,s));return}r.type!==Xt&&je(!1),!r.props.index||!r.props.children||je(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=bf(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pf(){return Pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pf.apply(this,arguments)}function FA(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function LA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zA(t,e){return t.button===0&&(!e||e==="_self")&&!LA(t)}const BA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],UA="6";try{window.__reactRouterVersion=UA}catch{}const $A="startTransition",kv=DS[$A];function WA(t){let{basename:e,children:n,future:r,window:i}=t,s=F.useRef();s.current==null&&(s.current=HC({window:i,v5Compat:!0}));let o=s.current,[a,u]=F.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=F.useCallback(p=>{d&&kv?kv(()=>u(p)):u(p)},[u,d]);return F.useLayoutEffect(()=>o.listen(f),[o,f]),F.useEffect(()=>VA(r),[r]),F.createElement(jA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const HA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qA=F.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,g=FA(e,BA),{basename:w}=F.useContext(Hr),E,k=!1;if(typeof d=="string"&&GA.test(d)&&(E=d,HA))try{let S=new URL(window.location.href),V=d.startsWith("//")?new URL(S.protocol+d):new URL(d),j=dm(V.pathname,w);V.origin===S.origin&&j!=null?d=j+V.search+V.hash:k=!0}catch{}let T=_A(d,{relative:i}),I=KA(d,{replace:o,state:a,target:u,preventScrollReset:f,relative:i,viewTransition:p});function _(S){r&&r(S),S.defaultPrevented||I(S)}return F.createElement("a",Pf({},g,{href:E||T,onClick:k||s?r:_,ref:n,target:u}))});var bv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(bv||(bv={}));var Pv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Pv||(Pv={}));function KA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,u=$i(),d=ao(),f=pE(t,{relative:o});return F.useCallback(p=>{if(zA(p,n)){p.preventDefault();let g=r!==void 0?r:fc(d)===fc(f);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[d,u,f,r,i,n,t,s,o,a])}const QA=()=>{};var Nv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},YA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|a>>4;let g=(a&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[f],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||d==null||p==null)throw new JA;const g=s<<2|a>>4;if(r.push(g),d!==64){const w=a<<4&240|d>>2;if(r.push(w),p!==64){const E=d<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XA=function(t){const e=vE(t);return _E.encodeByteArray(e,!0)},pc=function(t){return XA(t).replace(/\./g,"")},wE=function(t){try{return _E.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=()=>EE().__FIREBASE_DEFAULTS__,eR=()=>{if(typeof process>"u"||typeof Nv>"u")return;const t=Nv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wE(t[1]);return e&&JSON.parse(e)},rd=()=>{try{return QA()||ZA()||eR()||tR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IE=t=>{var e,n;return(n=(e=rd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},nR=t=>{const e=IE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},xE=()=>{var t;return(t=rd())==null?void 0:t.config},TE=t=>{var e;return(e=rd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function SE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[pc(JSON.stringify(n)),pc(JSON.stringify(o)),""].join(".")}const da={};function sR(){const t={prod:[],emulator:[]};for(const e of Object.keys(da))da[e]?t.emulator.push(e):t.prod.push(e);return t}function oR(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Dv=!1;function CE(t,e){if(typeof window>"u"||typeof document>"u"||!lo(window.location.host)||da[t]===e||da[t]||Dv)return;da[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=sR().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Dv=!0,o()},g}function f(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=oR(r),w=n("text"),E=document.getElementById(w)||document.createElement("span"),k=n("learnmore"),T=document.getElementById(k)||document.createElement("a"),I=n("preprendIcon"),_=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const S=g.element;a(S),f(T,k);const V=d();u(_,I),S.append(_,E,T,V),document.body.appendChild(S)}s?(E.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function AE(){var e;const t=(e=rd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dR(){const t=He();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RE(){return!AE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kE(){return!AE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function bE(){try{return typeof indexedDB=="object"}catch{return!1}}function hR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="FirebaseError";class Gn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fR,Object.setPrototypeOf(this,Gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hl.prototype.create)}}class hl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?pR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Gn(i,a,r)}}function pR(t,e){return t.replace(mR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const mR=/\{\$([^}]+)}/g;function gR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ai(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Mv(s)&&Mv(o)){if(!Ai(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Mv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Yo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function yR(t,e){const n=new vR(t,e);return n.subscribe.bind(n)}class vR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_R(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=wh),i.error===void 0&&(i.error=wh),i.complete===void 0&&(i.complete=wh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _R(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t){return t&&t._delegate?t._delegate:t}class Ri{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IR(e))try{this.getOrInitializeService({instanceIdentifier:ii})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ii){return this.instances.has(e)}getOptions(e=ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ER(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ii){return this.component?this.component.multipleInstances?e:ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ER(t){return t===ii?void 0:t}function IR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const TR={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},SR=ae.INFO,CR={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},AR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=CR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mm{constructor(e){this.name=e,this._logLevel=SR,this._logHandler=AR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const RR=(t,e)=>e.some(n=>t instanceof n);let Vv,jv;function kR(){return Vv||(Vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bR(){return jv||(jv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PE=new WeakMap,Nf=new WeakMap,NE=new WeakMap,Eh=new WeakMap,gm=new WeakMap;function PR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(br(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&PE.set(n,t)}).catch(()=>{}),gm.set(e,t),e}function NR(t){if(Nf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Nf.set(t,e)}let Df={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||NE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DR(t){Df=t(Df)}function MR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ih(this),e,...n);return NE.set(r,e.sort?e.sort():[e]),br(r)}:bR().includes(t)?function(...e){return t.apply(Ih(this),e),br(PE.get(this))}:function(...e){return br(t.apply(Ih(this),e))}}function VR(t){return typeof t=="function"?MR(t):(t instanceof IDBTransaction&&NR(t),RR(t,kR())?new Proxy(t,Df):t)}function br(t){if(t instanceof IDBRequest)return PR(t);if(Eh.has(t))return Eh.get(t);const e=VR(t);return e!==t&&(Eh.set(t,e),gm.set(e,t)),e}const Ih=t=>gm.get(t);function jR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=br(o);return r&&o.addEventListener("upgradeneeded",u=>{r(br(o.result),u.oldVersion,u.newVersion,br(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const OR=["get","getKey","getAll","getAllKeys","count"],FR=["put","add","delete","clear"],xh=new Map;function Ov(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xh.get(e))return xh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=FR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||OR.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),i&&u.done]))[0]};return xh.set(e,s),s}DR(t=>({...t,get:(e,n,r)=>Ov(e,n)||t.get(e,n,r),has:(e,n)=>!!Ov(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mf="@firebase/app",Fv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new mm("@firebase/app"),BR="@firebase/app-compat",UR="@firebase/analytics-compat",$R="@firebase/analytics",WR="@firebase/app-check-compat",HR="@firebase/app-check",GR="@firebase/auth",qR="@firebase/auth-compat",KR="@firebase/database",QR="@firebase/data-connect",YR="@firebase/database-compat",JR="@firebase/functions",XR="@firebase/functions-compat",ZR="@firebase/installations",ek="@firebase/installations-compat",tk="@firebase/messaging",nk="@firebase/messaging-compat",rk="@firebase/performance",ik="@firebase/performance-compat",sk="@firebase/remote-config",ok="@firebase/remote-config-compat",ak="@firebase/storage",lk="@firebase/storage-compat",uk="@firebase/firestore",ck="@firebase/ai",dk="@firebase/firestore-compat",hk="firebase",fk="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="[DEFAULT]",pk={[Mf]:"fire-core",[BR]:"fire-core-compat",[$R]:"fire-analytics",[UR]:"fire-analytics-compat",[HR]:"fire-app-check",[WR]:"fire-app-check-compat",[GR]:"fire-auth",[qR]:"fire-auth-compat",[KR]:"fire-rtdb",[QR]:"fire-data-connect",[YR]:"fire-rtdb-compat",[JR]:"fire-fn",[XR]:"fire-fn-compat",[ZR]:"fire-iid",[ek]:"fire-iid-compat",[tk]:"fire-fcm",[nk]:"fire-fcm-compat",[rk]:"fire-perf",[ik]:"fire-perf-compat",[sk]:"fire-rc",[ok]:"fire-rc-compat",[ak]:"fire-gcs",[lk]:"fire-gcs-compat",[uk]:"fire-fst",[dk]:"fire-fst-compat",[ck]:"fire-vertex","fire-js":"fire-js",[hk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Map,mk=new Map,jf=new Map;function Lv(t,e){try{t.container.addComponent(e)}catch(n){zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bs(t){const e=t.name;if(jf.has(e))return zn.debug(`There were multiple attempts to register component ${e}.`),!1;jf.set(e,t);for(const n of mc.values())Lv(n,t);for(const n of mk.values())Lv(n,t);return!0}function ym(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ut(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pr=new hl("app","Firebase",gk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=fk;function DE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Vf,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Pr.create("bad-app-name",{appName:String(i)});if(n||(n=xE()),!n)throw Pr.create("no-options");const s=mc.get(i);if(s){if(Ai(n,s.options)&&Ai(r,s.config))return s;throw Pr.create("duplicate-app",{appName:i})}const o=new xR(i);for(const u of jf.values())o.addComponent(u);const a=new yk(n,r,o);return mc.set(i,a),a}function ME(t=Vf){const e=mc.get(t);if(!e&&t===Vf&&xE())return DE();if(!e)throw Pr.create("no-app",{appName:t});return e}function Nr(t,e,n){let r=pk[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zn.warn(o.join(" "));return}Bs(new Ri(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="firebase-heartbeat-database",_k=1,Ua="firebase-heartbeat-store";let Th=null;function VE(){return Th||(Th=jR(vk,_k,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ua)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pr.create("idb-open",{originalErrorMessage:t.message})})),Th}async function wk(t){try{const n=(await VE()).transaction(Ua),r=await n.objectStore(Ua).get(jE(t));return await n.done,r}catch(e){if(e instanceof Gn)zn.warn(e.message);else{const n=Pr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zn.warn(n.message)}}}async function zv(t,e){try{const r=(await VE()).transaction(Ua,"readwrite");await r.objectStore(Ua).put(e,jE(t)),await r.done}catch(n){if(n instanceof Gn)zn.warn(n.message);else{const r=Pr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zn.warn(r.message)}}}function jE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=1024,Ik=30;class xk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Sk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Bv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Ik){const o=Ck(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Bv(),{heartbeatsToSend:r,unsentEntries:i}=Tk(this._heartbeatsCache.heartbeats),s=pc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return zn.warn(n),""}}}function Bv(){return new Date().toISOString().substring(0,10)}function Tk(t,e=Ek){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Uv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Uv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Sk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bE()?hR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Uv(t){return pc(JSON.stringify({version:2,heartbeats:t})).length}function Ck(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t){Bs(new Ri("platform-logger",e=>new LR(e),"PRIVATE")),Bs(new Ri("heartbeat",e=>new xk(e),"PRIVATE")),Nr(Mf,Fv,t),Nr(Mf,Fv,"esm2020"),Nr("fire-js","")}Ak("");var Rk="firebase",kk="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr(Rk,kk,"app");var $v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dr,OE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,v){function C(){}C.prototype=v.prototype,x.F=v.prototype,x.prototype=new C,x.prototype.constructor=x,x.D=function(R,b,N){for(var A=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)A[Be-2]=arguments[Be];return v.prototype[b].apply(R,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,v,C){C||(C=0);const R=Array(16);if(typeof v=="string")for(var b=0;b<16;++b)R[b]=v.charCodeAt(C++)|v.charCodeAt(C++)<<8|v.charCodeAt(C++)<<16|v.charCodeAt(C++)<<24;else for(b=0;b<16;++b)R[b]=v[C++]|v[C++]<<8|v[C++]<<16|v[C++]<<24;v=x.g[0],C=x.g[1],b=x.g[2];let N=x.g[3],A;A=v+(N^C&(b^N))+R[0]+3614090360&4294967295,v=C+(A<<7&4294967295|A>>>25),A=N+(b^v&(C^b))+R[1]+3905402710&4294967295,N=v+(A<<12&4294967295|A>>>20),A=b+(C^N&(v^C))+R[2]+606105819&4294967295,b=N+(A<<17&4294967295|A>>>15),A=C+(v^b&(N^v))+R[3]+3250441966&4294967295,C=b+(A<<22&4294967295|A>>>10),A=v+(N^C&(b^N))+R[4]+4118548399&4294967295,v=C+(A<<7&4294967295|A>>>25),A=N+(b^v&(C^b))+R[5]+1200080426&4294967295,N=v+(A<<12&4294967295|A>>>20),A=b+(C^N&(v^C))+R[6]+2821735955&4294967295,b=N+(A<<17&4294967295|A>>>15),A=C+(v^b&(N^v))+R[7]+4249261313&4294967295,C=b+(A<<22&4294967295|A>>>10),A=v+(N^C&(b^N))+R[8]+1770035416&4294967295,v=C+(A<<7&4294967295|A>>>25),A=N+(b^v&(C^b))+R[9]+2336552879&4294967295,N=v+(A<<12&4294967295|A>>>20),A=b+(C^N&(v^C))+R[10]+4294925233&4294967295,b=N+(A<<17&4294967295|A>>>15),A=C+(v^b&(N^v))+R[11]+2304563134&4294967295,C=b+(A<<22&4294967295|A>>>10),A=v+(N^C&(b^N))+R[12]+1804603682&4294967295,v=C+(A<<7&4294967295|A>>>25),A=N+(b^v&(C^b))+R[13]+4254626195&4294967295,N=v+(A<<12&4294967295|A>>>20),A=b+(C^N&(v^C))+R[14]+2792965006&4294967295,b=N+(A<<17&4294967295|A>>>15),A=C+(v^b&(N^v))+R[15]+1236535329&4294967295,C=b+(A<<22&4294967295|A>>>10),A=v+(b^N&(C^b))+R[1]+4129170786&4294967295,v=C+(A<<5&4294967295|A>>>27),A=N+(C^b&(v^C))+R[6]+3225465664&4294967295,N=v+(A<<9&4294967295|A>>>23),A=b+(v^C&(N^v))+R[11]+643717713&4294967295,b=N+(A<<14&4294967295|A>>>18),A=C+(N^v&(b^N))+R[0]+3921069994&4294967295,C=b+(A<<20&4294967295|A>>>12),A=v+(b^N&(C^b))+R[5]+3593408605&4294967295,v=C+(A<<5&4294967295|A>>>27),A=N+(C^b&(v^C))+R[10]+38016083&4294967295,N=v+(A<<9&4294967295|A>>>23),A=b+(v^C&(N^v))+R[15]+3634488961&4294967295,b=N+(A<<14&4294967295|A>>>18),A=C+(N^v&(b^N))+R[4]+3889429448&4294967295,C=b+(A<<20&4294967295|A>>>12),A=v+(b^N&(C^b))+R[9]+568446438&4294967295,v=C+(A<<5&4294967295|A>>>27),A=N+(C^b&(v^C))+R[14]+3275163606&4294967295,N=v+(A<<9&4294967295|A>>>23),A=b+(v^C&(N^v))+R[3]+4107603335&4294967295,b=N+(A<<14&4294967295|A>>>18),A=C+(N^v&(b^N))+R[8]+1163531501&4294967295,C=b+(A<<20&4294967295|A>>>12),A=v+(b^N&(C^b))+R[13]+2850285829&4294967295,v=C+(A<<5&4294967295|A>>>27),A=N+(C^b&(v^C))+R[2]+4243563512&4294967295,N=v+(A<<9&4294967295|A>>>23),A=b+(v^C&(N^v))+R[7]+1735328473&4294967295,b=N+(A<<14&4294967295|A>>>18),A=C+(N^v&(b^N))+R[12]+2368359562&4294967295,C=b+(A<<20&4294967295|A>>>12),A=v+(C^b^N)+R[5]+4294588738&4294967295,v=C+(A<<4&4294967295|A>>>28),A=N+(v^C^b)+R[8]+2272392833&4294967295,N=v+(A<<11&4294967295|A>>>21),A=b+(N^v^C)+R[11]+1839030562&4294967295,b=N+(A<<16&4294967295|A>>>16),A=C+(b^N^v)+R[14]+4259657740&4294967295,C=b+(A<<23&4294967295|A>>>9),A=v+(C^b^N)+R[1]+2763975236&4294967295,v=C+(A<<4&4294967295|A>>>28),A=N+(v^C^b)+R[4]+1272893353&4294967295,N=v+(A<<11&4294967295|A>>>21),A=b+(N^v^C)+R[7]+4139469664&4294967295,b=N+(A<<16&4294967295|A>>>16),A=C+(b^N^v)+R[10]+3200236656&4294967295,C=b+(A<<23&4294967295|A>>>9),A=v+(C^b^N)+R[13]+681279174&4294967295,v=C+(A<<4&4294967295|A>>>28),A=N+(v^C^b)+R[0]+3936430074&4294967295,N=v+(A<<11&4294967295|A>>>21),A=b+(N^v^C)+R[3]+3572445317&4294967295,b=N+(A<<16&4294967295|A>>>16),A=C+(b^N^v)+R[6]+76029189&4294967295,C=b+(A<<23&4294967295|A>>>9),A=v+(C^b^N)+R[9]+3654602809&4294967295,v=C+(A<<4&4294967295|A>>>28),A=N+(v^C^b)+R[12]+3873151461&4294967295,N=v+(A<<11&4294967295|A>>>21),A=b+(N^v^C)+R[15]+530742520&4294967295,b=N+(A<<16&4294967295|A>>>16),A=C+(b^N^v)+R[2]+3299628645&4294967295,C=b+(A<<23&4294967295|A>>>9),A=v+(b^(C|~N))+R[0]+4096336452&4294967295,v=C+(A<<6&4294967295|A>>>26),A=N+(C^(v|~b))+R[7]+1126891415&4294967295,N=v+(A<<10&4294967295|A>>>22),A=b+(v^(N|~C))+R[14]+2878612391&4294967295,b=N+(A<<15&4294967295|A>>>17),A=C+(N^(b|~v))+R[5]+4237533241&4294967295,C=b+(A<<21&4294967295|A>>>11),A=v+(b^(C|~N))+R[12]+1700485571&4294967295,v=C+(A<<6&4294967295|A>>>26),A=N+(C^(v|~b))+R[3]+2399980690&4294967295,N=v+(A<<10&4294967295|A>>>22),A=b+(v^(N|~C))+R[10]+4293915773&4294967295,b=N+(A<<15&4294967295|A>>>17),A=C+(N^(b|~v))+R[1]+2240044497&4294967295,C=b+(A<<21&4294967295|A>>>11),A=v+(b^(C|~N))+R[8]+1873313359&4294967295,v=C+(A<<6&4294967295|A>>>26),A=N+(C^(v|~b))+R[15]+4264355552&4294967295,N=v+(A<<10&4294967295|A>>>22),A=b+(v^(N|~C))+R[6]+2734768916&4294967295,b=N+(A<<15&4294967295|A>>>17),A=C+(N^(b|~v))+R[13]+1309151649&4294967295,C=b+(A<<21&4294967295|A>>>11),A=v+(b^(C|~N))+R[4]+4149444226&4294967295,v=C+(A<<6&4294967295|A>>>26),A=N+(C^(v|~b))+R[11]+3174756917&4294967295,N=v+(A<<10&4294967295|A>>>22),A=b+(v^(N|~C))+R[2]+718787259&4294967295,b=N+(A<<15&4294967295|A>>>17),A=C+(N^(b|~v))+R[9]+3951481745&4294967295,x.g[0]=x.g[0]+v&4294967295,x.g[1]=x.g[1]+(b+(A<<21&4294967295|A>>>11))&4294967295,x.g[2]=x.g[2]+b&4294967295,x.g[3]=x.g[3]+N&4294967295}r.prototype.v=function(x,v){v===void 0&&(v=x.length);const C=v-this.blockSize,R=this.C;let b=this.h,N=0;for(;N<v;){if(b==0)for(;N<=C;)i(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<v;)if(R[b++]=x.charCodeAt(N++),b==this.blockSize){i(this,R),b=0;break}}else for(;N<v;)if(R[b++]=x[N++],b==this.blockSize){i(this,R),b=0;break}}this.h=b,this.o+=v},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var v=1;v<x.length-8;++v)x[v]=0;v=this.o*8;for(var C=x.length-8;C<x.length;++C)x[C]=v&255,v/=256;for(this.v(x),x=Array(16),v=0,C=0;C<4;++C)for(let R=0;R<32;R+=8)x[v++]=this.g[C]>>>R&255;return x};function s(x,v){var C=a;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=v(x)}function o(x,v){this.h=v;const C=[];let R=!0;for(let b=x.length-1;b>=0;b--){const N=x[b]|0;R&&N==v||(C[b]=N,R=!1)}this.g=C}var a={};function u(x){return-128<=x&&x<128?s(x,function(v){return new o([v|0],v<0?-1:0)}):new o([x|0],x<0?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return p;if(x<0)return T(d(-x));const v=[];let C=1;for(let R=0;x>=C;R++)v[R]=x/C|0,C*=4294967296;return new o(v,0)}function f(x,v){if(x.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(x.charAt(0)=="-")return T(f(x.substring(1),v));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=d(Math.pow(v,8));let R=p;for(let N=0;N<x.length;N+=8){var b=Math.min(8,x.length-N);const A=parseInt(x.substring(N,N+b),v);b<8?(b=d(Math.pow(v,b)),R=R.j(b).add(d(A))):(R=R.j(C),R=R.add(d(A)))}return R}var p=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-T(this).m();let x=0,v=1;for(let C=0;C<this.g.length;C++){const R=this.i(C);x+=(R>=0?R:4294967296+R)*v,v*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(E(this))return"0";if(k(this))return"-"+T(this).toString(x);const v=d(Math.pow(x,6));var C=this;let R="";for(;;){const b=V(C,v).g;C=I(C,b.j(v));let N=((C.g.length>0?C.g[0]:C.h)>>>0).toString(x);if(C=b,E(C))return N+R;for(;N.length<6;)N="0"+N;R=N+R}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function E(x){if(x.h!=0)return!1;for(let v=0;v<x.g.length;v++)if(x.g[v]!=0)return!1;return!0}function k(x){return x.h==-1}t.l=function(x){return x=I(this,x),k(x)?-1:E(x)?0:1};function T(x){const v=x.g.length,C=[];for(let R=0;R<v;R++)C[R]=~x.g[R];return new o(C,~x.h).add(g)}t.abs=function(){return k(this)?T(this):this},t.add=function(x){const v=Math.max(this.g.length,x.g.length),C=[];let R=0;for(let b=0;b<=v;b++){let N=R+(this.i(b)&65535)+(x.i(b)&65535),A=(N>>>16)+(this.i(b)>>>16)+(x.i(b)>>>16);R=A>>>16,N&=65535,A&=65535,C[b]=A<<16|N}return new o(C,C[C.length-1]&-2147483648?-1:0)};function I(x,v){return x.add(T(v))}t.j=function(x){if(E(this)||E(x))return p;if(k(this))return k(x)?T(this).j(T(x)):T(T(this).j(x));if(k(x))return T(this.j(T(x)));if(this.l(w)<0&&x.l(w)<0)return d(this.m()*x.m());const v=this.g.length+x.g.length,C=[];for(var R=0;R<2*v;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(let b=0;b<x.g.length;b++){const N=this.i(R)>>>16,A=this.i(R)&65535,Be=x.i(b)>>>16,Et=x.i(b)&65535;C[2*R+2*b]+=A*Et,_(C,2*R+2*b),C[2*R+2*b+1]+=N*Et,_(C,2*R+2*b+1),C[2*R+2*b+1]+=A*Be,_(C,2*R+2*b+1),C[2*R+2*b+2]+=N*Be,_(C,2*R+2*b+2)}for(x=0;x<v;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=v;x<2*v;x++)C[x]=0;return new o(C,0)};function _(x,v){for(;(x[v]&65535)!=x[v];)x[v+1]+=x[v]>>>16,x[v]&=65535,v++}function S(x,v){this.g=x,this.h=v}function V(x,v){if(E(v))throw Error("division by zero");if(E(x))return new S(p,p);if(k(x))return v=V(T(x),v),new S(T(v.g),T(v.h));if(k(v))return v=V(x,T(v)),new S(T(v.g),v.h);if(x.g.length>30){if(k(x)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var C=g,R=v;R.l(x)<=0;)C=j(C),R=j(R);var b=z(C,1),N=z(R,1);for(R=z(R,2),C=z(C,2);!E(R);){var A=N.add(R);A.l(x)<=0&&(b=b.add(C),N=A),R=z(R,1),C=z(C,1)}return v=I(x,b.j(v)),new S(b,v)}for(b=p;x.l(v)>=0;){for(C=Math.max(1,Math.floor(x.m()/v.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),N=d(C),A=N.j(v);k(A)||A.l(x)>0;)C-=R,N=d(C),A=N.j(v);E(N)&&(N=g),b=b.add(N),x=I(x,A)}return new S(b,x)}t.B=function(x){return V(this,x).h},t.and=function(x){const v=Math.max(this.g.length,x.g.length),C=[];for(let R=0;R<v;R++)C[R]=this.i(R)&x.i(R);return new o(C,this.h&x.h)},t.or=function(x){const v=Math.max(this.g.length,x.g.length),C=[];for(let R=0;R<v;R++)C[R]=this.i(R)|x.i(R);return new o(C,this.h|x.h)},t.xor=function(x){const v=Math.max(this.g.length,x.g.length),C=[];for(let R=0;R<v;R++)C[R]=this.i(R)^x.i(R);return new o(C,this.h^x.h)};function j(x){const v=x.g.length+1,C=[];for(let R=0;R<v;R++)C[R]=x.i(R)<<1|x.i(R-1)>>>31;return new o(C,x.h)}function z(x,v){const C=v>>5;v%=32;const R=x.g.length-C,b=[];for(let N=0;N<R;N++)b[N]=v>0?x.i(N+C)>>>v|x.i(N+C+1)<<32-v:x.i(N+C);return new o(b,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,OE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Dr=o}).apply(typeof $v<"u"?$v:typeof self<"u"?self:typeof window<"u"?window:{});var ru=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FE,Jo,LE,Tu,Of,zE,BE,UE;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ru=="object"&&ru];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(l,h){if(h)e:{var m=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var D=l[y];if(!(D in m))break e;m=m[D]}l=l[l.length-1],y=m[l],h=h(y),h!=y&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(h){var m=[],y;for(y in h)Object.prototype.hasOwnProperty.call(h,y)&&m.push([y,h[y]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,m){return l.call.apply(l.bind,arguments)}function d(l,h,m){return d=u,d.apply(null,arguments)}function f(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function p(l,h){function m(){}m.prototype=h.prototype,l.Z=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Ob=function(y,D,M){for(var $=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)$[ie-2]=arguments[ie];return h.prototype[D].apply(y,$)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function w(l){const h=l.length;if(h>0){const m=Array(h);for(let y=0;y<h;y++)m[y]=l[y];return m}return[]}function E(l,h){for(let y=1;y<arguments.length;y++){const D=arguments[y];var m=typeof D;if(m=m!="object"?m:D?Array.isArray(D)?"array":m:"null",m=="array"||m=="object"&&typeof D.length=="number"){m=l.length||0;const M=D.length||0;l.length=m+M;for(let $=0;$<M;$++)l[m+$]=D[$]}else l.push(D)}}class k{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function T(l){o.setTimeout(()=>{throw l},0)}function I(){var l=x;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class _{constructor(){this.h=this.g=null}add(h,m){const y=S.get();y.set(h,m),this.h?this.h.next=y:this.g=y,this.h=y}}var S=new k(()=>new V,l=>l.reset());class V{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let j,z=!1,x=new _,v=()=>{const l=Promise.resolve(void 0);j=()=>{l.then(C)}};function C(){for(var l;l=I();){try{l.h.call(l.g)}catch(m){T(m)}var h=S;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}z=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};o.addEventListener("test",m,h),o.removeEventListener("test",m,h)}catch{}return l}();function A(l){return/^[\s\xa0]*$/.test(l)}function Be(l,h){b.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}p(Be,b),Be.prototype.init=function(l,h){const m=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&Be.Z.h.call(this)},Be.prototype.h=function(){Be.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Et="closure_listenable_"+(Math.random()*1e6|0),Kn=0;function Qn(l,h,m,y,D){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!y,this.ha=D,this.key=++Kn,this.da=this.fa=!1}function H(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function O(l,h,m){for(const y in l)h.call(m,l[y],y,l)}function q(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function ee(l){const h={};for(const m in l)h[m]=l[m];return h}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(l,h){let m,y;for(let D=1;D<arguments.length;D++){y=arguments[D];for(m in y)l[m]=y[m];for(let M=0;M<re.length;M++)m=re[M],Object.prototype.hasOwnProperty.call(y,m)&&(l[m]=y[m])}}function ke(l){this.src=l,this.g={},this.h=0}ke.prototype.add=function(l,h,m,y,D){const M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);const $=be(l,h,y,D);return $>-1?(h=l[$],m||(h.fa=!1)):(h=new Qn(h,this.src,M,!!y,D),h.fa=m,l.push(h)),h};function Me(l,h){const m=h.type;if(m in l.g){var y=l.g[m],D=Array.prototype.indexOf.call(y,h,void 0),M;(M=D>=0)&&Array.prototype.splice.call(y,D,1),M&&(H(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function be(l,h,m,y){for(let D=0;D<l.length;++D){const M=l[D];if(!M.da&&M.listener==h&&M.capture==!!m&&M.ha==y)return D}return-1}var rt="closure_lm_"+(Math.random()*1e6|0),mo={};function Al(l,h,m,y,D){if(Array.isArray(h)){for(let M=0;M<h.length;M++)Al(l,h[M],m,y,D);return null}return m=_g(m),l&&l[Et]?l.J(h,m,a(y)?!!y.capture:!1,D):BT(l,h,m,!1,y,D)}function BT(l,h,m,y,D,M){if(!h)throw Error("Invalid event type");const $=a(D)?!!D.capture:!!D;let ie=Rd(l);if(ie||(l[rt]=ie=new ke(l)),m=ie.add(h,m,y,$,M),m.proxy)return m;if(y=UT(),m.proxy=y,y.src=l,y.listener=m,l.addEventListener)N||(D=$),D===void 0&&(D=!1),l.addEventListener(h.toString(),y,D);else if(l.attachEvent)l.attachEvent(vg(h.toString()),y);else if(l.addListener&&l.removeListener)l.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function UT(){function l(m){return h.call(l.src,l.listener,m)}const h=$T;return l}function yg(l,h,m,y,D){if(Array.isArray(h))for(var M=0;M<h.length;M++)yg(l,h[M],m,y,D);else y=a(y)?!!y.capture:!!y,m=_g(m),l&&l[Et]?(l=l.i,M=String(h).toString(),M in l.g&&(h=l.g[M],m=be(h,m,y,D),m>-1&&(H(h[m]),Array.prototype.splice.call(h,m,1),h.length==0&&(delete l.g[M],l.h--)))):l&&(l=Rd(l))&&(h=l.g[h.toString()],l=-1,h&&(l=be(h,m,y,D)),(m=l>-1?h[l]:null)&&Ad(m))}function Ad(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Et])Me(h.i,l);else{var m=l.type,y=l.proxy;h.removeEventListener?h.removeEventListener(m,y,l.capture):h.detachEvent?h.detachEvent(vg(m),y):h.addListener&&h.removeListener&&h.removeListener(y),(m=Rd(h))?(Me(m,l),m.h==0&&(m.src=null,h[rt]=null)):H(l)}}}function vg(l){return l in mo?mo[l]:mo[l]="on"+l}function $T(l,h){if(l.da)l=!0;else{h=new Be(h,this);const m=l.listener,y=l.ha||l.src;l.fa&&Ad(l),l=m.call(y,h)}return l}function Rd(l){return l=l[rt],l instanceof ke?l:null}var kd="__closure_events_fn_"+(Math.random()*1e9>>>0);function _g(l){return typeof l=="function"?l:(l[kd]||(l[kd]=function(h){return l.handleEvent(h)}),l[kd])}function it(){R.call(this),this.i=new ke(this),this.M=this,this.G=null}p(it,R),it.prototype[Et]=!0,it.prototype.removeEventListener=function(l,h,m,y){yg(this,l,h,m,y)};function ft(l,h){var m,y=l.G;if(y)for(m=[];y;y=y.G)m.push(y);if(l=l.M,y=h.type||h,typeof h=="string")h=new b(h,l);else if(h instanceof b)h.target=h.target||l;else{var D=h;h=new b(y,l),Te(h,D)}D=!0;let M,$;if(m)for($=m.length-1;$>=0;$--)M=h.g=m[$],D=Rl(M,y,!0,h)&&D;if(M=h.g=l,D=Rl(M,y,!0,h)&&D,D=Rl(M,y,!1,h)&&D,m)for($=0;$<m.length;$++)M=h.g=m[$],D=Rl(M,y,!1,h)&&D}it.prototype.N=function(){if(it.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const m=l.g[h];for(let y=0;y<m.length;y++)H(m[y]);delete l.g[h],l.h--}}this.G=null},it.prototype.J=function(l,h,m,y){return this.i.add(String(l),h,!1,m,y)},it.prototype.K=function(l,h,m,y){return this.i.add(String(l),h,!0,m,y)};function Rl(l,h,m,y){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let D=!0;for(let M=0;M<h.length;++M){const $=h[M];if($&&!$.da&&$.capture==m){const ie=$.listener,Ue=$.ha||$.src;$.fa&&Me(l.i,$),D=ie.call(Ue,y)!==!1&&D}}return D&&!y.defaultPrevented}function WT(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function wg(l){l.g=WT(()=>{l.g=null,l.i&&(l.i=!1,wg(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class HT extends R{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:wg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function go(l){R.call(this),this.h=l,this.g={}}p(go,R);var Eg=[];function Ig(l){O(l.g,function(h,m){this.g.hasOwnProperty(m)&&Ad(h)},l),l.g={}}go.prototype.N=function(){go.Z.N.call(this),Ig(this)},go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bd=o.JSON.stringify,GT=o.JSON.parse,qT=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function xg(){}function Tg(){}var yo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pd(){b.call(this,"d")}p(Pd,b);function Nd(){b.call(this,"c")}p(Nd,b);var Yr={},Sg=null;function kl(){return Sg=Sg||new it}Yr.Ia="serverreachability";function Cg(l){b.call(this,Yr.Ia,l)}p(Cg,b);function vo(l){const h=kl();ft(h,new Cg(h))}Yr.STAT_EVENT="statevent";function Ag(l,h){b.call(this,Yr.STAT_EVENT,l),this.stat=h}p(Ag,b);function pt(l){const h=kl();ft(h,new Ag(h,l))}Yr.Ja="timingevent";function Rg(l,h){b.call(this,Yr.Ja,l),this.size=h}p(Rg,b);function _o(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function wo(){this.g=!0}wo.prototype.ua=function(){this.g=!1};function KT(l,h,m,y,D,M){l.info(function(){if(l.g)if(M){var $="",ie=M.split("&");for(let ge=0;ge<ie.length;ge++){var Ue=ie[ge].split("=");if(Ue.length>1){const qe=Ue[0];Ue=Ue[1];const cn=qe.split("_");$=cn.length>=2&&cn[1]=="type"?$+(qe+"="+Ue+"&"):$+(qe+"=redacted&")}}}else $=null;else $=M;return"XMLHTTP REQ ("+y+") [attempt "+D+"]: "+h+`
`+m+`
`+$})}function QT(l,h,m,y,D,M,$){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+D+"]: "+h+`
`+m+`
`+M+" "+$})}function Ki(l,h,m,y){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+JT(l,m)+(y?" "+y:"")})}function YT(l,h){l.info(function(){return"TIMEOUT: "+h})}wo.prototype.info=function(){};function JT(l,h){if(!l.g)return h;if(!h)return null;try{const M=JSON.parse(h);if(M){for(l=0;l<M.length;l++)if(Array.isArray(M[l])){var m=M[l];if(!(m.length<2)){var y=m[1];if(Array.isArray(y)&&!(y.length<1)){var D=y[0];if(D!="noop"&&D!="stop"&&D!="close")for(let $=1;$<y.length;$++)y[$]=""}}}}return bd(M)}catch{return h}}var bl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},kg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bg;function Dd(){}p(Dd,xg),Dd.prototype.g=function(){return new XMLHttpRequest},bg=new Dd;function Eo(l){return encodeURIComponent(String(l))}function XT(l){var h=1;l=l.split(":");const m=[];for(;h>0&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function Yn(l,h,m,y){this.j=l,this.i=h,this.l=m,this.S=y||1,this.V=new go(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pg}function Pg(){this.i=null,this.g="",this.h=!1}var Ng={},Md={};function Vd(l,h,m){l.M=1,l.A=Nl(un(h)),l.u=m,l.R=!0,Dg(l,null)}function Dg(l,h){l.F=Date.now(),Pl(l),l.B=un(l.A);var m=l.B,y=l.S;Array.isArray(y)||(y=[String(y)]),Gg(m.i,"t",y),l.C=0,m=l.j.L,l.h=new Pg,l.g=cy(l.j,m?h:null,!l.u),l.P>0&&(l.O=new HT(d(l.Y,l,l.g),l.P)),h=l.V,m=l.g,y=l.ba;var D="readystatechange";Array.isArray(D)||(D&&(Eg[0]=D.toString()),D=Eg);for(let M=0;M<D.length;M++){const $=Al(m,D[M],y||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=l.J?ee(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),vo(),KT(l.i,l.v,l.B,l.l,l.S,l.u)}Yn.prototype.ba=function(l){l=l.target;const h=this.O;h&&Zn(l)==3?h.j():this.Y(l)},Yn.prototype.Y=function(l){try{if(l==this.g)e:{const ie=Zn(this.g),Ue=this.g.ya(),ge=this.g.ca();if(!(ie<3)&&(ie!=3||this.g&&(this.h.h||this.g.la()||Zg(this.g)))){this.K||ie!=4||Ue==7||(Ue==8||ge<=0?vo(3):vo(2)),jd(this);var h=this.g.ca();this.X=h;var m=ZT(this);if(this.o=h==200,QT(this.i,this.v,this.B,this.l,this.S,ie,h),this.o){if(this.U&&!this.L){t:{if(this.g){var y,D=this.g;if((y=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(y)){var M=y;break t}}M=null}if(l=M)Ki(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Od(this,l);else{this.o=!1,this.m=3,pt(12),Jr(this),Io(this);break e}}if(this.R){l=!0;let qe;for(;!this.K&&this.C<m.length;)if(qe=eS(this,m),qe==Md){ie==4&&(this.m=4,pt(14),l=!1),Ki(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==Ng){this.m=4,pt(15),Ki(this.i,this.l,m,"[Invalid Chunk]"),l=!1;break}else Ki(this.i,this.l,qe,null),Od(this,qe);if(Mg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||m.length!=0||this.h.h||(this.m=1,pt(16),l=!1),this.o=this.o&&l,!l)Ki(this.i,this.l,m,"[Invalid Chunked Response]"),Jr(this),Io(this);else if(m.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),Hd($),$.P=!0,pt(11))}}else Ki(this.i,this.l,m,null),Od(this,m);ie==4&&Jr(this),this.o&&!this.K&&(ie==4?oy(this.j,this):(this.o=!1,Pl(this)))}else pS(this.g),h==400&&m.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),Jr(this),Io(this)}}}catch{}finally{}};function ZT(l){if(!Mg(l))return l.g.la();const h=Zg(l.g);if(h==="")return"";let m="";const y=h.length,D=Zn(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Jr(l),Io(l),"";l.h.i=new o.TextDecoder}for(let M=0;M<y;M++)l.h.h=!0,m+=l.h.i.decode(h[M],{stream:!(D&&M==y-1)});return h.length=0,l.h.g+=m,l.C=0,l.h.g}function Mg(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function eS(l,h){var m=l.C,y=h.indexOf(`
`,m);return y==-1?Md:(m=Number(h.substring(m,y)),isNaN(m)?Ng:(y+=1,y+m>h.length?Md:(h=h.slice(y,y+m),l.C=y+m,h)))}Yn.prototype.cancel=function(){this.K=!0,Jr(this)};function Pl(l){l.T=Date.now()+l.H,Vg(l,l.H)}function Vg(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=_o(d(l.aa,l),h)}function jd(l){l.D&&(o.clearTimeout(l.D),l.D=null)}Yn.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(YT(this.i,this.B),this.M!=2&&(vo(),pt(17)),Jr(this),this.m=2,Io(this)):Vg(this,this.T-l)};function Io(l){l.j.I==0||l.K||oy(l.j,l)}function Jr(l){jd(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,Ig(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function Od(l,h){try{var m=l.j;if(m.I!=0&&(m.g==l||Fd(m.h,l))){if(!l.L&&Fd(m.h,l)&&m.I==3){try{var y=m.Ba.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var D=y;if(D[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<l.F)Ol(m),Vl(m);else break e;Wd(m),pt(18)}}else m.xa=D[1],0<m.xa-m.K&&D[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=_o(d(m.Va,m),6e3));Fg(m.h)<=1&&m.ta&&(m.ta=void 0)}else Zr(m,11)}else if((l.L||m.g==l)&&Ol(m),!A(h))for(D=m.Ba.g.parse(h),h=0;h<D.length;h++){let ge=D[h];const qe=ge[0];if(!(qe<=m.K))if(m.K=qe,ge=ge[1],m.I==2)if(ge[0]=="c"){m.M=ge[1],m.ba=ge[2];const cn=ge[3];cn!=null&&(m.ka=cn,m.j.info("VER="+m.ka));const ei=ge[4];ei!=null&&(m.za=ei,m.j.info("SVER="+m.za));const er=ge[5];er!=null&&typeof er=="number"&&er>0&&(y=1.5*er,m.O=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const tr=l.g;if(tr){const Ll=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ll){var M=y.h;M.g||Ll.indexOf("spdy")==-1&&Ll.indexOf("quic")==-1&&Ll.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Ld(M,M.h),M.h=null))}if(y.G){const Gd=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;Gd&&(y.wa=Gd,ve(y.J,y.G,Gd))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-l.F,m.j.info("Handshake RTT: "+m.T+"ms")),y=m;var $=l;if(y.na=uy(y,y.L?y.ba:null,y.W),$.L){Lg(y.h,$);var ie=$,Ue=y.O;Ue&&(ie.H=Ue),ie.D&&(jd(ie),Pl(ie)),y.g=$}else iy(y);m.i.length>0&&jl(m)}else ge[0]!="stop"&&ge[0]!="close"||Zr(m,7);else m.I==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?Zr(m,7):$d(m):ge[0]!="noop"&&m.l&&m.l.qa(ge),m.A=0)}}vo(4)}catch{}}var tS=class{constructor(l,h){this.g=l,this.map=h}};function jg(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Og(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Fg(l){return l.h?1:l.g?l.g.size:0}function Fd(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Ld(l,h){l.g?l.g.add(h):l.h=h}function Lg(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}jg.prototype.cancel=function(){if(this.i=zg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function zg(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.G);return h}return w(l.i)}var Bg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nS(l,h){if(l){l=l.split("&");for(let m=0;m<l.length;m++){const y=l[m].indexOf("=");let D,M=null;y>=0?(D=l[m].substring(0,y),M=l[m].substring(y+1)):D=l[m],h(D,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Jn(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof Jn?(this.l=l.l,xo(this,l.j),this.o=l.o,this.g=l.g,To(this,l.u),this.h=l.h,zd(this,qg(l.i)),this.m=l.m):l&&(h=String(l).match(Bg))?(this.l=!1,xo(this,h[1]||"",!0),this.o=So(h[2]||""),this.g=So(h[3]||"",!0),To(this,h[4]),this.h=So(h[5]||"",!0),zd(this,h[6]||"",!0),this.m=So(h[7]||"")):(this.l=!1,this.i=new Ao(null,this.l))}Jn.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(Co(h,Ug,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Co(h,Ug,!0),"@"),l.push(Eo(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&l.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Co(m,m.charAt(0)=="/"?sS:iS,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Co(m,aS)),l.join("")},Jn.prototype.resolve=function(l){const h=un(this);let m=!!l.j;m?xo(h,l.j):m=!!l.o,m?h.o=l.o:m=!!l.g,m?h.g=l.g:m=l.u!=null;var y=l.h;if(m)To(h,l.u);else if(m=!!l.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var D=h.h.lastIndexOf("/");D!=-1&&(y=h.h.slice(0,D+1)+y)}if(D=y,D==".."||D==".")y="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){y=D.lastIndexOf("/",0)==0,D=D.split("/");const M=[];for(let $=0;$<D.length;){const ie=D[$++];ie=="."?y&&$==D.length&&M.push(""):ie==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),y&&$==D.length&&M.push("")):(M.push(ie),y=!0)}y=M.join("/")}else y=D}return m?h.h=y:m=l.i.toString()!=="",m?zd(h,qg(l.i)):m=!!l.m,m&&(h.m=l.m),h};function un(l){return new Jn(l)}function xo(l,h,m){l.j=m?So(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function To(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function zd(l,h,m){h instanceof Ao?(l.i=h,lS(l.i,l.l)):(m||(h=Co(h,oS)),l.i=new Ao(h,l.l))}function ve(l,h,m){l.i.set(h,m)}function Nl(l){return ve(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function So(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Co(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,rS),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function rS(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ug=/[#\/\?@]/g,iS=/[#\?:]/g,sS=/[#\?]/g,oS=/[#\?@]/g,aS=/#/g;function Ao(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Xr(l){l.g||(l.g=new Map,l.h=0,l.i&&nS(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Ao.prototype,t.add=function(l,h){Xr(this),this.i=null,l=Qi(this,l);let m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function $g(l,h){Xr(l),h=Qi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Wg(l,h){return Xr(l),h=Qi(l,h),l.g.has(h)}t.forEach=function(l,h){Xr(this),this.g.forEach(function(m,y){m.forEach(function(D){l.call(h,D,y,this)},this)},this)};function Hg(l,h){Xr(l);let m=[];if(typeof h=="string")Wg(l,h)&&(m=m.concat(l.g.get(Qi(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)m=m.concat(l[h]);return m}t.set=function(l,h){return Xr(this),this.i=null,l=Qi(this,l),Wg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=Hg(this,l),l.length>0?String(l[0]):h):h};function Gg(l,h,m){$g(l,h),m.length>0&&(l.i=null,l.g.set(Qi(l,h),w(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let y=0;y<h.length;y++){var m=h[y];const D=Eo(m);m=Hg(this,m);for(let M=0;M<m.length;M++){let $=D;m[M]!==""&&($+="="+Eo(m[M])),l.push($)}}return this.i=l.join("&")};function qg(l){const h=new Ao;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function Qi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function lS(l,h){h&&!l.j&&(Xr(l),l.i=null,l.g.forEach(function(m,y){const D=y.toLowerCase();y!=D&&($g(this,y),Gg(this,D,m))},l)),l.j=h}function uS(l,h){const m=new wo;if(o.Image){const y=new Image;y.onload=f(Xn,m,"TestLoadImage: loaded",!0,h,y),y.onerror=f(Xn,m,"TestLoadImage: error",!1,h,y),y.onabort=f(Xn,m,"TestLoadImage: abort",!1,h,y),y.ontimeout=f(Xn,m,"TestLoadImage: timeout",!1,h,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else h(!1)}function cS(l,h){const m=new wo,y=new AbortController,D=setTimeout(()=>{y.abort(),Xn(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:y.signal}).then(M=>{clearTimeout(D),M.ok?Xn(m,"TestPingServer: ok",!0,h):Xn(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),Xn(m,"TestPingServer: error",!1,h)})}function Xn(l,h,m,y,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),y(m)}catch{}}function dS(){this.g=new qT}function Bd(l){this.i=l.Sb||null,this.h=l.ab||!1}p(Bd,xg),Bd.prototype.g=function(){return new Dl(this.i,this.h)};function Dl(l,h){it.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Dl,it),t=Dl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,ko(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ro(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ko(this)),this.g&&(this.readyState=3,ko(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kg(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kg(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ro(this):ko(this),this.readyState==3&&Kg(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Ro(this))},t.Na=function(l){this.g&&(this.response=l,Ro(this))},t.ga=function(){this.g&&Ro(this)};function Ro(l){l.readyState=4,l.l=null,l.j=null,l.B=null,ko(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function ko(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Dl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Qg(l){let h="";return O(l,function(m,y){h+=y,h+=":",h+=m,h+=`\r
`}),h}function Ud(l,h,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=Qg(m),typeof l=="string"?m!=null&&Eo(m):ve(l,h,m))}function Pe(l){it.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Pe,it);var hS=/^https?$/i,fS=["POST","PUT"];t=Pe.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bg.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){Yg(this,M);return}if(l=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var D in y)m.set(D,y[D]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())m.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(M=>M.toLowerCase()=="content-type"),D=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(fS,h,void 0)>=0)||y||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,$]of m)this.g.setRequestHeader(M,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(M){Yg(this,M)}};function Yg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Jg(l),Ml(l)}function Jg(l){l.A||(l.A=!0,ft(l,"complete"),ft(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,ft(this,"complete"),ft(this,"abort"),Ml(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ml(this,!0)),Pe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Xg(this):this.Xa())},t.Xa=function(){Xg(this)};function Xg(l){if(l.h&&typeof s<"u"){if(l.v&&Zn(l)==4)setTimeout(l.Ca.bind(l),0);else if(ft(l,"readystatechange"),Zn(l)==4){l.h=!1;try{const M=l.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var y;if(y=M===0){let $=String(l.D).match(Bg)[1]||null;!$&&o.self&&o.self.location&&($=o.self.location.protocol.slice(0,-1)),y=!hS.test($?$.toLowerCase():"")}m=y}if(m)ft(l,"complete"),ft(l,"success");else{l.o=6;try{var D=Zn(l)>2?l.g.statusText:""}catch{D=""}l.l=D+" ["+l.ca()+"]",Jg(l)}}finally{Ml(l)}}}}function Ml(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const m=l.g;l.g=null,h||ft(l,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Zn(l){return l.g?l.g.readyState:0}t.ca=function(){try{return Zn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),GT(h)}};function Zg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function pS(l){const h={};l=(l.g&&Zn(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<l.length;y++){if(A(l[y]))continue;var m=XT(l[y]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const M=h[D]||[];h[D]=M,M.push(m)}q(h,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bo(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function ey(l){this.za=0,this.i=[],this.j=new wo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bo("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bo("baseRetryDelayMs",5e3,l),this.Za=bo("retryDelaySeedMs",1e4,l),this.Ta=bo("forwardChannelMaxRetries",2,l),this.va=bo("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new jg(l&&l.concurrentRequestLimit),this.Ba=new dS,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ey.prototype,t.ka=8,t.I=1,t.connect=function(l,h,m,y){pt(0),this.W=l,this.H=h||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.J=uy(this,null,this.W),jl(this)};function $d(l){if(ty(l),l.I==3){var h=l.V++,m=un(l.J);if(ve(m,"SID",l.M),ve(m,"RID",h),ve(m,"TYPE","terminate"),Po(l,m),h=new Yn(l,l.j,h),h.M=2,h.A=Nl(un(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=h.A,m=!0),m||(h.g=cy(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Pl(h)}ly(l)}function Vl(l){l.g&&(Hd(l),l.g.cancel(),l.g=null)}function ty(l){Vl(l),l.v&&(o.clearTimeout(l.v),l.v=null),Ol(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function jl(l){if(!Og(l.h)&&!l.m){l.m=!0;var h=l.Ea;j||v(),z||(j(),z=!0),x.add(h,l),l.D=0}}function mS(l,h){return Fg(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=_o(d(l.Ea,l,h),ay(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const D=new Yn(this,this.j,l);let M=this.o;if(this.U&&(M?(M=ee(M),Te(M,this.U)):M=this.U),this.u!==null||this.R||(D.J=M,M=null),this.S)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,h>4096){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=ry(this,D,h),m=un(this.J),ve(m,"RID",l),ve(m,"CVER",22),this.G&&ve(m,"X-HTTP-Session-Id",this.G),Po(this,m),M&&(this.R?h="headers="+Eo(Qg(M))+"&"+h:this.u&&Ud(m,this.u,M)),Ld(this.h,D),this.Ra&&ve(m,"TYPE","init"),this.S?(ve(m,"$req",h),ve(m,"SID","null"),D.U=!0,Vd(D,m,null)):Vd(D,m,h),this.I=2}}else this.I==3&&(l?ny(this,l):this.i.length==0||Og(this.h)||ny(this))};function ny(l,h){var m;h?m=h.l:m=l.V++;const y=un(l.J);ve(y,"SID",l.M),ve(y,"RID",m),ve(y,"AID",l.K),Po(l,y),l.u&&l.o&&Ud(y,l.u,l.o),m=new Yn(l,l.j,m,l.D+1),l.u===null&&(m.J=l.o),h&&(l.i=h.G.concat(l.i)),h=ry(l,m,1e3),m.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Ld(l.h,m),Vd(m,y,h)}function Po(l,h){l.H&&O(l.H,function(m,y){ve(h,y,m)}),l.l&&O({},function(m,y){ve(h,y,m)})}function ry(l,h,m){m=Math.min(l.i.length,m);const y=l.l?d(l.l.Ka,l.l,l):null;e:{var D=l.i;let ie=-1;for(;;){const Ue=["count="+m];ie==-1?m>0?(ie=D[0].g,Ue.push("ofs="+ie)):ie=0:Ue.push("ofs="+ie);let ge=!0;for(let qe=0;qe<m;qe++){var M=D[qe].g;const cn=D[qe].map;if(M-=ie,M<0)ie=Math.max(0,D[qe].g-100),ge=!1;else try{M="req"+M+"_"||"";try{var $=cn instanceof Map?cn:Object.entries(cn);for(const[ei,er]of $){let tr=er;a(er)&&(tr=bd(er)),Ue.push(M+ei+"="+encodeURIComponent(tr))}}catch(ei){throw Ue.push(M+"type="+encodeURIComponent("_badmap")),ei}}catch{y&&y(cn)}}if(ge){$=Ue.join("&");break e}}$=void 0}return l=l.i.splice(0,m),h.G=l,$}function iy(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;j||v(),z||(j(),z=!0),x.add(h,l),l.A=0}}function Wd(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=_o(d(l.Da,l),ay(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,sy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=_o(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),Vl(this),sy(this))};function Hd(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function sy(l){l.g=new Yn(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=un(l.na);ve(h,"RID","rpc"),ve(h,"SID",l.M),ve(h,"AID",l.K),ve(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&ve(h,"TO",l.ia),ve(h,"TYPE","xmlhttp"),Po(l,h),l.u&&l.o&&Ud(h,l.u,l.o),l.O&&(l.g.H=l.O);var m=l.g;l=l.ba,m.M=1,m.A=Nl(un(h)),m.u=null,m.R=!0,Dg(m,l)}t.Va=function(){this.C!=null&&(this.C=null,Vl(this),Wd(this),pt(19))};function Ol(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function oy(l,h){var m=null;if(l.g==h){Ol(l),Hd(l),l.g=null;var y=2}else if(Fd(l.h,h))m=h.G,Lg(l.h,h),y=1;else return;if(l.I!=0){if(h.o)if(y==1){m=h.u?h.u.length:0,h=Date.now()-h.F;var D=l.D;y=kl(),ft(y,new Rg(y,m)),jl(l)}else iy(l);else if(D=h.m,D==3||D==0&&h.X>0||!(y==1&&mS(l,h)||y==2&&Wd(l)))switch(m&&m.length>0&&(h=l.h,h.i=h.i.concat(m)),D){case 1:Zr(l,5);break;case 4:Zr(l,10);break;case 3:Zr(l,6);break;default:Zr(l,2)}}}function ay(l,h){let m=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(m*=2),m*h}function Zr(l,h){if(l.j.info("Error code "+h),h==2){var m=d(l.bb,l),y=l.Ua;const D=!y;y=new Jn(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||xo(y,"https"),Nl(y),D?uS(y.toString(),m):cS(y.toString(),m)}else pt(2);l.I=0,l.l&&l.l.pa(h),ly(l),ty(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function ly(l){if(l.I=0,l.ja=[],l.l){const h=zg(l.h);(h.length!=0||l.i.length!=0)&&(E(l.ja,h),E(l.ja,l.i),l.h.i.length=0,w(l.i),l.i.length=0),l.l.oa()}}function uy(l,h,m){var y=m instanceof Jn?un(m):new Jn(m);if(y.g!="")h&&(y.g=h+"."+y.g),To(y,y.u);else{var D=o.location;y=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;const M=new Jn(null);y&&xo(M,y),h&&(M.g=h),D&&To(M,D),m&&(M.h=m),y=M}return m=l.G,h=l.wa,m&&h&&ve(y,m,h),ve(y,"VER",l.ka),Po(l,y),y}function cy(l,h,m){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Pe(new Bd({ab:m})):new Pe(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dy(){}t=dy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Fl(){}Fl.prototype.g=function(l,h){return new Rt(l,h)};function Rt(l,h){it.call(this),this.g=new ey(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!A(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!A(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Yi(this)}p(Rt,it),Rt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){$d(this.g)},Rt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.v&&(m={},m.__data__=bd(l),l=m);h.i.push(new tS(h.Ya++,l)),h.I==3&&jl(h)},Rt.prototype.N=function(){this.g.l=null,delete this.j,$d(this.g),delete this.g,Rt.Z.N.call(this)};function hy(l){Pd.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}p(hy,Pd);function fy(){Nd.call(this),this.status=1}p(fy,Nd);function Yi(l){this.g=l}p(Yi,dy),Yi.prototype.ra=function(){ft(this.g,"a")},Yi.prototype.qa=function(l){ft(this.g,new hy(l))},Yi.prototype.pa=function(l){ft(this.g,new fy)},Yi.prototype.oa=function(){ft(this.g,"b")},Fl.prototype.createWebChannel=Fl.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,UE=function(){return new Fl},BE=function(){return kl()},zE=Yr,Of={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bl.NO_ERROR=0,bl.TIMEOUT=8,bl.HTTP_ERROR=6,Tu=bl,kg.COMPLETE="complete",LE=kg,Tg.EventType=yo,yo.OPEN="a",yo.CLOSE="b",yo.ERROR="c",yo.MESSAGE="d",it.prototype.listen=it.prototype.J,Jo=Tg,Pe.prototype.listenOnce=Pe.prototype.K,Pe.prototype.getLastError=Pe.prototype.Ha,Pe.prototype.getLastErrorCode=Pe.prototype.ya,Pe.prototype.getStatus=Pe.prototype.ca,Pe.prototype.getResponseJson=Pe.prototype.La,Pe.prototype.getResponseText=Pe.prototype.la,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Fa,FE=Pe}).apply(typeof ru<"u"?ru:typeof self<"u"?self:typeof window<"u"?window:{});const Wv="@firebase/firestore",Hv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new mm("@firebase/firestore");function ss(){return ki.logLevel}function B(t,...e){if(ki.logLevel<=ae.DEBUG){const n=e.map(vm);ki.debug(`Firestore (${co}): ${t}`,...n)}}function gt(t,...e){if(ki.logLevel<=ae.ERROR){const n=e.map(vm);ki.error(`Firestore (${co}): ${t}`,...n)}}function bi(t,...e){if(ki.logLevel<=ae.WARN){const n=e.map(vm);ki.warn(`Firestore (${co}): ${t}`,...n)}}function vm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$E(t,r,n)}function $E(t,e,n){let r=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw gt(r),new Error(r)}function Y(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||$E(e,i,r)}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Gn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ze.UNAUTHENTICATED))}shutdown(){}}class Pk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Nk{constructor(e){this.t=e,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Y(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Mn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Y(typeof r.accessToken=="string",31837,{l:r}),new WE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string",2055,{h:e}),new Ze(e)}}class Dk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Mk{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Dk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Gv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ut(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Y(this.o===void 0,3512);const r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Gv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Y(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Gv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=jk(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function te(t,e){return t<e?-1:t>e?1:0}function Ff(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Sh(i)===Sh(s)?te(i,s):Sh(i)?1:-1}return te(t.length,e.length)}const Ok=55296,Fk=57343;function Sh(t){const e=t.charCodeAt(0);return e>=Ok&&e<=Fk}function Us(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function HE(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="__name__";class pn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=pn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return te(e.length,n.length)}static compareSegments(e,n){const r=pn.isNumericId(e),i=pn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?pn.extractNumericId(e).compare(pn.extractNumericId(n)):Ff(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dr.fromString(e.substring(4,e.length-2))}}class pe extends pn{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const Lk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ce extends pn{construct(e,n,r){return new Ce(e,n,r)}static isValidIdentifier(e){return Lk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ce.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qv}static keyField(){return new Ce([qv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new G(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new G(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ce(n)}static emptyPath(){return new Ce([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(pe.fromString(e))}static fromName(e){return new W(pe.fromString(e).popFirst(5))}static empty(){return new W(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(t,e,n){if(!n)throw new G(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Bk(t,e,n,r){if(e===!0&&r===!0)throw new G(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Kv(t){if(!W.isDocumentKey(t))throw new G(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function wm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function $s(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wm(t);throw new G(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t,e){const n={typeString:t};return e&&(n.value=e),n}function pl(t,e){if(!GE(t))throw new G(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new G(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=-62135596800,Yv=1e6;class de{static now(){return de.fromMillis(Date.now())}static fromDate(e){return de.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Yv);return new de(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Qv)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yv}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:de._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pl(e,de._jsonSchema))return new de(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}de._jsonSchemaVersion="firestore/timestamp/1.0",de._jsonSchema={type:Le("string",de._jsonSchemaVersion),seconds:Le("number"),nanoseconds:Le("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new de(0,0))}static max(){return new J(new de(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=-1;class gc{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Lf(t){return t.fields.find(e=>e.kind===2)}function si(t){return t.fields.filter(e=>e.kind!==2)}gc.UNKNOWN_ID=-1;class Su{constructor(e,n){this.fieldPath=e,this.kind=n}}class Wa{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Wa(0,Ot.min())}}function Uk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new de(n+1,0):new de(n,r));return new Ot(i,W.empty(),e)}function qE(t){return new Ot(t.readTime,t.key,$a)}class Ot{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ot(J.min(),W.empty(),$a)}static max(){return new Ot(J.max(),W.empty(),$a)}}function Em(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wi(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==KE)throw t;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new P((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):P.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):P.reject(n)}static resolve(e){return new P((n,r)=>{n(e)})}static reject(e){return new P((n,r)=>{r(e)})}static waitFor(e){return new P((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=P.resolve(!1);for(const r of e)n=n.next(i=>i?P.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new P((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new P((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="SimpleDb";class id{static open(e,n,r,i){try{return new id(n,e.transaction(i,r))}catch(s){throw new ha(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Mn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new ha(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Im(r.target.error);this.S.reject(new ha(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(B(bt,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Wk(n)}}class Mr{static delete(e){return B(bt,"Removing database:",e),ai(EE().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!bE())return!1;if(Mr.F())return!0;const e=He(),n=Mr.M(e),r=0<n&&n<10,i=YE(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Mr.M(He())===12.2&&gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(B(bt,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new ha(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new G(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new G(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ha(e,o))},i.onupgradeneeded=s=>{B(bt,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{B(bt,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=id.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(d=>(a.C(),d)).catch(d=>(a.abort(d),P.reject(d))).toPromise();return u.catch(()=>{}),await a.D,u}catch(a){const u=a,d=u.name!=="FirebaseError"&&o<3;if(B(bt,"Transaction failed with error:",u.message,"Retrying:",d),this.close(),!d)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function YE(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class $k{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ai(this.U.delete())}}class ha extends G{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Gr(t){return t.name==="IndexedDbTransactionError"}class Wk{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(B(bt,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(B(bt,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ai(r)}add(e){return B(bt,"ADD",this.store.name,e,e),ai(this.store.add(e))}get(e){return ai(this.store.get(e)).next(n=>(n===void 0&&(n=null),B(bt,"GET",this.store.name,e,n),n))}delete(e){return B(bt,"DELETE",this.store.name,e),ai(this.store.delete(e))}count(){return B(bt,"COUNT",this.store.name),ai(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new P((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,u)=>{o.push(u)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new P((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){B(bt,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new P((r,i)=>{n.onerror=s=>{const o=Im(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new P((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new $k(a),d=n(a.primaryKey,a.value,u);if(d instanceof P){const f=d.catch(p=>(u.done(),P.reject(p)));r.push(f)}u.isDone?i():u.G===null?a.continue():a.continue(u.G)}}).next(()=>P.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ai(t){return new P((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Im(r.target.error);n(i)}})}let Jv=!1;function Im(t){const e=Mr.M(He());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jv||(Jv=!0,setTimeout(()=>{throw r},0)),r}}return t}const fa="IndexBackfiller";class Hk{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){B(fa,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();B(fa,`Documents written: ${n}`)}catch(n){Gr(n)?B(fa,"Ignoring IndexedDB error during index backfill: ",n):await Wi(n)}await this.re(6e4)})}}class Gk{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return P.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return B(fa,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>(B(fa,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=qE(s);Em(o,r)>0&&(r=o)}),new Ot(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ht.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=-1;function sd(t){return t==null}function Ha(t){return t===0&&1/t==-1/0}function qk(t){return typeof t=="number"&&Number.isInteger(t)&&!Ha(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc="";function dt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Xv(e)),e=Kk(t.get(n),e);return Xv(e)}function Kk(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case yc:n+="";break;default:n+=s}}return n}function Xv(t){return t+yc+""}function gn(t){const e=t.length;if(Y(e>=2,64408,{path:t}),e===2)return Y(t.charAt(0)===yc&&t.charAt(1)==="",56145,{path:t}),pe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(yc,s);switch((o<0||o>n)&&Q(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Q(61167,{path:t})}s=o+2}return new pe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="remoteDocuments",ml="owner",Xi="owner",Ga="mutationQueues",Qk="userId",tn="mutations",Zv="batchId",pi="userMutationsIndex",e0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t,e){return[t,dt(e)]}function JE(t,e,n){return[t,dt(e),n]}const Yk={},Ws="documentMutations",vc="remoteDocumentsV14",Jk=["prefixPath","collectionGroup","readTime","documentId"],Au="documentKeyIndex",Xk=["prefixPath","collectionGroup","documentId"],XE="collectionGroupIndex",Zk=["collectionGroup","readTime","prefixPath","documentId"],qa="remoteDocumentGlobal",zf="remoteDocumentGlobalKey",Hs="targets",ZE="queryTargetsIndex",eb=["canonicalId","targetId"],Gs="targetDocuments",tb=["targetId","path"],xm="documentTargetsIndex",nb=["path","targetId"],_c="targetGlobalKey",vi="targetGlobal",Ka="collectionParents",rb=["collectionId","parent"],qs="clientMetadata",ib="clientId",od="bundles",sb="bundleId",ad="namedQueries",ob="name",Tm="indexConfiguration",ab="indexId",Bf="collectionGroupIndex",lb="collectionGroup",pa="indexState",ub=["indexId","uid"],eI="sequenceNumberIndex",cb=["uid","sequenceNumber"],ma="indexEntries",db=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tI="documentKeyIndex",hb=["indexId","uid","orderedDocumentKey"],ld="documentOverlays",fb=["userId","collectionPath","documentId"],Uf="collectionPathOverlayIndex",pb=["userId","collectionPath","largestBatchId"],nI="collectionGroupOverlayIndex",mb=["userId","collectionGroup","largestBatchId"],Sm="globals",gb="name",rI=[Ga,tn,Ws,oi,Hs,ml,vi,Gs,qs,qa,Ka,od,ad],yb=[...rI,ld],iI=[Ga,tn,Ws,vc,Hs,ml,vi,Gs,qs,qa,Ka,od,ad,ld],sI=iI,Cm=[...sI,Tm,pa,ma],vb=Cm,oI=[...Cm,Sm],_b=oI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f extends QE{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Ge(t,e){const n=ne(t);return Mr.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n){this.comparator=e,this.root=n||et.EMPTY}insert(e,n){return new xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new iu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new iu(this.root,e,this.comparator,!1)}getReverseIterator(){return new iu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new iu(this.root,e,this.comparator,!0)}}class iu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class et{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??et.RED,this.left=i??et.EMPTY,this.right=s??et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new et(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return et.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new n0(this.data.getIterator())}getIteratorFrom(e){return new n0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof fe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new fe(this.comparator);return n.data=e,n}}class n0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zi(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.fields=e,e.sort(Ce.comparator)}static empty(){return new Gt([])}unionWith(e){let n=new fe(Ce.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Us(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new lI("Invalid base64 string: "+s):s}}(e);return new ze(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ze(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ze.EMPTY_BYTE_STRING=new ze("");const wb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bn(t){if(Y(!!t,39018),typeof t=="string"){let e=0;const n=wb.exec(t);if(Y(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ee(t.seconds),nanos:Ee(t.nanos)}}function Ee(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Un(t){return typeof t=="string"?ze.fromBase64String(t):ze.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="server_timestamp",cI="__type__",dI="__previous_value__",hI="__local_write_time__";function Am(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[cI])==null?void 0:r.stringValue)===uI}function ud(t){const e=t.mapValue.fields[dI];return Am(e)?ud(e):e}function Qa(t){const e=Bn(t.mapValue.fields[hI].timestampValue);return new de(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n,r,i,s,o,a,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const wc="(default)";class Pi{constructor(e,n){this.projectId=e,this.database=n||wc}static empty(){return new Pi("","")}get isDefaultDatabase(){return this.database===wc}isEqual(e){return e instanceof Pi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="__type__",fI="__max__",wr={mapValue:{fields:{__type__:{stringValue:fI}}}},km="__vector__",Ks="value",Ru={nullValue:"NULL_VALUE"};function Fr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Am(t)?4:pI(t)?9007199254740991:cd(t)?10:11:Q(28295,{value:t})}function Sn(t,e){if(t===e)return!0;const n=Fr(t);if(n!==Fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qa(t).isEqual(Qa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Bn(i.timestampValue),a=Bn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Un(i.bytesValue).isEqual(Un(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ee(i.geoPointValue.latitude)===Ee(s.geoPointValue.latitude)&&Ee(i.geoPointValue.longitude)===Ee(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ee(i.integerValue)===Ee(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ee(i.doubleValue),a=Ee(s.doubleValue);return o===a?Ha(o)===Ha(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Us(t.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(t0(o)!==t0(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Sn(o[u],a[u])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function Ya(t,e){return(t.values||[]).find(n=>Sn(n,e))!==void 0}function Lr(t,e){if(t===e)return 0;const n=Fr(t),r=Fr(e);if(n!==r)return te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return te(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ee(s.integerValue||s.doubleValue),u=Ee(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return r0(t.timestampValue,e.timestampValue);case 4:return r0(Qa(t),Qa(e));case 5:return Ff(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Un(s),u=Un(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const f=te(a[d],u[d]);if(f!==0)return f}return te(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=te(Ee(s.latitude),Ee(o.latitude));return a!==0?a:te(Ee(s.longitude),Ee(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return i0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var g,w,E,k;const a=s.fields||{},u=o.fields||{},d=(g=a[Ks])==null?void 0:g.arrayValue,f=(w=u[Ks])==null?void 0:w.arrayValue,p=te(((E=d==null?void 0:d.values)==null?void 0:E.length)||0,((k=f==null?void 0:f.values)==null?void 0:k.length)||0);return p!==0?p:i0(d,f)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===wr.mapValue&&o===wr.mapValue)return 0;if(s===wr.mapValue)return 1;if(o===wr.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=Ff(u[p],f[p]);if(g!==0)return g;const w=Lr(a[u[p]],d[f[p]]);if(w!==0)return w}return te(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{he:n})}}function r0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return te(t,e);const n=Bn(t),r=Bn(e),i=te(n.seconds,r.seconds);return i!==0?i:te(n.nanos,r.nanos)}function i0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Lr(n[i],r[i]);if(s)return s}return te(n.length,r.length)}function Qs(t){return Wf(t)}function Wf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Bn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Un(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Wf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Wf(n.fields[o])}`;return i+"}"}(t.mapValue):Q(61005,{value:t})}function ku(t){switch(Fr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ud(t);return e?16+ku(e):16;case 5:return 2*t.stringValue.length;case 6:return Un(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ku(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Hi(r.fields,(s,o)=>{i+=s.length+ku(o)}),i}(t.mapValue);default:throw Q(13486,{value:t})}}function bm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hf(t){return!!t&&"integerValue"in t}function Ja(t){return!!t&&"arrayValue"in t}function s0(t){return!!t&&"nullValue"in t}function o0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bu(t){return!!t&&"mapValue"in t}function cd(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Rm])==null?void 0:r.stringValue)===km}function ga(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ga(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ga(t.arrayValue.values[n]);return e}return{...t}}function pI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fI}const mI={mapValue:{fields:{[Rm]:{stringValue:km},[Ks]:{arrayValue:{}}}}};function Ib(t){return"nullValue"in t?Ru:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?bm(Pi.empty(),W.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?cd(t)?mI:{mapValue:{}}:Q(35942,{value:t})}function xb(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?bm(Pi.empty(),W.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?mI:"mapValue"in t?cd(t)?{mapValue:{}}:wr:Q(61959,{value:t})}function a0(t,e){const n=Lr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function l0(t,e){const n=Lr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.value=e}static empty(){return new xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ga(n)}setAll(e){let n=Ce.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ga(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());bu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Hi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new xt(ga(this.value))}}function gI(t){const e=[];return Hi(t.fields,(n,r)=>{const i=new Ce([n]);if(bu(r)){const s=gI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Gt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new De(e,0,J.min(),J.min(),J.min(),xt.empty(),0)}static newFoundDocument(e,n,r,i){return new De(e,1,n,J.min(),r,i,0)}static newNoDocument(e,n){return new De(e,2,n,J.min(),J.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new De(e,3,n,J.min(),J.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof De&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new De(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){this.position=e,this.inclusive=n}}function u0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Lr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function c0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n="asc"){this.field=e,this.dir=n}}function Tb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{}class le extends yI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Sb(e,n,r):n==="array-contains"?new Rb(e,r):n==="in"?new xI(e,r):n==="not-in"?new kb(e,r):n==="array-contains-any"?new bb(e,r):new le(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Cb(e,r):new Ab(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Lr(n,this.value)):n!==null&&Fr(this.value)===Fr(n)&&this.matchesComparison(Lr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class me extends yI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new me(e,n)}matches(e){return Js(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Js(t){return t.op==="and"}function Gf(t){return t.op==="or"}function Pm(t){return vI(t)&&Js(t)}function vI(t){for(const e of t.filters)if(e instanceof me)return!1;return!0}function qf(t){if(t instanceof le)return t.field.canonicalString()+t.op.toString()+Qs(t.value);if(Pm(t))return t.filters.map(e=>qf(e)).join(",");{const e=t.filters.map(n=>qf(n)).join(",");return`${t.op}(${e})`}}function _I(t,e){return t instanceof le?function(r,i){return i instanceof le&&r.op===i.op&&r.field.isEqual(i.field)&&Sn(r.value,i.value)}(t,e):t instanceof me?function(r,i){return i instanceof me&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&_I(o,i.filters[a]),!0):!1}(t,e):void Q(19439)}function wI(t,e){const n=t.filters.concat(e);return me.create(n,t.op)}function EI(t){return t instanceof le?function(n){return`${n.field.canonicalString()} ${n.op} ${Qs(n.value)}`}(t):t instanceof me?function(n){return n.op.toString()+" {"+n.getFilters().map(EI).join(" ,")+"}"}(t):"Filter"}class Sb extends le{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class Cb extends le{constructor(e,n){super(e,"in",n),this.keys=II("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ab extends le{constructor(e,n){super(e,"not-in",n),this.keys=II("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function II(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class Rb extends le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ja(n)&&Ya(n.arrayValue,this.value)}}class xI extends le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ya(this.value.arrayValue,n)}}class kb extends le{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ya(this.value.arrayValue,n)}}class bb extends le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ja(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ya(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function Kf(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Pb(t,e,n,r,i,s,o)}function Ni(t){const e=ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),sd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qs(r)).join(",")),e.Te=n}return e.Te}function gl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Tb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_I(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!c0(t.startAt,e.startAt)&&c0(t.endAt,e.endAt)}function Ic(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function xc(t,e){return t.filters.filter(n=>n instanceof le&&n.field.isEqual(e))}function d0(t,e,n){let r=Ru,i=!0;for(const s of xc(t,e)){let o=Ru,a=!0;switch(s.op){case"<":case"<=":o=Ib(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Ru}a0({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];a0({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function h0(t,e,n){let r=wr,i=!0;for(const s of xc(t,e)){let o=wr,a=!0;switch(s.op){case">=":case">":o=xb(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=wr}l0({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];l0({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Nb(t,e,n,r,i,s,o,a){return new dd(t,e,n,r,i,s,o,a)}function hd(t){return new dd(t)}function f0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Db(t){return t.collectionGroup!==null}function ya(t){const e=ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new fe(Ce.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Ec(s,r))}),n.has(Ce.keyField().canonicalString())||e.Ie.push(new Ec(Ce.keyField(),r))}return e.Ie}function Kt(t){const e=ne(t);return e.Ee||(e.Ee=Mb(e,ya(t))),e.Ee}function Mb(t,e){if(t.limitType==="F")return Kf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ec(i.field,s)});const n=t.endAt?new Ys(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ys(t.startAt.position,t.startAt.inclusive):null;return Kf(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Qf(t,e,n){return new dd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fd(t,e){return gl(Kt(t),Kt(e))&&t.limitType===e.limitType}function TI(t){return`${Ni(Kt(t))}|lt:${t.limitType}`}function os(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>EI(i)).join(", ")}]`),sd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Qs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Qs(i)).join(",")),`Target(${r})`}(Kt(t))}; limitType=${t.limitType})`}function yl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ya(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const d=u0(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,ya(r),i)||r.endAt&&!function(o,a,u){const d=u0(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,ya(r),i))}(t,e)}function Vb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function SI(t){return(e,n)=>{let r=!1;for(const i of ya(t)){const s=jb(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function jb(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return u!==null&&d!==null?Lr(u,d):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return aI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=new xe(W.comparator);function Nt(){return Ob}const CI=new xe(W.comparator);function Xo(...t){let e=CI;for(const n of t)e=e.insert(n.key,n);return e}function AI(t){let e=CI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function yn(){return va()}function RI(){return va()}function va(){return new qn(t=>t.toString(),(t,e)=>t.isEqual(e))}const Fb=new xe(W.comparator),Lb=new fe(W.comparator);function se(...t){let e=Lb;for(const n of t)e=e.add(n);return e}const zb=new fe(te);function Bb(){return zb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ha(e)?"-0":e}}function kI(t){return{integerValue:""+t}}function Ub(t,e){return qk(e)?kI(e):Nm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this._=void 0}}function $b(t,e,n){return t instanceof Xa?function(i,s){const o={fields:{[cI]:{stringValue:uI},[hI]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Am(s)&&(s=ud(s)),s&&(o.fields[dI]=s),{mapValue:o}}(n,e):t instanceof Xs?PI(t,e):t instanceof Zs?NI(t,e):function(i,s){const o=bI(i,s),a=p0(o)+p0(i.Ae);return Hf(o)&&Hf(i.Ae)?kI(a):Nm(i.serializer,a)}(t,e)}function Wb(t,e,n){return t instanceof Xs?PI(t,e):t instanceof Zs?NI(t,e):n}function bI(t,e){return t instanceof Za?function(r){return Hf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Xa extends pd{}class Xs extends pd{constructor(e){super(),this.elements=e}}function PI(t,e){const n=DI(e);for(const r of t.elements)n.some(i=>Sn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Zs extends pd{constructor(e){super(),this.elements=e}}function NI(t,e){let n=DI(e);for(const r of t.elements)n=n.filter(i=>!Sn(i,r));return{arrayValue:{values:n}}}class Za extends pd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function p0(t){return Ee(t.integerValue||t.doubleValue)}function DI(t){return Ja(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n){this.field=e,this.transform=n}}function Gb(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Xs&&i instanceof Xs||r instanceof Zs&&i instanceof Zs?Us(r.elements,i.elements,Sn):r instanceof Za&&i instanceof Za?Sn(r.Ae,i.Ae):r instanceof Xa&&i instanceof Xa}(t.transform,e.transform)}class qb{constructor(e,n){this.version=e,this.transformResults=n}}class Dt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dt}static exists(e){return new Dt(void 0,e)}static updateTime(e){return new Dt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class md{}function MI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Dm(t.key,Dt.none()):new ho(t.key,t.data,Dt.none());{const n=t.data,r=xt.empty();let i=new fe(Ce.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new qr(t.key,r,new Gt(i.toArray()),Dt.none())}}function Kb(t,e,n){t instanceof ho?function(i,s,o){const a=i.value.clone(),u=g0(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof qr?function(i,s,o){if(!Pu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=g0(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(VI(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _a(t,e,n,r){return t instanceof ho?function(s,o,a,u){if(!Pu(s.precondition,o))return a;const d=s.value.clone(),f=y0(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof qr?function(s,o,a,u){if(!Pu(s.precondition,o))return a;const d=y0(s.fieldTransforms,u,o),f=o.data;return f.setAll(VI(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Pu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Qb(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=bI(r.transform,i||null);s!=null&&(n===null&&(n=xt.empty()),n.set(r.field,s))}return n||null}function m0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Us(r,i,(s,o)=>Gb(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ho extends md{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qr extends md{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function g0(t,e,n){const r=new Map;Y(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Wb(o,a,n[i]))}return r}function y0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,$b(s,o,e))}return r}class Dm extends md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jI extends md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Kb(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=RI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=MI(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Us(this.mutations,e.mutations,(n,r)=>m0(n,r))&&Us(this.baseMutations,e.baseMutations,(n,r)=>m0(n,r))}}class Vm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Y(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return Fb}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Vm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,ue;function Jb(t){switch(t){case L.OK:return Q(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function OI(t){if(t===void 0)return gt("GRPC error has no .code"),L.UNKNOWN;switch(t){case Oe.OK:return L.OK;case Oe.CANCELLED:return L.CANCELLED;case Oe.UNKNOWN:return L.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return L.INTERNAL;case Oe.UNAVAILABLE:return L.UNAVAILABLE;case Oe.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Oe.NOT_FOUND:return L.NOT_FOUND;case Oe.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Oe.ABORTED:return L.ABORTED;case Oe.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Oe.DATA_LOSS:return L.DATA_LOSS;default:return Q(39323,{code:t})}}(ue=Oe||(Oe={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=new Dr([4294967295,4294967295],0);function v0(t){const e=Xb().encode(t),n=new OE;return n.update(e),new Uint8Array(n.digest())}function _0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Dr([n,r],0),new Dr([i,s],0)]}class Om{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(r<0)throw new Zo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Dr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Dr.fromNumber(r)));return i.compare(Zb)===1&&(i=new Dr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=v0(e),[r,i]=_0(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Om(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=v0(e),[r,i]=_0(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,vl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gd(J.min(),i,new xe(te),Nt(),se())}}class vl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new vl(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class FI{constructor(e,n){this.targetId=e,this.Ce=n}}class LI{constructor(e,n,r=ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class w0{constructor(){this.ve=0,this.Fe=E0(),this.Me=ze.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),n=se(),r=se();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:s})}}),new vl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=E0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Y(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nt(),this.Je=su(),this.He=su(),this.Ye=new xe(te)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Ic(s))if(r===0){const o=new W(s.path);this.et(n,o,De.newNoDocument(o,J.min()))}else Y(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),u=a?this.ct(a,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Un(r).toUint8Array()}catch(u){if(u instanceof lI)return bi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Om(o,i,s)}catch(u){return bi(u instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Ic(a.target)){const u=new W(a.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,De.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=se();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new gd(e,n,this.Ye,this.je,r);return this.je=Nt(),this.Je=su(),this.He=su(),this.Ye=new xe(te),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new w0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new fe(te),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new fe(te),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new w0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function su(){return new xe(W.comparator)}function E0(){return new xe(W.comparator)}const tP={asc:"ASCENDING",desc:"DESCENDING"},nP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rP={and:"AND",or:"OR"};class iP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Yf(t,e){return t.useProto3Json||sd(e)?e:{value:e}}function eo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sP(t,e){return eo(t,e.toTimestamp())}function vt(t){return Y(!!t,49232),J.fromTimestamp(function(n){const r=Bn(n);return new de(r.seconds,r.nanos)}(t))}function Fm(t,e){return Jf(t,e).canonicalString()}function Jf(t,e){const n=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BI(t){const e=pe.fromString(t);return Y(YI(e),10190,{key:e.toString()}),e}function Tc(t,e){return Fm(t.databaseId,e.path)}function _i(t,e){const n=BI(e);if(n.get(1)!==t.databaseId.projectId)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(WI(n))}function UI(t,e){return Fm(t.databaseId,e)}function $I(t){const e=BI(t);return e.length===4?pe.emptyPath():WI(e)}function Xf(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WI(t){return Y(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function I0(t,e,n){return{name:Tc(t,e),fields:n.value.mapValue.fields}}function oP(t,e,n){const r=_i(t,e.name),i=vt(e.updateTime),s=e.createTime?vt(e.createTime):J.min(),o=new xt({mapValue:{fields:e.fields}}),a=De.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function aP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(Y(f===void 0||typeof f=="string",58123),ze.fromBase64String(f||"")):(Y(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ze.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=d.code===void 0?L.UNKNOWN:OI(d.code);return new G(f,d.message||"")}(o);n=new LI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=_i(t,r.document.name),s=vt(r.document.updateTime),o=r.document.createTime?vt(r.document.createTime):J.min(),a=new xt({mapValue:{fields:r.document.fields}}),u=De.newFoundDocument(i,s,o,a),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Nu(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=_i(t,r.document),s=r.readTime?vt(r.readTime):J.min(),o=De.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Nu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=_i(t,r.document),s=r.removedTargetIds||[];n=new Nu([],s,i,null)}else{if(!("filter"in e))return Q(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Yb(i,s),a=r.targetId;n=new FI(a,o)}}return n}function Sc(t,e){let n;if(e instanceof ho)n={update:I0(t,e.key,e.value)};else if(e instanceof Dm)n={delete:Tc(t,e.key)};else if(e instanceof qr)n={update:I0(t,e.key,e.data),updateMask:fP(e.fieldMask)};else{if(!(e instanceof jI))return Q(16599,{Vt:e.type});n={verify:Tc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Xa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Za)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Q(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:sP(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q(27497)}(t,e.precondition)),n}function Zf(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Dt.updateTime(vt(s.updateTime)):s.exists!==void 0?Dt.exists(s.exists):Dt.none()}(e.currentDocument):Dt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;if("setToServerValue"in a)Y(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),u=new Xa;else if("appendMissingElements"in a){const f=a.appendMissingElements.values||[];u=new Xs(f)}else if("removeAllFromArray"in a){const f=a.removeAllFromArray.values||[];u=new Zs(f)}else"increment"in a?u=new Za(o,a.increment):Q(16584,{proto:a});const d=Ce.fromServerFormat(a.fieldPath);return new Hb(d,u)}(t,i)):[];if(e.update){e.update.name;const i=_i(t,e.update.name),s=new xt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const d=u.fieldPaths||[];return new Gt(d.map(f=>Ce.fromServerFormat(f)))}(e.updateMask);return new qr(i,s,o,n,r)}return new ho(i,s,n,r)}if(e.delete){const i=_i(t,e.delete);return new Dm(i,n)}if(e.verify){const i=_i(t,e.verify);return new jI(i,n)}return Q(1463,{proto:e})}function lP(t,e){return t&&t.length>0?(Y(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?vt(i.updateTime):vt(s);return o.isEqual(J.min())&&(o=vt(s)),new qb(o,i.transformResults||[])}(n,e))):[]}function HI(t,e){return{documents:[UI(t,e.path)]}}function GI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=UI(t,i);const s=function(d){if(d.length!==0)return QI(me.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:as(g.field),direction:cP(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Yf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function qI(t){let e=$I(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Y(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const g=KI(p);return g instanceof me&&Pm(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(E){return new Ec(ls(E.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,sd(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,w=p.values||[];return new Ys(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,w=p.values||[];return new Ys(w,g)}(n.endAt)),Nb(e,i,o,s,a,"F",u,d)}function uP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ls(n.unaryFilter.field);return le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ls(n.unaryFilter.field);return le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ls(n.unaryFilter.field);return le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ls(n.unaryFilter.field);return le.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return le.create(ls(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return me.create(n.compositeFilter.filters.map(r=>KI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function cP(t){return tP[t]}function dP(t){return nP[t]}function hP(t){return rP[t]}function as(t){return{fieldPath:t.canonicalString()}}function ls(t){return Ce.fromServerFormat(t.fieldPath)}function QI(t){return t instanceof le?function(n){if(n.op==="=="){if(o0(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NAN"}};if(s0(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(o0(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NAN"}};if(s0(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:as(n.field),op:dP(n.op),value:n.value}}}(t):t instanceof me?function(n){const r=n.getFilters().map(i=>QI(i));return r.length===1?r[0]:{compositeFilter:{op:hP(n.op),filters:r}}}(t):Q(54877,{filter:t})}function fP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function YI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,r,i,s=J.min(),o=J.min(),a=ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new bn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.yt=e}}function pP(t,e){let n;if(e.document)n=oP(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=W.fromSegments(e.noDocument.path),i=Mi(e.noDocument.readTime);n=De.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q(56709);{const r=W.fromSegments(e.unknownDocument.path),i=Mi(e.unknownDocument.version);n=De.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new de(i[0],i[1]);return J.fromTimestamp(s)}(e.readTime)),n}function x0(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Cc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Tc(s,o.key),fields:o.data.value.mapValue.fields,updateTime:eo(s,o.version.toTimestamp()),createTime:eo(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Di(e.version)};else{if(!e.isUnknownDocument())return Q(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Di(e.version)}}return r}function Cc(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Di(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mi(t){const e=new de(t.seconds,t.nanoseconds);return J.fromTimestamp(e)}function li(t,e){const n=(e.baseMutations||[]).map(s=>Zf(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Zf(t.yt,s)),i=de.fromMillis(e.localWriteTimeMs);return new Mm(e.batchId,i,n,r)}function ea(t){const e=Mi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Mi(t.lastLimboFreeSnapshotVersion):J.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return Y(o===1,1966,{count:o}),Kt(hd($I(s.documents[0])))}(t.query):function(s){return Kt(qI(s))}(t.query),new bn(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ze.fromBase64String(t.resumeToken))}function XI(t,e){const n=Di(e.snapshotVersion),r=Di(e.lastLimboFreeSnapshotVersion);let i;i=Ic(e.target)?HI(t.yt,e.target):GI(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ni(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ZI(t){const e=qI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qf(e,e.limit,"L"):e}function Ch(t,e){return new jm(e.largestBatchId,Zf(t.yt,e.overlayMutation))}function T0(t,e){const n=e.path.lastSegment();return[t,dt(e.path.popLast()),n]}function S0(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Di(r.readTime),documentKey:dt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{getBundleMetadata(e,n){return C0(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Mi(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return C0(e).put(function(i){return{bundleId:i.id,createTime:Di(vt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return A0(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:ZI(s.bundledQuery),readTime:Mi(s.readTime)}}(r)})}saveNamedQuery(e,n){return A0(e).put(function(i){return{name:i.name,readTime:Di(vt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function C0(t){return Ge(t,od)}function A0(t){return Ge(t,ad)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new yd(e,r)}getOverlay(e,n){return zo(e).get(T0(this.userId,n)).next(r=>r?Ch(this.serializer,r):null)}getOverlays(e,n){const r=yn();return P.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new jm(n,o);i.push(this.St(e,a))}),P.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(dt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(zo(e).Z(Uf,a))}),P.waitFor(s)}getOverlaysForCollection(e,n,r){const i=yn(),s=dt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return zo(e).J(Uf,o).next(a=>{for(const u of a){const d=Ch(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=yn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return zo(e).ee({index:nI,range:a},(u,d,f)=>{const p=Ch(this.serializer,d);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):f.done()}).next(()=>s)}St(e,n){return zo(e).put(function(i,s,o){const[a,u,d]=T0(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Sc(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function zo(t){return Ge(t,ld)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{bt(e){return Ge(e,Sm)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?ze.fromUint8Array(r):ze.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ee(e.integerValue));else if("doubleValue"in e){const r=Ee(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Ha(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Bn(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Un(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?pI(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):cd(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Q(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=Ks,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Ee(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),W.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ui.Kt=new ui;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=255;function yP(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function R0(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=yP(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class vP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=R0(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=R0(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(es),this.sn(255)}_n(){this.an(es),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===es?(this.sn(es),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===es?(this.an(es),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class _P{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class wP{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Bo{constructor(){this.cn=new vP,this.ln=new _P(this.cn),this.hn=new wP(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new ci(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Du(this.En),directionalValue:Du(this.dn),orderedDocumentKey:Du(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function rr(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=k0(t.En,e.En),n!==0?n:(n=k0(t.dn,e.dn),n!==0?n:W.comparator(t.In,e.In)))}function k0(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Du(t){return kE()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function b0(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class P0{constructor(e){this.mn=new fe((n,r)=>Ce.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Y(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Lf(e);if(n!==void 0&&!this.wn(n))return!1;const r=si(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.Sn(a,u)||!this.bn(this.fn[o++],u))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new fe(Ce.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Su(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Su(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Su(r.field,r.dir==="asc"?0:1)));return new gc(gc.UNKNOWN_ID,this.collectionId,n,Wa.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t){var n,r;if(Y(t instanceof le||t instanceof me,20012),t instanceof le){if(t instanceof xI){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>le.create(t.field,"==",s)))||[];return me.create(i,"or")}return t}const e=t.filters.map(i=>ex(i));return me.create(e,t.op)}function EP(t){if(t.getFilters().length===0)return[];const e=np(ex(t));return Y(tx(e),7391),ep(e)||tp(e)?[e]:e.getFilters()}function ep(t){return t instanceof le}function tp(t){return t instanceof me&&Pm(t)}function tx(t){return ep(t)||tp(t)||function(n){if(n instanceof me&&Gf(n)){for(const r of n.getFilters())if(!ep(r)&&!tp(r))return!1;return!0}return!1}(t)}function np(t){if(Y(t instanceof le||t instanceof me,34018),t instanceof le)return t;if(t.filters.length===1)return np(t.filters[0]);const e=t.filters.map(r=>np(r));let n=me.create(e,t.op);return n=Ac(n),tx(n)?n:(Y(n instanceof me,64498),Y(Js(n),40251),Y(n.filters.length>1,57927),n.filters.reduce((r,i)=>Lm(r,i)))}function Lm(t,e){let n;return Y(t instanceof le||t instanceof me,38388),Y(e instanceof le||e instanceof me,25473),n=t instanceof le?e instanceof le?function(i,s){return me.create([i,s],"and")}(t,e):N0(t,e):e instanceof le?N0(e,t):function(i,s){if(Y(i.filters.length>0&&s.filters.length>0,48005),Js(i)&&Js(s))return wI(i,s.getFilters());const o=Gf(i)?i:s,a=Gf(i)?s:i,u=o.filters.map(d=>Lm(d,a));return me.create(u,"or")}(t,e),Ac(n)}function N0(t,e){if(Js(e))return wI(e,t.getFilters());{const n=e.filters.map(r=>Lm(t,r));return me.create(n,"or")}}function Ac(t){if(Y(t instanceof le||t instanceof me,11850),t instanceof le)return t;const e=t.getFilters();if(e.length===1)return Ac(e[0]);if(vI(t))return t;const n=e.map(i=>Ac(i)),r=[];return n.forEach(i=>{i instanceof le?r.push(i):i instanceof me&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:me.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this.Cn=new zm}addToCollectionParentIndex(e,n){return this.Cn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Ot.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Ot.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}}class zm{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new fe(pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fe(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="IndexedDbIndexManager",ou=new Uint8Array(0);class xP{constructor(e,n){this.databaseId=n,this.vn=new zm,this.Fn=new qn(r=>Ni(r),(r,i)=>gl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:dt(i)};return M0(e).put(s)}return P.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[HE(n),""],!1,!0);return M0(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(gn(o.parent))}return r})}addFieldIndex(e,n){const r=Uo(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=ns(e);return s.next(a=>{o.put(S0(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Uo(e),i=ns(e),s=ts(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Uo(e),r=ts(e),i=ns(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return P.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new P0(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ts(e);let i=!0;const s=new Map;return P.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=se();const a=[];return P.forEach(s,(u,d)=>{B(D0,`Using index ${function(S){return`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(V=>`${V.fieldPath}:${V.kind}`).join(",")}`}(u)} to execute ${Ni(n)}`);const f=function(S,V){const j=Lf(V);if(j===void 0)return null;for(const z of xc(S,j.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(d,u),p=function(S,V){const j=new Map;for(const z of si(V))for(const x of xc(S,z.fieldPath))switch(x.op){case"==":case"in":j.set(z.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return j.set(z.fieldPath.canonicalString(),x.value),Array.from(j.values())}return null}(d,u),g=function(S,V){const j=[];let z=!0;for(const x of si(V)){const v=x.kind===0?d0(S,x.fieldPath,S.startAt):h0(S,x.fieldPath,S.startAt);j.push(v.value),z&&(z=v.inclusive)}return new Ys(j,z)}(d,u),w=function(S,V){const j=[];let z=!0;for(const x of si(V)){const v=x.kind===0?h0(S,x.fieldPath,S.endAt):d0(S,x.fieldPath,S.endAt);j.push(v.value),z&&(z=v.inclusive)}return new Ys(j,z)}(d,u),E=this.On(u,d,g),k=this.On(u,d,w),T=this.Nn(u,d,p),I=this.Bn(u.indexId,f,E,g.inclusive,k,w.inclusive,T);return P.forEach(I,_=>r.Y(_,n.limit).next(S=>{S.forEach(V=>{const j=W.fromSegments(V.documentKey);o.has(j)||(o=o.add(j),a.push(j))})}))}).next(()=>a)}return P.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=EP(me.create(e.filters,"and")).map(r=>Kf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),d=u/(n!=null?n.length:1),f=[];for(let p=0;p<u;++p){const g=n?this.Ln(n[p/d]):ou,w=this.kn(e,g,r[p%d],i),E=this.qn(e,g,s[p%d],o),k=a.map(T=>this.kn(e,g,T,!0));f.push(...this.createRange(w,E,k))}return f}kn(e,n,r,i){const s=new ci(e,W.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new ci(e,W.empty(),n,r);return i?s.An():s}xn(e,n){const r=new P0(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return P.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let d=new fe(Ce.comparator),f=!1;for(const p of u.filters)for(const g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:d=d.add(g.field));for(const p of u.orderBy)p.field.isKeyField()||(d=d.add(p.field));return d.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new Bo;for(const i of si(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);ui.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new Bo;return ui.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Bo;return ui.Kt.Dt(bm(this.databaseId,n),r.Pn(function(s){const o=si(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Bo);let s=0;for(const o of si(e)){const a=r[s++];for(const u of i)if(this.Un(n,o.fieldPath)&&Ja(a))i=this.Kn(i,o,a);else{const d=u.Pn(o.kind);ui.Kt.Dt(a,d)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Bo;u.seed(a.un()),ui.Kt.Dt(o,u.Pn(n.kind)),s.push(u)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof le&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Uo(e),i=ns(e);return(n?r.J(Bf,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return P.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(f,p){const g=p?new Wa(p.sequenceNumber,new Ot(Mi(p.readTime),new W(gn(p.documentKey)),p.largestBatchId)):Wa.empty(),w=f.fields.map(([E,k])=>new Su(Ce.fromServerFormat(E),k));return new gc(f.indexId,f.collectionGroup,w,g)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:te(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Uo(e),s=ns(e);return this.Gn(e).next(o=>i.J(Bf,IDBKeyRange.bound(n,n)).next(a=>P.forEach(a,u=>s.put(S0(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return P.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?P.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),P.forEach(a,u=>this.zn(e,i,u).next(d=>{const f=this.jn(s,u);return d.isEqual(f)?P.resolve():this.Jn(e,s,u,d,f)}))))})}Hn(e,n,r,i){return ts(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return ts(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=ts(e);let s=new fe(rr);return i.ee({index:tI,range:IDBKeyRange.only([r.indexId,this.uid,Du(this.$n(r,n))])},(o,a)=>{s=s.add(new ci(r.indexId,n,b0(a.arrayValue),b0(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new fe(rr);const i=this.Qn(n,e);if(i==null)return r;const s=Lf(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Ja(o))for(const a of o.arrayValue.values||[])r=r.add(new ci(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new ci(n.indexId,e.key,ou,i));return r}Jn(e,n,r,i,s){B(D0,"Updating index entries for document '%s'",n.key);const o=[];return function(u,d,f,p,g){const w=u.getIterator(),E=d.getIterator();let k=Zi(w),T=Zi(E);for(;k||T;){let I=!1,_=!1;if(k&&T){const S=f(k,T);S<0?_=!0:S>0&&(I=!0)}else k!=null?_=!0:I=!0;I?(p(T),T=Zi(E)):_?(g(k),k=Zi(w)):(k=Zi(w),T=Zi(E))}}(i,s,rr,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),P.waitFor(o)}Gn(e){let n=1;return ns(e).ee({index:eI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>rr(o,a)).filter((o,a,u)=>!a||rr(o,u[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=rr(o,e),u=rr(o,n);if(a===0)i[0]=e.An();else if(a>0&&u<0)i.push(o),i.push(o.An());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,ou,W.empty()),u=i[o+1].Vn(this.uid,ou,W.empty());s.push(IDBKeyRange.bound(a,u))}return s}Zn(e,n){return rr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(V0)}getMinOffset(e,n){return P.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||Q(44426))).next(V0)}}function M0(t){return Ge(t,Ka)}function ts(t){return Ge(t,ma)}function Uo(t){return Ge(t,Tm)}function ns(t){return Ge(t,pa)}function V0(t){Y(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Em(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ot(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nx=41943040;class lt{static withCacheSize(e){return new lt(e,lt.DEFAULT_COLLECTION_PERCENTILE,lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t,e,n){const r=t.store(tn),i=t.store(Ws),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.ee({range:o},(f,p,g)=>(a++,g.delete()));s.push(u.next(()=>{Y(a===1,47070,{batchId:n.batchId})}));const d=[];for(const f of n.mutations){const p=JE(e,f.key.path,n.batchId);s.push(i.delete(p)),d.push(f.key)}return P.waitFor(s).next(()=>d)}function Rc(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Q(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lt.DEFAULT_COLLECTION_PERCENTILE=10,lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lt.DEFAULT=new lt(nx,lt.DEFAULT_COLLECTION_PERCENTILE,lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lt.DISABLED=new lt(-1,0,0);class vd{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){Y(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new vd(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ir(e).ee({index:pi,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=us(e),o=ir(e);return o.add({}).next(a=>{Y(typeof a=="number",49019);const u=new Mm(a,n,r,i),d=function(w,E,k){const T=k.baseMutations.map(_=>Sc(w.yt,_)),I=k.mutations.map(_=>Sc(w.yt,_));return{userId:E,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:T,mutations:I}}(this.serializer,this.userId,u),f=[];let p=new fe((g,w)=>te(g.canonicalString(),w.canonicalString()));for(const g of i){const w=JE(this.userId,g.key.path,a);p=p.add(g.key.path.popLast()),f.push(o.put(d)),f.push(s.put(w,Yk))}return p.forEach(g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Xn[a]=u.keys()}),P.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return ir(e).get(n).next(r=>r?(Y(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),li(this.serializer,r)):null)}er(e,n){return this.Xn[n]?P.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ir(e).ee({index:pi,range:i},(o,a,u)=>{a.userId===this.userId&&(Y(a.batchId>=r,47524,{tr:r}),s=li(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=yi;return ir(e).ee({index:pi,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,yi],[this.userId,Number.POSITIVE_INFINITY]);return ir(e).J(pi,n).next(r=>r.map(i=>li(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Cu(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return us(e).ee({range:i},(o,a,u)=>{const[d,f,p]=o,g=gn(f);if(d===this.userId&&n.path.isEqual(g))return ir(e).get(p).next(w=>{if(!w)throw Q(61480,{nr:o,batchId:p});Y(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:p}),s.push(li(this.serializer,w))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new fe(te);const i=[];return n.forEach(s=>{const o=Cu(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=us(e).ee({range:a},(d,f,p)=>{const[g,w,E]=d,k=gn(w);g===this.userId&&s.path.isEqual(k)?r=r.add(E):p.done()});i.push(u)}),P.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Cu(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new fe(te);return us(e).ee({range:o},(u,d,f)=>{const[p,g,w]=u,E=gn(g);p===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(w)):f.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ir(e).get(s).next(o=>{if(o===null)throw Q(35274,{batchId:s});Y(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(li(this.serializer,o))}))}),P.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return rx(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),P.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return P.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return us(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=gn(s[1]);i.push(u)}else a.done()}).next(()=>{Y(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return ix(e,this.userId,n)}_r(e){return sx(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:yi,lastStreamToken:""})}}function ix(t,e,n){const r=Cu(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return us(t).ee({range:s,X:!0},(a,u,d)=>{const[f,p,g]=a;f===e&&p===i&&(o=!0),d.done()}).next(()=>o)}function ir(t){return Ge(t,tn)}function us(t){return Ge(t,Ws)}function sx(t){return Ge(t,Ga)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vi(0)}static cr(){return new Vi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Vi(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>J.fromTimestamp(new de(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>rs(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(Y(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return rs(e).ee((o,a)=>{const u=ea(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>P.waitFor(s)).next(()=>i)}forEachTarget(e,n){return rs(e).ee((r,i)=>{const s=ea(i);n(s)})}lr(e){return O0(e).get(_c).next(n=>(Y(n!==null,2888),n))}hr(e,n){return O0(e).put(_c,n)}Pr(e,n){return rs(e).put(XI(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ni(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return rs(e).ee({range:i,index:ZE},(o,a,u)=>{const d=ea(a);gl(n,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=hr(e);return n.forEach(o=>{const a=dt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),P.waitFor(i)}removeMatchingKeys(e,n,r){const i=hr(e);return P.forEach(n,s=>{const o=dt(s.path);return P.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=hr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=hr(e);let s=se();return i.ee({range:r,X:!0},(o,a,u)=>{const d=gn(o[1]),f=new W(d);s=s.add(f)}).next(()=>s)}containsKey(e,n){const r=dt(n.path),i=IDBKeyRange.bound([r],[HE(r)],!1,!0);let s=0;return hr(e).ee({index:xm,X:!0,range:i},([o,a],u,d)=>{o!==0&&(s++,d.done())}).next(()=>s>0)}At(e,n){return rs(e).get(n).next(r=>r?ea(r):null)}}function rs(t){return Ge(t,Hs)}function O0(t){return Ge(t,vi)}function hr(t){return Ge(t,Gs)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="LruGarbageCollector",SP=1048576;function L0([t,e],[n,r]){const i=te(t,n);return i===0?te(e,r):i}class CP{constructor(e){this.Ir=e,this.buffer=new fe(L0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();L0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ox{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){B(F0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gr(n)?B(F0,"Ignoring IndexedDB error during garbage collection: ",n):await Wi(n)}await this.Vr(3e5)})}}class AP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(Ht.ce);const r=new CP(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(j0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),ss()<=ae.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function ax(t,e){return new AP(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n){this.db=e,this.garbageCollector=ax(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return au(e,r)}removeReference(e,n,r){return au(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return au(e,n)}br(e,n){return function(i,s){let o=!1;return sx(i).te(a=>ix(i,a,s).next(u=>(u&&(o=!0),P.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const u=this.br(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,J.min()),hr(e).delete(function(p){return[0,dt(p.path)]}(o))))});i.push(u)}}).next(()=>P.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return au(e,n)}Sr(e,n){const r=hr(e);let i,s=Ht.ce;return r.ee({index:xm},([o,a],{path:u,sequenceNumber:d})=>{o===0?(s!==Ht.ce&&n(new W(gn(i)),s),s=d,i=u):s=Ht.ce}).next(()=>{s!==Ht.ce&&n(new W(gn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function au(t,e){return hr(t).put(function(r,i){return{targetId:0,path:dt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this.changes=new qn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,De.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ti(e).put(r)}removeEntry(e,n,r){return ti(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Cc(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=De.newInvalidDocument(n);return ti(e).ee({index:Au,range:IDBKeyRange.only($o(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:De.newInvalidDocument(n)};return ti(e).ee({index:Au,range:IDBKeyRange.only($o(n))},(i,s)=>{r={document:this.Cr(n,s),size:Rc(s)}}).next(()=>r)}getEntries(e,n){let r=Nt();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=Nt(),i=new xe(W.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,Rc(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return P.resolve();let i=new fe(U0);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound($o(i.first()),$o(i.last())),o=i.getIterator();let a=o.getNext();return ti(e).ee({index:Au,range:s},(u,d,f)=>{const p=W.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&U0(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?f.j($o(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Cc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ti(e).J(IDBKeyRange.bound(a,u,!0)).next(d=>{s==null||s.incrementDocumentReadCount(d.length);let f=Nt();for(const p of d){const g=this.Cr(W.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(yl(n,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f})}getAllFromCollectionGroup(e,n,r,i){let s=Nt();const o=B0(n,r),a=B0(n,Ot.max());return ti(e).ee({index:XE,range:IDBKeyRange.bound(o,a,!0)},(u,d,f)=>{const p=this.Cr(W.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(p.key,p),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new bP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return z0(e).get(zf).next(n=>(Y(!!n,20021),n))}Dr(e,n){return z0(e).put(zf,n)}Cr(e,n){if(n){const r=pP(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return De.newInvalidDocument(e)}}function ux(t){return new kP(t)}class bP extends lx{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new qn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new fe((s,o)=>te(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=x0(this.Nr.serializer,o);i=i.add(s.path.popLast());const d=Rc(u);r+=d-a.size,n.push(this.Nr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=x0(this.Nr.serializer,o.convertToNoDocument(J.min()));n.push(this.Nr.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),P.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function z0(t){return Ge(t,qa)}function ti(t){return Ge(t,vc)}function $o(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function B0(t,e){const n=e.documentKey.path.toArray();return[t,Cc(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function U0(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=te(n[s],r[s]),i)return i;return i=te(n.length,r.length),i||(i=te(n[n.length-2],r[r.length-2]),i||te(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_a(r.mutation,i,Gt.empty(),de.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const i=yn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Xo();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=yn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Nt();const o=va(),a=function(){return va()}();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof qr)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),_a(f.mutation,d,f.mutation.getFieldMask(),de.now())):o.set(d.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>a.set(d,new PP(f,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,n){const r=va();let i=new xe((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Gt.empty();f=a.applyToLocalView(d,f),r.set(u,f);const p=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,f=u.value,p=RI();f.forEach(g=>{if(!s.has(g)){const w=MI(n.get(g),r.get(g));w!==null&&p.set(g,w),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Db(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):P.resolve(yn());let a=$a,u=s;return o.next(d=>P.forEach(d,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(f)?P.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,se())).next(f=>({batchId:a,changes:AI(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=Xo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Xo();return this.indexManager.getCollectionParents(e,s).next(a=>P.forEach(a,u=>{const d=function(p,g){return new dd(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,De.newInvalidDocument(f)))});let a=Xo();return o.forEach((u,d)=>{const f=s.get(u);f!==void 0&&_a(f.mutation,d,Gt.empty(),de.now()),yl(n,d)&&(a=a.insert(u,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:vt(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:ZI(i.bundledQuery),readTime:vt(i.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.overlays=new xe(W.comparator),this.qr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){const r=yn();return P.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),P.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){const i=yn(),s=n.length+1,o=new W(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new xe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=yn(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=yn(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=i)););return P.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new jm(n,r));let s=this.qr.get(n);s===void 0&&(s=se(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.sessionToken=ze.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this.Qr=new fe(Ke.$r),this.Ur=new fe(Ke.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ke(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ke(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new W(new pe([])),r=new Ke(n,e),i=new Ke(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new W(new pe([])),r=new Ke(n,e),i=new Ke(n,e+1);let s=se();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ke(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ke{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return W.comparator(e.key,n.key)||te(e.Yr,n.Yr)}static Kr(e,n){return te(e.Yr,n.Yr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new fe(Ke.$r)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Mm(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Ke(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?yi:this.tr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ke(n,0),i=new Ke(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new fe(te);return n.forEach(i=>{const s=new Ke(i,0),o=new Ke(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),P.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;W.isDocumentKey(s)||(s=s.child(""));const o=new Ke(new W(s),0);let a=new fe(te);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.Yr)),!0)},o),P.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Y(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return P.forEach(n.mutations,i=>{const s=new Ke(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ke(n,0),i=this.Zr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.ri=e,this.docs=function(){return new xe(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():De.newInvalidDocument(n))}getEntries(e,n){let r=Nt();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():De.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Nt();const o=n.path,a=new W(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Em(qE(f),r)<=0||(i.has(f.key)||yl(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q(9500)}ii(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new OP(this)}getSize(e){return P.resolve(this.size)}}class OP extends lx{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.persistence=e,this.si=new qn(n=>Ni(n),gl),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.oi=0,this._i=new Bm,this.targetCount=0,this.ai=Vi.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),P.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Vi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Pr(n),P.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ht(0),this.li=!1,this.li=!0,this.hi=new MP,this.referenceDelegate=e(this),this.Pi=new FP(this),this.indexManager=new IP,this.remoteDocumentCache=function(i){return new jP(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new JI(n),this.Ii=new NP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new VP(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);const i=new LP(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return P.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class LP extends QE{constructor(e){super(),this.currentSequenceNumber=e}}class _d{constructor(e){this.persistence=e,this.Ri=new Bm,this.Vi=null}static mi(e){return new _d(e)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,r=>{const i=W.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,J.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class kc{constructor(e,n){this.persistence=e,this.pi=new qn(r=>dt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=ax(this,n)}static mi(e,n){return new kc(e,n)}Ei(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return P.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,J.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),P.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ku(e.data.value)),n}br(e,n,r){return P.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.serializer=e}k(e,n,r,i){const s=new id("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore(ml)}(e),function(u){u.createObjectStore(Ga,{keyPath:Qk}),u.createObjectStore(tn,{keyPath:Zv,autoIncrement:!0}).createIndex(pi,e0,{unique:!0}),u.createObjectStore(Ws)}(e),$0(e),function(u){u.createObjectStore(oi)}(e));let o=P.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore(Gs),u.deleteObjectStore(Hs),u.deleteObjectStore(vi)}(e),$0(e)),o=o.next(()=>function(u){const d=u.store(vi),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return d.put(_c,f)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,d){return d.store(tn).J().next(p=>{u.deleteObjectStore(tn),u.createObjectStore(tn,{keyPath:Zv,autoIncrement:!0}).createIndex(pi,e0,{unique:!0});const g=d.store(tn),w=p.map(E=>g.put(E));return P.waitFor(w)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore(qs,{keyPath:ib})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore(qa)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore(od,{keyPath:sb})})(e),function(u){u.createObjectStore(ad,{keyPath:ob})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){const d=u.createObjectStore(ld,{keyPath:fb});d.createIndex(Uf,pb,{unique:!1}),d.createIndex(nI,mb,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore(vc,{keyPath:Jk});d.createIndex(Au,Xk),d.createIndex(XE,Zk)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(oi))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore(Tm,{keyPath:ab,autoIncrement:!0}).createIndex(Bf,lb,{unique:!1}),u.createObjectStore(pa,{keyPath:ub}).createIndex(eI,cb,{unique:!1}),u.createObjectStore(ma,{keyPath:db}).createIndex(tI,hb,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(pa).clear()}).next(()=>{n.objectStore(ma).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(u){u.createObjectStore(Sm,{keyPath:gb})})(e)})),r<18&&i>=18&&kE()&&(o=o.next(()=>{n.objectStore(pa).clear()}).next(()=>{n.objectStore(ma).clear()})),o}wi(e){let n=0;return e.store(oi).ee((r,i)=>{n+=Rc(i)}).next(()=>{const r={byteSize:n};return e.store(qa).put(zf,r)})}yi(e){const n=e.store(Ga),r=e.store(tn);return n.J().next(i=>P.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,yi],[s.userId,s.lastAcknowledgedBatchId]);return r.J(pi,o).next(a=>P.forEach(a,u=>{Y(u.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});const d=li(this.serializer,u);return rx(e,s.userId,d).next(()=>{})}))}))}Si(e){const n=e.store(Gs),r=e.store(oi);return e.store(vi).get(_c).next(i=>{const s=[];return r.ee((o,a)=>{const u=new pe(o),d=function(p){return[0,dt(p)]}(u);s.push(n.get(d).next(f=>f?P.resolve():(p=>n.put({targetId:0,path:dt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>P.waitFor(s))})}bi(e,n){e.createObjectStore(Ka,{keyPath:rb});const r=n.store(Ka),i=new zm,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:dt(u)})}};return n.store(oi).ee({X:!0},(o,a)=>{const u=new pe(o);return s(u.popLast())}).next(()=>n.store(Ws).ee({X:!0},([o,a,u],d)=>{const f=gn(a);return s(f.popLast())}))}Di(e){const n=e.store(Hs);return n.ee((r,i)=>{const s=ea(i),o=XI(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(oi),i=[];return r.ee((s,o)=>{const a=n.store(vc),u=function(p){return p.document?new W(pe.fromString(p.document.name).popFirst(5)):p.noDocument?W.fromSegments(p.noDocument.path):p.unknownDocument?W.fromSegments(p.unknownDocument.path):Q(36783)}(o).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(d))}).next(()=>P.waitFor(i))}Fi(e,n){const r=n.store(tn),i=ux(this.serializer),s=new Um(_d.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(u=>{let d=a.get(u.userId)??se();li(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),P.forEach(a,(u,d)=>{const f=new Ze(d),p=yd.wt(this.serializer,f),g=s.getIndexManager(f),w=vd.wt(f,this.serializer,g,s.referenceDelegate);return new cx(i,w,p,g).recalculateAndSaveOverlaysForDocumentKeys(new $f(n,Ht.ce),u).next()})})}}function $0(t){t.createObjectStore(Gs,{keyPath:tb}).createIndex(xm,nb,{unique:!0}),t.createObjectStore(Hs,{keyPath:"targetId"}).createIndex(ZE,eb,{unique:!0}),t.createObjectStore(vi)}const sr="IndexedDbPersistence",Ah=18e5,Rh=5e3,kh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",BP="main";class $m{constructor(e,n,r,i,s,o,a,u,d,f,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=d,this.Oi=f,this.Ni=p,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!$m.v())throw new G(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new RP(this,i),this.$i=n+BP,this.serializer=new JI(u),this.Ui=new Mr(this.$i,this.Ni,new zP(this.serializer)),this.hi=new gP,this.Pi=new TP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ux(this.serializer),this.Ii=new mP,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&gt(sr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G(L.FAILED_PRECONDITION,kh);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Ht(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Gr(e))return B(sr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return B(sr,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Wo(e).get(Xi).next(n=>P.resolve(this.es(n)))}ts(e){return lu(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ah)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Ge(n,qs);return r.J().next(i=>{const s=this.ss(i,Ah),o=i.filter(a=>s.indexOf(a)===-1);return P.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?P.resolve(!0):Wo(e).get(Xi).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Rh)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new G(L.FAILED_PRECONDITION,kh);return!1}}return!(!this.networkEnabled||!this.inForeground)||lu(e).J().next(r=>this.ss(r,Rh).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&B(sr,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[ml,qs],e=>{const n=new $f(e,Ht.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>lu(e).J().next(n=>this.ss(n,Ah).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return vd.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xP(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return yd.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){B(sr,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===18?_b:u===17?oI:u===16?vb:u===15?Cm:u===14?sI:u===13?iI:u===12?yb:u===11?rI:void Q(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new $f(a,this.ci?this.ci.next():Ht.ce),n==="readwrite-primary"?this.Hi(o).next(u=>!!u||this.Yi(o)).next(u=>{if(!u)throw gt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new G(L.FAILED_PRECONDITION,KE);return r(o)}).next(u=>this.Xi(o).next(()=>u)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Wo(e).get(Xi).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Rh)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new G(L.FAILED_PRECONDITION,kh)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wo(e).put(Xi,n)}static v(){return Mr.v()}Zi(e){const n=Wo(e);return n.get(Xi).next(r=>this.es(r)?(B(sr,"Releasing primary lease."),n.delete(Xi)):P.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(gt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;RE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return B(sr,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gt(sr,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){gt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wo(t){return Ge(t,ml)}function lu(t){return Ge(t,qs)}function UP(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=se(),i=se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Wm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return RE()?8:YE(He())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $P;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ss()<=ae.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(ss()<=ae.DEBUG&&B("QueryEngine","Query:",os(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ss()<=ae.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kt(n))):P.resolve())}ys(e,n){if(f0(n))return P.resolve(null);let r=Kt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Qf(n,null,"F"),r=Kt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=se(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,a);return this.Cs(n,d,o,u.readTime)?this.ys(e,Qf(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,i){return f0(n)||i.isEqual(J.min())?P.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?P.resolve(null):(ss()<=ae.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),os(n)),this.vs(e,o,n,Uk(i,$a)).next(a=>a))})}Ds(e,n){let r=new fe(SI(e));return n.forEach((i,s)=>{yl(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return ss()<=ae.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",os(n)),this.ps.getDocumentsMatchingQuery(e,n,Ot.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="LocalStore",WP=3e8;class HP{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new xe(te),this.xs=new qn(s=>Ni(s),gl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function hx(t,e,n,r){return new HP(t,e,n,r)}async function fx(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=se();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:a}))})})}function GP(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,u,d,f){const p=d.batch,g=p.keys();let w=P.resolve();return g.forEach(E=>{w=w.next(()=>f.getEntry(u,E)).next(k=>{const T=d.docVersions.get(E);Y(T!==null,48541),k.version.compareTo(T)<0&&(p.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),f.addEntry(k)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=se();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function px(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function qP(t,e){const n=ne(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;a.push(n.Pi.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,f.addedDocuments,p)));let w=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(ze.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),i=i.insert(p,w),function(k,T,I){return k.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=WP?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(g,w,f)&&a.push(n.Pi.updateTargetData(s,w))});let u=Nt(),d=se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(KP(s,o,e.documentUpdates).next(f=>{u=f.ks,d=f.qs})),!r.isEqual(J.min())){const f=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return P.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.Ms=i,s))}function KP(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Nt();return n.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):B(Hm,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:i}})}function QP(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=yi),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YP(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new bn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function rp(t,e,n){const r=ne(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Gr(o))throw o;B(Hm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function W0(t,e,n){const r=ne(t);let i=J.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=ne(u),g=p.xs.get(f);return g!==void 0?P.resolve(p.Ms.get(g)):p.Pi.getTargetData(d,f)}(r,o,Kt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:J.min(),n?s:se())).next(a=>(JP(r,Vb(e),a),{documents:a,Qs:s})))}function JP(t,e,n){let r=t.Os.get(e)||J.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class H0{constructor(){this.activeTargetIds=Bb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mx{constructor(){this.Mo=new H0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new H0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="ConnectivityMonitor";class q0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){B(G0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){B(G0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu=null;function ip(){return uu===null?uu=function(){return 268435456+Math.round(2147483648*Math.random())}():uu++,"0x"+uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh="RestConnection",ZP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class e5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===wc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=ip(),a=this.zo(e,n.toUriEncodedString());B(bh,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:d}=new URL(a),f=lo(d);return this.Jo(e,a,u,r,f).then(p=>(B(bh,`Received RPC '${e}' ${o}: `,p),p),p=>{throw bi(bh,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+co}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=ZP[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class n5 extends e5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=ip();return new Promise((a,u)=>{const d=new FE;d.setWithCredentials(!0),d.listenOnce(LE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Tu.NO_ERROR:const p=d.getResponseJson();B(at,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Tu.TIMEOUT:B(at,`RPC '${e}' ${o} timed out`),u(new G(L.DEADLINE_EXCEEDED,"Request time out"));break;case Tu.HTTP_ERROR:const g=d.getStatus();if(B(at,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const E=w==null?void 0:w.error;if(E&&E.status&&E.message){const k=function(I){const _=I.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(_)>=0?_:L.UNKNOWN}(E.status);u(new G(k,E.message))}else u(new G(L.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new G(L.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{B(at,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(i);B(at,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",f,r,15)})}T_(e,n,r){const i=ip(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=UE(),a=BE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");B(at,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);this.I_(p);let g=!1,w=!1;const E=new t5({Yo:T=>{w?B(at,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(g||(B(at,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),B(at,`RPC '${e}' stream ${i} sending:`,T),p.send(T))},Zo:()=>p.close()}),k=(T,I,_)=>{T.listen(I,S=>{try{_(S)}catch(V){setTimeout(()=>{throw V},0)}})};return k(p,Jo.EventType.OPEN,()=>{w||(B(at,`RPC '${e}' stream ${i} transport opened.`),E.o_())}),k(p,Jo.EventType.CLOSE,()=>{w||(w=!0,B(at,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(p))}),k(p,Jo.EventType.ERROR,T=>{w||(w=!0,bi(at,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),E.a_(new G(L.UNAVAILABLE,"The operation could not be completed")))}),k(p,Jo.EventType.MESSAGE,T=>{var I;if(!w){const _=T.data[0];Y(!!_,16349);const S=_,V=(S==null?void 0:S.error)||((I=S[0])==null?void 0:I.error);if(V){B(at,`RPC '${e}' stream ${i} received error:`,V);const j=V.status;let z=function(C){const R=Oe[C];if(R!==void 0)return OI(R)}(j),x=V.message;z===void 0&&(z=L.INTERNAL,x="Unknown error status: "+j+" with message "+V.message),w=!0,E.a_(new G(z,x)),p.close()}else B(at,`RPC '${e}' stream ${i} received:`,_),E.u_(_)}}),k(a,zE.STAT_EVENT,T=>{T.stat===Of.PROXY?B(at,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Of.NOPROXY&&B(at,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(){return typeof window<"u"?window:null}function Mu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t){return new iP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="PersistentStream";class yx{constructor(e,n,r,i,s,o,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(gt(n.toString()),gt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new G(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return B(K0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(B(K0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i5 extends yx{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=aP(this.serializer,e),r=function(s){if(!("targetChange"in s))return J.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?vt(o.readTime):J.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Xf(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Ic(u)?{documents:HI(s,u)}:{query:GI(s,u).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=zI(s,o.resumeToken);const d=Yf(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=eo(s,o.snapshotVersion.toTimestamp());const d=Yf(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const r=uP(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Xf(this.serializer),n.removeTarget=e,this.q_(n)}}class s5 extends yx{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Y(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Y(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Y(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lP(e.writeResults,e.commitTime),r=vt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Xf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Sc(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{}class a5 extends o5{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Jf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(L.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Jf(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class l5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gt(n),this.aa=!1):B("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="RemoteStore";class u5{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Gi(this)&&(B(ji,"Restarting streams for network reachability change."),await async function(u){const d=ne(u);d.Ea.add(4),await _l(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Ed(d)}(this))})}),this.Ra=new l5(r,i)}}async function Ed(t){if(Gi(t))for(const e of t.da)await e(!0)}async function _l(t){for(const e of t.da)await e(!1)}function vx(t,e){const n=ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Qm(n)?Km(n):fo(n).O_()&&qm(n,e))}function Gm(t,e){const n=ne(t),r=fo(n);n.Ia.delete(e),r.O_()&&_x(n,e),n.Ia.size===0&&(r.O_()?r.L_():Gi(n)&&n.Ra.set("Unknown"))}function qm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fo(t).Y_(e)}function _x(t,e){t.Va.Ue(e),fo(t).Z_(e)}function Km(t){t.Va=new eP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),fo(t).start(),t.Ra.ua()}function Qm(t){return Gi(t)&&!fo(t).x_()&&t.Ia.size>0}function Gi(t){return ne(t).Ea.size===0}function wx(t){t.Va=void 0}async function c5(t){t.Ra.set("Online")}async function d5(t){t.Ia.forEach((e,n)=>{qm(t,e)})}async function h5(t,e){wx(t),Qm(t)?(t.Ra.ha(e),Km(t)):t.Ra.set("Unknown")}async function f5(t,e,n){if(t.Ra.set("Online"),e instanceof LI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){B(ji,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bc(t,r)}else if(e instanceof Nu?t.Va.Ze(e):e instanceof FI?t.Va.st(e):t.Va.tt(e),!n.isEqual(J.min()))try{const r=await px(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.Ia.get(d);f&&s.Ia.set(d,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const f=s.Ia.get(u);if(!f)return;s.Ia.set(u,f.withResumeToken(ze.EMPTY_BYTE_STRING,f.snapshotVersion)),_x(s,u);const p=new bn(f.target,u,d,f.sequenceNumber);qm(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){B(ji,"Failed to raise snapshot:",r),await bc(t,r)}}async function bc(t,e,n){if(!Gr(e))throw e;t.Ea.add(1),await _l(t),t.Ra.set("Offline"),n||(n=()=>px(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B(ji,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ed(t)})}function Ex(t,e){return e().catch(n=>bc(t,n,e))}async function wl(t){const e=ne(t),n=zr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yi;for(;p5(e);)try{const i=await QP(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,m5(e,i)}catch(i){await bc(e,i)}Ix(e)&&xx(e)}function p5(t){return Gi(t)&&t.Ta.length<10}function m5(t,e){t.Ta.push(e);const n=zr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Ix(t){return Gi(t)&&!zr(t).x_()&&t.Ta.length>0}function xx(t){zr(t).start()}async function g5(t){zr(t).ra()}async function y5(t){const e=zr(t);for(const n of t.Ta)e.ea(n.mutations)}async function v5(t,e,n){const r=t.Ta.shift(),i=Vm.from(r,e,n);await Ex(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await wl(t)}async function _5(t,e){e&&zr(t).X_&&await async function(r,i){if(function(o){return Jb(o)&&o!==L.ABORTED}(i.code)){const s=r.Ta.shift();zr(r).B_(),await Ex(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await wl(r)}}(t,e),Ix(t)&&xx(t)}async function Q0(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),B(ji,"RemoteStore received new credentials");const r=Gi(n);n.Ea.add(3),await _l(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ed(n)}async function w5(t,e){const n=ne(t);e?(n.Ea.delete(2),await Ed(n)):e||(n.Ea.add(2),await _l(n),n.Ra.set("Unknown"))}function fo(t){return t.ma||(t.ma=function(n,r,i){const s=ne(n);return s.sa(),new i5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:c5.bind(null,t),t_:d5.bind(null,t),r_:h5.bind(null,t),H_:f5.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Qm(t)?Km(t):t.Ra.set("Unknown")):(await t.ma.stop(),wx(t))})),t.ma}function zr(t){return t.fa||(t.fa=function(n,r,i){const s=ne(n);return s.sa(),new s5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:g5.bind(null,t),r_:_5.bind(null,t),ta:y5.bind(null,t),na:v5.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await wl(t)):(await t.fa.stop(),t.Ta.length>0&&(B(ji,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Ym(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jm(t,e){if(gt("AsyncQueue",`${e}: ${t}`),Gr(t))return new G(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{static emptySet(e){return new ks(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Xo(),this.sortedSet=new xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ks)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ks;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.ga=new xe(W.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Q(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class to{constructor(e,n,r,i,s,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new to(e,n,ks.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class I5{constructor(){this.queries=J0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ne(n),s=i.queries;i.queries=J0(),s.forEach((o,a)=>{for(const u of a.Sa)u.onError(r)})})(this,new G(L.ABORTED,"Firestore shutting down"))}}function J0(){return new qn(t=>TI(t),fd)}async function x5(t,e){const n=ne(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new E5,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Jm(o,`Initialization of query '${os(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Xm(n)}async function T5(t,e){const n=ne(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function S5(t,e){const n=ne(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&Xm(n)}function C5(t,e,n){const r=ne(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Xm(t){t.Ca.forEach(e=>{e.next()})}var sp,X0;(X0=sp||(sp={})).Ma="default",X0.Cache="cache";class A5{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new to(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=to.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.key=e}}class Sx{constructor(e){this.key=e}}class R5{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=SI(e),this.tu=new ks(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Y0,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),w=yl(this.query,p)?p:null,E=!!g&&this.mutatedKeys.has(g.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let T=!1;g&&w?g.data.isEqual(w.data)?E!==k&&(r.track({type:3,doc:w}),T=!0):this.su(g,w)||(r.track({type:2,doc:w}),T=!0,(u&&this.eu(w,u)>0||d&&this.eu(w,d)<0)&&(a=!0)):!g&&w?(r.track({type:0,doc:w}),T=!0):g&&!w&&(r.track({type:1,doc:g}),T=!0,(u||d)&&(a=!0)),T&&(w?(o=o.add(w),s=k?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,p)=>function(w,E){const k=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:T})}};return k(w)-k(E)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new to(this.query,e.tu,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Y0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Sx(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Tx(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=se();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return to.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zm="SyncEngine";class k5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class b5{constructor(e){this.key=e,this.hu=!1}}class P5{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new qn(a=>TI(a),fd),this.Iu=new Map,this.Eu=new Set,this.du=new xe(W.comparator),this.Au=new Map,this.Ru=new Bm,this.Vu={},this.mu=new Map,this.fu=Vi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function N5(t,e,n=!0){const r=Px(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Cx(r,e,n,!0),i}async function D5(t,e){const n=Px(t);await Cx(n,e,!0,!1)}async function Cx(t,e,n,r){const i=await YP(t.localStore,Kt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await M5(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&vx(t.remoteStore,i),a}async function M5(t,e,n,r,i){t.pu=(p,g,w)=>async function(k,T,I,_){let S=T.view.ru(I);S.Cs&&(S=await W0(k.localStore,T.query,!1).then(({documents:x})=>T.view.ru(x,S)));const V=_&&_.targetChanges.get(T.targetId),j=_&&_.targetMismatches.get(T.targetId)!=null,z=T.view.applyChanges(S,k.isPrimaryClient,V,j);return e_(k,T.targetId,z.au),z.snapshot}(t,p,g,w);const s=await W0(t.localStore,e,!0),o=new R5(e,s.Qs),a=o.ru(s.documents),u=vl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(a,t.isPrimaryClient,u);e_(t,n,d.au);const f=new k5(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function V5(t,e,n){const r=ne(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!fd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await rp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Gm(r.remoteStore,i.targetId),op(r,i.targetId)}).catch(Wi)):(op(r,i.targetId),await rp(r.localStore,i.targetId,!0))}async function j5(t,e){const n=ne(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gm(n.remoteStore,r.targetId))}async function O5(t,e,n){const r=Nx(t);try{const i=await function(o,a){const u=ne(o),d=de.now(),f=a.reduce((w,E)=>w.add(E.key),se());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let E=Nt(),k=se();return u.Ns.getEntries(w,f).next(T=>{E=T,E.forEach((I,_)=>{_.isValidDocument()||(k=k.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,E)).next(T=>{p=T;const I=[];for(const _ of a){const S=Qb(_,p.get(_.key).overlayedDocument);S!=null&&I.push(new qr(_.key,S,gI(S.value.mapValue),Dt.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,I,a)}).next(T=>{g=T;const I=T.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(w,T.batchId,I)})}).then(()=>({batchId:g.batchId,changes:AI(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new xe(te)),d=d.insert(a,u),o.Vu[o.currentUser.toKey()]=d}(r,i.batchId,n),await El(r,i.changes),await wl(r.remoteStore)}catch(i){const s=Jm(i,"Failed to persist write");n.reject(s)}}async function Ax(t,e){const n=ne(t);try{const r=await qP(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(Y(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Y(o.hu,14607):i.removedDocuments.size>0&&(Y(o.hu,42227),o.hu=!1))}),await El(n,r,e)}catch(r){await Wi(r)}}function Z0(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=ne(o);u.onlineState=a;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.Sa)g.va(a)&&(d=!0)}),d&&Xm(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function F5(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new xe(W.comparator);o=o.insert(s,De.newNoDocument(s,J.min()));const a=se().add(s),u=new gd(J.min(),new Map,new xe(te),o,a);await Ax(r,u),r.du=r.du.remove(s),r.Au.delete(e),eg(r)}else await rp(r.localStore,e,!1).then(()=>op(r,e,n)).catch(Wi)}async function L5(t,e){const n=ne(t),r=e.batch.batchId;try{const i=await GP(n.localStore,e);kx(n,r,null),Rx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await El(n,i)}catch(i){await Wi(i)}}async function z5(t,e,n){const r=ne(t);try{const i=await function(o,a){const u=ne(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,a).next(p=>(Y(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);kx(r,e,n),Rx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await El(r,i)}catch(i){await Wi(i)}}function Rx(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function kx(t,e,n){const r=ne(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function op(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||bx(t,r)})}function bx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Gm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),eg(t))}function e_(t,e,n){for(const r of n)r instanceof Tx?(t.Ru.addReference(r.key,e),B5(t,r)):r instanceof Sx?(B(Zm,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||bx(t,r.key)):Q(19791,{wu:r})}function B5(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(B(Zm,"New document in limbo: "+n),t.Eu.add(r),eg(t))}function eg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new W(pe.fromString(e)),r=t.fu.next();t.Au.set(r,new b5(n)),t.du=t.du.insert(n,r),vx(t.remoteStore,new bn(Kt(hd(n.path)),r,"TargetPurposeLimboResolution",Ht.ce))}}async function El(t,e,n){const r=ne(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{o.push(r.pu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){i.push(d);const p=Wm.As(u.targetId,d);s.push(p)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,d){const f=ne(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(d,g=>P.forEach(g.Es,w=>f.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>P.forEach(g.ds,w=>f.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!Gr(p))throw p;B(Hm,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const w=f.Ms.get(g),E=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(E);f.Ms=f.Ms.insert(g,k)}}}(r.localStore,s))}async function U5(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){B(Zm,"User change. New user:",e.toKey());const r=await fx(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(u=>{u.reject(new G(L.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await El(n,r.Ls)}}function $5(t,e){const n=ne(t),r=n.Au.get(e);if(r&&r.hu)return se().add(r.key);{let i=se();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function Px(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ax.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F5.bind(null,e),e.Pu.H_=S5.bind(null,e.eventManager),e.Pu.yu=C5.bind(null,e.eventManager),e}function Nx(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=z5.bind(null,e),e}class el{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return hx(this.persistence,new dx,e.initialUser,this.serializer)}Cu(e){return new Um(_d.mi,this.serializer)}Du(e){return new mx}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}el.provider={build:()=>new el};class W5 extends el{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Y(this.persistence.referenceDelegate instanceof kc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ox(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?lt.withCacheSize(this.cacheSizeBytes):lt.DEFAULT;return new Um(r=>kc.mi(r,n),this.serializer)}}class H5 extends el{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Nx(this.xu.syncEngine),await wl(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return hx(this.persistence,new dx,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new ox(r,e.asyncQueue,n)}Mu(e,n){const r=new Gk(n,this.persistence);return new Hk(e.asyncQueue,r)}Cu(e){const n=UP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?lt.withCacheSize(this.cacheSizeBytes):lt.DEFAULT;return new $m(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,r5(),Mu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new mx}}class Pc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Z0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=U5.bind(null,this.syncEngine),await w5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new I5}()}createDatastore(e){const n=wd(e.databaseInfo.databaseId),r=function(s){return new n5(s)}(e.databaseInfo);return function(s,o,a,u){return new a5(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new u5(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Z0(this.syncEngine,n,0),function(){return q0.v()?new q0:new XP}())}createSyncEngine(e,n){return function(i,s,o,a,u,d,f){const p=new P5(i,s,o,a,u,d);return f&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ne(i);B(ji,"RemoteStore shutting down."),s.Ea.add(5),await _l(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Pc.provider={build:()=>new Pc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="FirestoreClient";class q5{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ze.UNAUTHENTICATED,this.clientId=_m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{B(Br,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(B(Br,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ph(t,e){t.asyncQueue.verifyOperationInProgress(),B(Br,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await fx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function t_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await K5(t);B(Br,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Q0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Q0(e.remoteStore,i)),t._onlineComponents=e}async function K5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B(Br,"Using user provided OfflineComponentProvider");try{await Ph(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;bi("Error using user provided cache. Falling back to memory cache: "+n),await Ph(t,new el)}}else B(Br,"Using default OfflineComponentProvider"),await Ph(t,new W5(void 0));return t._offlineComponents}async function Dx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B(Br,"Using user provided OnlineComponentProvider"),await t_(t,t._uninitializedComponentsProvider._online)):(B(Br,"Using default OnlineComponentProvider"),await t_(t,new Pc))),t._onlineComponents}function Q5(t){return Dx(t).then(e=>e.syncEngine)}async function Y5(t){const e=await Dx(t),n=e.eventManager;return n.onListen=N5.bind(null,e.syncEngine),n.onUnlisten=V5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=D5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=j5.bind(null,e.syncEngine),n}function J5(t,e,n={}){const r=new Mn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,d){const f=new G5({next:g=>{f.Nu(),o.enqueueAndForget(()=>T5(s,p));const w=g.docs.has(a);!w&&g.fromCache?d.reject(new G(L.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new G(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new A5(hd(a.path),f,{includeMetadataChanges:!0,qa:!0});return x5(s,p)}(await Y5(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="firestore.googleapis.com",r_=!0;class i_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vx,this.ssl=r_}else this.host=e.host,this.ssl=e.ssl??r_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SP)throw new G(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mx(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bk;switch(r.type){case"firstParty":return new Mk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=n_.get(n);r&&(B("ComponentProvider","Removing Datastore"),n_.delete(n),r.terminate())}(this),Promise.resolve()}}function X5(t,e,n,r={}){var d;t=$s(t,tg);const i=lo(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(SE(`https://${a}`),CE("Firestore",!0)),s.host!==Vx&&s.host!==a&&bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:a,ssl:i,emulatorOptions:r};if(!Ai(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Ze.MOCK_USER;else{f=iR(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new G(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ze(g)}t._authCredentials=new Pk(new WE(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ng(this.firestore,e,this._query)}}class Ye{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ye(this.firestore,e,this._key)}toJSON(){return{type:Ye._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(pl(n,Ye._jsonSchema))return new Ye(e,r||null,new W(pe.fromString(n.referencePath)))}}Ye._jsonSchemaVersion="firestore/documentReference/1.0",Ye._jsonSchema={type:Le("string",Ye._jsonSchemaVersion),referencePath:Le("string")};class tl extends ng{constructor(e,n,r){super(e,n,hd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ye(this.firestore,null,new W(e))}withConverter(e){return new tl(this.firestore,e,this._path)}}function s_(t,e,...n){if(t=jt(t),arguments.length===1&&(e=_m.newId()),zk("doc","path",e),t instanceof tg){const r=pe.fromString(e,...n);return Kv(r),new Ye(t,null,new W(r))}{if(!(t instanceof Ye||t instanceof tl))throw new G(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return Kv(r),new Ye(t.firestore,t instanceof tl?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="AsyncQueue";class a_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gx(this,"async_queue_retry"),this._c=()=>{const r=Mu();r&&B(o_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Mu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Mn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gr(e))throw e;B(o_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,gt("INTERNAL UNHANDLED ERROR: ",l_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Ym.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Q(47125,{Pc:l_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function l_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Id extends tg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new a_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new a_(e),this._firestoreClient=void 0,await e}}}function Z5(t,e){const n=typeof t=="object"?t:ME(),r=typeof t=="string"?t:wc,i=ym(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=nR("firestore");s&&X5(i,...s)}return i}function jx(t){if(t._terminated)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Ox(t),t._firestoreClient}function Ox(t){var r,i,s;const e=t._freezeSettings(),n=function(a,u,d,f){return new Eb(a,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Mx(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new q5(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}function eN(t,e){bi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return tN(t,Pc.provider,{build:r=>new H5(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function tN(t,e,n){if((t=$s(t,Id))._firestoreClient||t._terminated)throw new G(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new G(L.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Ox(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $t(ze.fromBase64String(e))}catch(n){throw new G(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $t(ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pl(e,$t._jsonSchema))return $t.fromBase64String(e.bytes)}}$t._jsonSchemaVersion="firestore/bytes/1.0",$t._jsonSchema={type:Le("string",$t._jsonSchemaVersion),bytes:Le("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ce(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:En._jsonSchemaVersion}}static fromJSON(e){if(pl(e,En._jsonSchema))return new En(e.latitude,e.longitude)}}En._jsonSchemaVersion="firestore/geoPoint/1.0",En._jsonSchema={type:Le("string",En._jsonSchemaVersion),latitude:Le("number"),longitude:Le("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:In._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pl(e,In._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new In(e.vectorValues);throw new G(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}In._jsonSchemaVersion="firestore/vectorValue/1.0",In._jsonSchema={type:Le("string",In._jsonSchemaVersion),vectorValues:Le("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=/^__.*__$/;class rN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ho(e,this.data,n,this.fieldTransforms)}}function Lx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:t})}}class ig{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ig({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Lx(this.Ac)&&nN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class iN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wd(e)}Cc(e,n,r,i=!1){return new ig({Ac:e,methodName:n,Dc:r,path:Ce.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sN(t){const e=t._freezeSettings(),n=wd(t._databaseId);return new iN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oN(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);$x("Data must be an object, but it was:",o,r);const a=Bx(r,o);let u,d;if(s.merge)u=new Gt(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const g=aN(e,p,n);if(!o.contains(g))throw new G(L.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);uN(f,g)||f.push(g)}u=new Gt(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new rN(new xt(a),u,d)}function zx(t,e){if(Ux(t=jt(t)))return $x("Unsupported field value:",e,t),Bx(t,e);if(t instanceof Fx)return function(r,i){if(!Lx(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=zx(a,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ub(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=de.fromDate(r);return{timestampValue:eo(i.serializer,s)}}if(r instanceof de){const s=new de(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:eo(i.serializer,s)}}if(r instanceof En)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $t)return{bytesValue:zI(i.serializer,r._byteString)};if(r instanceof Ye){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Fm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof In)return function(o,a){return{mapValue:{fields:{[Rm]:{stringValue:km},[Ks]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.Sc("VectorValues must only contain numeric values.");return Nm(a.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${wm(r)}`)}(t,e)}function Bx(t,e){const n={};return aI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(t,(r,i)=>{const s=zx(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Ux(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof de||t instanceof En||t instanceof $t||t instanceof Ye||t instanceof Fx||t instanceof In)}function $x(t,e,n){if(!Ux(n)||!GE(n)){const r=wm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function aN(t,e,n){if((e=jt(e))instanceof rg)return e._internalPath;if(typeof e=="string")return Wx(t,e);throw Nc("Field path arguments must be of type string or ",t,!1,void 0,n)}const lN=new RegExp("[~\\*/\\[\\]]");function Wx(t,e,n){if(e.search(lN)>=0)throw Nc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rg(...e.split("."))._internalPath}catch{throw Nc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new G(L.INVALID_ARGUMENT,a+t+u)}function uN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cN extends Hx{data(){return super.data()}}function Gx(t,e){return typeof e=="string"?Wx(t,e):e instanceof rg?e._internalPath:e._delegate._internalPath}class dN{convertValue(e,n="none"){switch(Fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ee(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Un(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Ks].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Ee(o.doubleValue));return new In(n)}convertGeoPoint(e){return new En(Ee(e.latitude),Ee(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ud(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qa(e));default:return null}}convertTimestamp(e){const n=Bn(e);return new de(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);Y(YI(r),9688,{name:e});const i=new Pi(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(n)||gt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wi extends Hx{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=wi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wi._jsonSchemaVersion="firestore/documentSnapshot/1.0",wi._jsonSchema={type:Le("string",wi._jsonSchemaVersion),bundleSource:Le("string","DocumentSnapshot"),bundleName:Le("string"),bundle:Le("string")};class Vu extends wi{data(e={}){return super.data(e)}}class wa{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vu(this._firestore,this._userDataWriter,r.key,r,new ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new Vu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ta(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new Vu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ta(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:fN(a.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_m.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){t=$s(t,Ye);const e=$s(t.firestore,Id);return J5(jx(e),t._key).then(n=>vN(e,t,n))}wa._jsonSchemaVersion="firestore/querySnapshot/1.0",wa._jsonSchema={type:Le("string",wa._jsonSchemaVersion),bundleSource:Le("string","QuerySnapshot"),bundleName:Le("string"),bundle:Le("string")};class mN extends dN{constructor(e){super(),this.firestore=e}convertBytes(e){return new $t(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,n)}}function gN(t,e,n){t=$s(t,Ye);const r=$s(t.firestore,Id),i=hN(t.converter,e);return yN(r,[oN(sN(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Dt.none())])}function yN(t,e){return function(r,i){const s=new Mn;return r.asyncQueue.enqueueAndForget(async()=>O5(await Q5(r),i,s)),s.promise}(jx(t),e)}function vN(t,e,n){const r=n.docs.get(e._key),i=new mN(t);return new wi(t,i,e._key,r,new ta(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){co=i})(uo),Bs(new Ri("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Id(new Nk(r.getProvider("auth-internal")),new Vk(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pi(d.options.projectId,f)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Nr(Wv,Hv,e),Nr(Wv,Hv,"esm2020")})();function qx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _N=qx,Kx=new hl("auth","Firebase",qx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new mm("@firebase/auth");function wN(t,...e){Dc.logLevel<=ae.WARN&&Dc.warn(`Auth (${uo}): ${t}`,...e)}function ju(t,...e){Dc.logLevel<=ae.ERROR&&Dc.error(`Auth (${uo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t,...e){throw sg(t,...e)}function xn(t,...e){return sg(t,...e)}function Qx(t,e,n){const r={..._N(),[e]:n};return new hl("auth","Firebase",r).create(e,{appName:t.name})}function Vn(t){return Qx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Kx.create(t,...e)}function X(t,e,...n){if(!t)throw sg(e,...n)}function Pn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ju(e),new Error(e)}function $n(t,e){t||Pn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function EN(){return u_()==="http:"||u_()==="https:"}function u_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EN()||uR()||"connection"in navigator)?navigator.onLine:!0}function xN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n){this.shortDelay=e,this.longDelay=n,$n(n>e,"Short delay should be less than long delay!"),this.isMobile=aR()||cR()}get(){return IN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t,e){$n(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CN=new Il(3e4,6e4);function Kr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Qr(t,e,n,r,i={}){return Jx(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=fl({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...s};return lR()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&lo(t.emulatorConfig.host)&&(d.credentials="include"),Yx.fetch()(await Xx(t,t.config.apiHost,n,a),d)})}async function Jx(t,e,n){t._canInitEmulator=!1;const r={...TN,...e};try{const i=new RN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw cu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,d]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw cu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw cu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw cu(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Qx(t,f,d);ln(t,f)}}catch(i){if(i instanceof Gn)throw i;ln(t,"network-request-failed",{message:String(i)})}}async function xl(t,e,n,r,i={}){const s=await Qr(t,e,n,r,i);return"mfaPendingCredential"in s&&ln(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Xx(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?og(t.config,i):`${t.config.apiScheme}://${i}`;return SN.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function AN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xn(this.auth,"network-request-failed")),CN.get())})}}function cu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=xn(t,e,r);return i.customData._tokenResponse=n,i}function c_(t){return t!==void 0&&t.enterprise!==void 0}class kN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return AN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bN(t,e){return Qr(t,"GET","/v2/recaptchaConfig",Kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(t,e){return Qr(t,"POST","/v1/accounts:delete",e)}async function Mc(t,e){return Qr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NN(t,e=!1){const n=jt(t),r=await n.getIdToken(e),i=ag(r);X(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ea(Nh(i.auth_time)),issuedAtTime:Ea(Nh(i.iat)),expirationTime:Ea(Nh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Nh(t){return Number(t)*1e3}function ag(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ju("JWT malformed, contained fewer than 3 sections"),null;try{const i=wE(n);return i?JSON.parse(i):(ju("Failed to decode base64 JWT payload"),null)}catch(i){return ju("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function d_(t){const e=ag(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gn&&DN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function DN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ea(this.lastLoginAt),this.creationTime=Ea(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(t){var p;const e=t.auth,n=await t.getIdToken(),r=await nl(t,Mc(e,{idToken:n}));X(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(p=i.providerUserInfo)!=null&&p.length?Zx(i.providerUserInfo):[],o=jN(t.providerData,s),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=a?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new lp(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function VN(t){const e=jt(t);await Vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Zx(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e){const n=await Jx(t,{},async()=>{const r=fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await Xx(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:r};return t.emulatorConfig&&lo(t.emulatorConfig.host)&&(u.credentials="include"),Yx.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FN(t,e){return Qr(t,"POST","/v2/accounts:revokeToken",Kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):d_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=d_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await ON(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new bs;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(X(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bs,this.toJSON())}_performRefresh(){return Pn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class rn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new MN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new lp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await nl(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NN(this,e)}reload(){return VN(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new rn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ut(this.auth.app))return Promise.reject(Vn(this.auth));const e=await this.getIdToken();return await nl(this,PN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:w,providerData:E,stsTokenManager:k}=n;X(p&&k,e,"internal-error");const T=bs.fromJSON(this.name,k);X(typeof p=="string",e,"internal-error"),or(r,e.name),or(i,e.name),X(typeof g=="boolean",e,"internal-error"),X(typeof w=="boolean",e,"internal-error"),or(s,e.name),or(o,e.name),or(a,e.name),or(u,e.name),or(d,e.name),or(f,e.name);const I=new rn({uid:p,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:w,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:T,createdAt:d,lastLoginAt:f});return E&&Array.isArray(E)&&(I.providerData=E.map(_=>({..._}))),u&&(I._redirectEventId=u),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new bs;i.updateFromServerResponse(n);const s=new rn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Vc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];X(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Zx(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new bs;a.updateFromIdToken(r);const u=new rn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new lp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=new Map;function Nn(t){$n(t instanceof Function,"Expected a class definition");let e=h_.get(t);return e?($n(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,h_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}eT.type="NONE";const f_=eT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t,e,n){return`firebase:${t}:${e}:${n}`}class Ps{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ou(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ou("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mc(this.auth,{idToken:e}).catch(()=>{});return n?rn._fromGetAccountInfoResponse(this.auth,n,e):null}return rn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ps(Nn(f_),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Nn(f_);const o=Ou(r,e.config.apiKey,e.name);let a=null;for(const d of n)try{const f=await d._get(o);if(f){let p;if(typeof f=="string"){const g=await Mc(e,{idToken:f}).catch(()=>{});if(!g)break;p=await rn._fromGetAccountInfoResponse(e,g,f)}else p=rn._fromJSON(e,f);d!==s&&(a=p),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Ps(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new Ps(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oT(e))return"Blackberry";if(aT(e))return"Webos";if(nT(e))return"Safari";if((e.includes("chrome/")||rT(e))&&!e.includes("edge/"))return"Chrome";if(sT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function tT(t=He()){return/firefox\//i.test(t)}function nT(t=He()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rT(t=He()){return/crios\//i.test(t)}function iT(t=He()){return/iemobile/i.test(t)}function sT(t=He()){return/android/i.test(t)}function oT(t=He()){return/blackberry/i.test(t)}function aT(t=He()){return/webos/i.test(t)}function lg(t=He()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function LN(t=He()){var e;return lg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function zN(){return dR()&&document.documentMode===10}function lT(t=He()){return lg(t)||sT(t)||aT(t)||oT(t)||/windows phone/i.test(t)||iT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(t,e=[]){let n;switch(t){case"Browser":n=p_(He());break;case"Worker":n=`${p_(He())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${uo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,e={}){return Qr(t,"GET","/v2/passwordPolicy",Kr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=6;class WN{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$N,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new m_(this),this.idTokenSubscription=new m_(this),this.beforeStateQueue=new BN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Ps.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mc(this,{idToken:e}),r=await rn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ut(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ut(this.app))return Promise.reject(Vn(this));const n=e?jt(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ut(this.app)?Promise.reject(Vn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ut(this.app)?Promise.reject(Vn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UN(this),n=new WN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await FN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Nn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Ps.create(this,[Nn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&wN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function qi(t){return jt(t)}class m_{constructor(e){this.auth=e,this.observer=null,this.addObserver=yR(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GN(t){xd=t}function cT(t){return xd.loadJS(t)}function qN(){return xd.recaptchaEnterpriseScript}function KN(){return xd.gapiScript}function QN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class YN{constructor(){this.enterprise=new JN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class JN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const XN="recaptcha-enterprise",dT="NO_RECAPTCHA";class ZN{constructor(e){this.type=XN,this.auth=qi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{bN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const d=new kN(u);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(u=>{a(u)})})}function i(s,o,a){const u=window.grecaptcha;c_(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(dT)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new YN().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&c_(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=qN();u.length!==0&&(u+=a),cT(u).then(()=>{i(a,s,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})}}async function g_(t,e,n,r=!1,i=!1){const s=new ZN(t);let o;if(i)o=dT;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,d=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function up(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await g_(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await g_(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t,e){const n=ym(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ai(s,e??{}))return i;ln(i,"already-initialized")}return n.initialize({options:e})}function tD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function nD(t,e,n){const r=qi(t);X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=hT(e),{host:o,port:a}=rD(e),u=a===null?"":`:${a}`,d={url:`${s}//${o}${u}/`},f=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),X(Ai(d,r.config.emulator)&&Ai(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,lo(o)?(SE(`${s}//${o}${u}`),CE("Auth",!0)):iD()}function hT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rD(t){const e=hT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:y_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:y_(o)}}}function y_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function iD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pn("not implemented")}_getIdTokenResponse(e){return Pn("not implemented")}_linkToIdToken(e,n){return Pn("not implemented")}_getReauthenticationResolver(e){return Pn("not implemented")}}async function sD(t,e){return Qr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(t,e){return xl(t,"POST","/v1/accounts:signInWithPassword",Kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(t,e){return xl(t,"POST","/v1/accounts:signInWithEmailLink",Kr(t,e))}async function lD(t,e){return xl(t,"POST","/v1/accounts:signInWithEmailLink",Kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends ug{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new rl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new rl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return up(e,n,"signInWithPassword",oD);case"emailLink":return aD(e,{email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return up(e,r,"signUpPassword",sD);case"emailLink":return lD(e,{idToken:n,email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ns(t,e){return xl(t,"POST","/v1/accounts:signInWithIdp",Kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="http://localhost";class Oi extends ug{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Oi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ns(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ns(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ns(e,n)}buildRequest(){const e={requestUri:uD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dD(t){const e=Qo(Yo(t)).link,n=e?Qo(Yo(e)).deep_link_id:null,r=Qo(Yo(t)).deep_link_id;return(r?Qo(Yo(r)).link:null)||r||n||e||t}class cg{constructor(e){const n=Qo(Yo(e)),r=n.apiKey??null,i=n.oobCode??null,s=cD(n.mode??null);X(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=dD(e);try{return new cg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.providerId=po.PROVIDER_ID}static credential(e,n){return rl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=cg.parseLink(n);return X(r,"argument-error"),rl._fromEmailAndCode(e,r.code,r.tenantId)}}po.PROVIDER_ID="password";po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends fT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Tl{constructor(){super("facebook.com")}static credential(e){return Oi._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oi._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return pr.credential(n,r)}catch{return null}}}pr.GOOGLE_SIGN_IN_METHOD="google.com";pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Tl{constructor(){super("github.com")}static credential(e){return Oi._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Tl{constructor(){super("twitter.com")}static credential(e,n){return Oi._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.TWITTER_SIGN_IN_METHOD="twitter.com";gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(t,e){return xl(t,"POST","/v1/accounts:signUp",Kr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await rn._fromIdTokenResponse(e,r,i),o=v_(r);return new Fi({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=v_(r);return new Fi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function v_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Gn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,jc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new jc(e,n,r,i)}}function pT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?jc._fromErrorAndOperation(t,s,e,r):s})}async function fD(t,e,n=!1){const r=await nl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(t,e,n=!1){const{auth:r}=t;if(Ut(r.app))return Promise.reject(Vn(r));const i="reauthenticate";try{const s=await nl(t,pT(r,i,e,t),n);X(s.idToken,r,"internal-error");const o=ag(s.idToken);X(o,r,"internal-error");const{sub:a}=o;return X(t.uid===a,r,"user-mismatch"),Fi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ln(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mT(t,e,n=!1){if(Ut(t.app))return Promise.reject(Vn(t));const r="signIn",i=await pT(t,r,e),s=await Fi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function mD(t,e){return mT(qi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gT(t){const e=qi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gD(t,e,n){if(Ut(t.app))return Promise.reject(Vn(t));const r=qi(t),o=await up(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hD).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&gT(t),u}),a=await Fi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function yD(t,e,n){return Ut(t.app)?Promise.reject(Vn(t)):mD(jt(t),po.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&gT(t),r})}function vD(t,e,n,r){return jt(t).onIdTokenChanged(e,n,r)}function _D(t,e,n){return jt(t).beforeAuthStateChanged(e,n)}function wD(t,e,n,r){return jt(t).onAuthStateChanged(e,n,r)}function ED(t){return jt(t).signOut()}const Oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Oc,"1"),this.storage.removeItem(Oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=1e3,xD=10;class vT extends yT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);zN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,xD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ID)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vT.type="LOCAL";const TD=vT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T extends yT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_T.type="SESSION";const wT=_T;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Td(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async d=>d(n.origin,s)),u=await SD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Td.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const d=dg("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return window}function AD(t){Tn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}async function RD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function bD(){return ET()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="firebaseLocalStorageDb",PD=1,Fc="firebaseLocalStorage",xT="fbase_key";class Sl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sd(t,e){return t.transaction([Fc],e?"readwrite":"readonly").objectStore(Fc)}function ND(){const t=indexedDB.deleteDatabase(IT);return new Sl(t).toPromise()}function cp(){const t=indexedDB.open(IT,PD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Fc,{keyPath:xT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Fc)?e(r):(r.close(),await ND(),e(await cp()))})})}async function __(t,e,n){const r=Sd(t,!0).put({[xT]:e,value:n});return new Sl(r).toPromise()}async function DD(t,e){const n=Sd(t,!1).get(e),r=await new Sl(n).toPromise();return r===void 0?null:r.value}function w_(t,e){const n=Sd(t,!0).delete(e);return new Sl(n).toPromise()}const MD=800,VD=3;class TT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>VD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ET()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Td._getInstance(bD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await RD(),!this.activeServiceWorker)return;this.sender=new CD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await __(e,Oc,"1"),await w_(e,Oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>__(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>DD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>w_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Sd(i,!1).getAll();return new Sl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TT.type="LOCAL";const jD=TT;new Il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t,e){return e?Nn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg extends ug{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ns(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ns(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ns(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FD(t){return mT(t.auth,new hg(t),t.bypassAuthState)}function LD(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),pD(n,new hg(t),t.bypassAuthState)}async function zD(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),fD(n,new hg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FD;case"linkViaPopup":case"linkViaRedirect":return zD;case"reauthViaPopup":case"reauthViaRedirect":return LD;default:ln(this.auth,"internal-error")}}resolve(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=new Il(2e3,1e4);class Is extends ST{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Is.currentPopupAction&&Is.currentPopupAction.cancel(),Is.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){$n(this.filter.length===1,"Popup operations only handle one event");const e=dg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Is.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BD.get())};e()}}Is.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="pendingRedirect",Fu=new Map;class $D extends ST{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fu.get(this.auth._key());if(!e){try{const r=await WD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fu.set(this.auth._key(),e)}return this.bypassAuthState||Fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WD(t,e){const n=qD(e),r=GD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function HD(t,e){Fu.set(t._key(),e)}function GD(t){return Nn(t._redirectPersistence)}function qD(t){return Ou(UD,t.config.apiKey,t.name)}async function KD(t,e,n=!1){if(Ut(t.app))return Promise.reject(Vn(t));const r=qi(t),i=OD(r,e),o=await new $D(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=10*60*1e3;class YD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!CT(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(xn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QD&&this.cachedEventUids.clear(),this.cachedEventUids.has(E_(e))}saveEventToCache(e){this.cachedEventUids.add(E_(e)),this.lastProcessedEventTime=Date.now()}}function E_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(t,e={}){return Qr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e4=/^https?/;async function t4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XD(t);for(const n of e)try{if(n4(n))return}catch{}ln(t,"unauthorized-domain")}function n4(t){const e=ap(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!e4.test(n))return!1;if(ZD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=new Il(3e4,6e4);function I_(){const t=Tn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function i4(t){return new Promise((e,n)=>{var i,s,o;function r(){I_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{I_(),n(xn(t,"network-request-failed"))},timeout:r4.get()})}if((s=(i=Tn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Tn().gapi)!=null&&o.load)r();else{const a=QN("iframefcb");return Tn()[a]=()=>{gapi.load?r():n(xn(t,"network-request-failed"))},cT(`${KN()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Lu=null,e})}let Lu=null;function s4(t){return Lu=Lu||i4(t),Lu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=new Il(5e3,15e3),a4="__/auth/iframe",l4="emulator/auth/iframe",u4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},c4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d4(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?og(e,l4):`https://${t.config.authDomain}/${a4}`,r={apiKey:e.apiKey,appName:t.name,v:uo},i=c4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${fl(r).slice(1)}`}async function h4(t){const e=await s4(t),n=Tn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:d4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=xn(t,"network-request-failed"),a=Tn().setTimeout(()=>{s(o)},o4.get());function u(){Tn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p4=500,m4=600,g4="_blank",y4="http://localhost";class x_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function v4(t,e,n,r=p4,i=m4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u={...f4,width:r.toString(),height:i.toString(),top:s,left:o},d=He().toLowerCase();n&&(a=rT(d)?g4:n),tT(d)&&(e=e||y4,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[w,E])=>`${g}${w}=${E},`,"");if(LN(d)&&a!=="_self")return _4(e||"",a),new x_(null);const p=window.open(e||"",a,f);X(p,t,"popup-blocked");try{p.focus()}catch{}return new x_(p)}function _4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4="__/auth/handler",E4="emulator/auth/handler",I4=encodeURIComponent("fac");async function T_(t,e,n,r,i,s){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:uo,eventId:i};if(e instanceof fT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",gR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Tl){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const u=await t._getAppCheckToken(),d=u?`#${I4}=${encodeURIComponent(u)}`:"";return`${x4(t)}?${fl(a).slice(1)}${d}`}function x4({config:t}){return t.emulator?og(t,E4):`https://${t.authDomain}/${w4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="webStorageSupport";class T4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wT,this._completeRedirectFn=KD,this._overrideRedirectResult=HD}async _openPopup(e,n,r,i){var o;$n((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await T_(e,n,r,ap(),i);return v4(e,s,dg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await T_(e,n,r,ap(),i);return AD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):($n(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await h4(e),r=new YD(e);return n.register("authEvent",i=>(X(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dh,{type:Dh},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Dh];s!==void 0&&n(!!s),ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=t4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lT()||nT()||lg()}}const S4=T4;var S_="@firebase/auth",C_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R4(t){Bs(new Ri("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uT(t)},d=new HN(r,i,s,u);return tD(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Bs(new Ri("auth-internal",e=>{const n=qi(e.getProvider("auth").getImmediate());return(r=>new C4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nr(S_,C_,A4(t)),Nr(S_,C_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=5*60,b4=TE("authIdTokenMaxAge")||k4;let A_=null;const P4=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>b4)return;const i=n==null?void 0:n.token;A_!==i&&(A_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function N4(t=ME()){const e=ym(t,"auth");if(e.isInitialized())return e.getImmediate();const n=eD(t,{popupRedirectResolver:S4,persistence:[jD,TD,wT]}),r=TE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=P4(s.toString());_D(n,o,()=>o(n.currentUser)),vD(n,a=>o(a))}}const i=IE("auth");return i&&nD(n,`http://${i}`),n}function D4(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}GN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=xn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",D4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R4("Browser");const M4={apiKey:"AIzaSyAJOjrkfzim3X-7r5vH4jRlFUMzIk032tw",authDomain:"nutraindia-1.firebaseapp.com",projectId:"nutraindia-1",storageBucket:"nutraindia-1.firebasestorage.app",messagingSenderId:"264226491154",appId:"1:264226491154:web:10fc9c80a9ea7df27c01cb",measurementId:"G-7HBL495FBS"},AT=DE(M4),dp=Z5(AT),du=N4(AT);eN(dp).catch(t=>{t.code==="failed-precondition"?console.log("Persistence failed: Multiple tabs open"):t.code==="unimplemented"&&console.log("Persistence not available in this browser")});const RT=F.createContext(),kT=()=>{const t=F.useContext(RT);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},V4=({children:t})=>{const[e,n]=F.useState(null),[r,i]=F.useState(!0);F.useEffect(()=>{const d=setTimeout(()=>{r&&(console.log("Quick timeout - setting loading to false"),i(!1))},500),f=wD(du,async p=>{clearTimeout(d),p?(n(p),i(!1),pN(s_(dp,"users",p.uid)).then(g=>{g.exists()&&n({...p,profile:g.data()})}).catch(g=>{console.error("Error fetching user profile:",g)})):(n(null),i(!1))});return()=>{clearTimeout(d),f()}},[]);const u={currentUser:e,signup:async(d,f,p)=>{const w=(await gD(du,d,f)).user;try{await gN(s_(dp,"users",w.uid),{...p,email:w.email,createdAt:new Date().toISOString()})}catch(E){console.error("Error creating user profile:",E)}return w},login:async(d,f)=>yD(du,d,f),logout:async()=>ED(du),loading:r};return c.jsx(RT.Provider,{value:u,children:r?c.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0B3D91 0%, #1E5A9A 100%)",color:"white"},children:c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{width:"50px",height:"50px",border:"4px solid rgba(255,255,255,0.3)",borderTop:"4px solid white",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem"}}),c.jsx("p",{children:"Initializing..."}),c.jsx("style",{children:`
              @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
              }
            `})]})}):t})};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bT=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var O4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=F.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},u)=>F.createElement("svg",{ref:u,...O4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:bT("lucide",i),...a},[...o.map(([d,f])=>F.createElement(d,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=(t,e)=>{const n=F.forwardRef(({className:r,...i},s)=>F.createElement(F4,{ref:s,iconNode:e,className:bT(`lucide-${j4(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=Z("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=Z("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=Z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=Z("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=Z("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=Z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=Z("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=Z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=Z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=Z("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=Z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=Z("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=Z("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=Z("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=Z("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=Z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=Z("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=Z("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=Z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=Z("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=Z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=Z("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=Z("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=Z("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=Z("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=Z("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=Z("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=Z("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=Z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=Z("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=Z("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=Z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=Z("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=Z("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),sM=({children:t,isAuthenticated:e,onLogout:n})=>{const r=ao(),i=$i(),[s,o]=F.useState(!1),[a,u]=F.useState(""),[d,f]=F.useState(!1),[p,g]=F.useState([{id:1,title:"New Course Available",message:"Sports Nutrition Masterclass is now available.",time:"2 hrs ago",read:!1},{id:2,title:"Program Application Update",message:"Your application for Dietitian Certification is under review.",time:"1 day ago",read:!1},{id:3,title:"Certificate Earned",message:'Congratulations! You completed "Macro & Micronutrients".',time:"2 days ago",read:!0},{id:4,title:"Meal Plan Ready",message:"Your personalized meal plan for this week is ready.",time:"3 days ago",read:!0}]),w=[{type:"course",title:"Nutrition Fundamentals",path:"/courses",category:"Basics"},{type:"course",title:"Macro & Micronutrients",path:"/courses",category:"Nutrition Science"},{type:"course",title:"Sports Nutrition",path:"/courses",category:"Specialized"},{type:"course",title:"Plant-Based Nutrition",path:"/courses",category:"Diets"},{type:"course",title:"Meal Planning & Prep",path:"/courses",category:"Practical"},{type:"course",title:"Weight Management Science",path:"/courses",category:"Wellness"},{type:"course",title:"Gut Health & Digestion",path:"/courses",category:"Health"},{type:"course",title:"Clinical Nutrition",path:"/courses",category:"Medical"},{type:"course",title:"Pediatric Nutrition",path:"/courses",category:"Specialized"},{type:"course",title:"Nutritional Biochemistry",path:"/courses",category:"Science"},{type:"course",title:"Food Safety & Hygiene",path:"/courses",category:"Safety"},{type:"course",title:"Supplement Science",path:"/courses",category:"Advanced"},{type:"course",title:"Eating Disorders",path:"/courses",category:"Psychology"},{type:"course",title:"Holistic Nutrition",path:"/courses",category:"Alternative"},{type:"program",title:"Certified Nutritionist Program",path:"/internships",category:"Certification"},{type:"program",title:"Dietitian Internship",path:"/internships",category:"Clinical"},{type:"program",title:"Sports Nutrition Specialist",path:"/internships",category:"Sports"},{type:"program",title:"Wellness Coach Training",path:"/internships",category:"Coaching"},{type:"page",title:"Dashboard",path:"/dashboard",category:"Navigation"},{type:"page",title:"Profile",path:"/profile",category:"Navigation"},{type:"page",title:"Certificates",path:"/certificates",category:"Navigation"},{type:"page",title:"Resources",path:"/resources",category:"Navigation"}];if(!e)return c.jsx(c.Fragment,{children:t});const E=[{path:"/dashboard",label:"Dashboard",icon:c.jsx(K4,{size:20})},{path:"/courses",label:"Learning Hub",icon:c.jsx(il,{size:20})},{path:"/internships",label:"Programs",icon:c.jsx(Lc,{size:20})},{path:"/nutracoach",label:"NutraCoach",icon:c.jsx(VT,{size:20})},{path:"/resources",label:"Resources",icon:c.jsx(zu,{size:20})},{path:"/certificates",label:"Certificates",icon:c.jsx(vn,{size:20})}],k=()=>{o(!s),f(!1)},T=j=>{g(p.map(z=>z.id===j?{...z,read:!0}:z))},I=j=>{const z=j.target.value;u(z),f(z.length>0),o(!1)},_=j=>{i(j),u(""),f(!1)},S=w.filter(j=>j.title.toLowerCase().includes(a.toLowerCase())||j.category.toLowerCase().includes(a.toLowerCase())).slice(0,8),V=p.filter(j=>!j.read).length;return c.jsxs("div",{className:"app-container",children:[c.jsxs("aside",{className:"sidebar",children:[c.jsx("div",{className:"logo-container",children:c.jsxs("div",{className:"logo-text",children:[" NUTRA",c.jsx("span",{children:"SIM"})]})}),c.jsx("nav",{className:"nav-menu",children:E.map(j=>c.jsx(qA,{to:j.path,children:c.jsxs("div",{className:`nav-item ${r.pathname===j.path?"active":""}`,children:[j.icon,c.jsx("span",{children:j.label})]})},j.path))}),c.jsxs("div",{className:"user-profile",children:[c.jsxs("div",{style:{flex:1,cursor:"pointer"},onClick:()=>i("/profile"),children:[c.jsx("div",{style:{fontWeight:"bold"},children:"Ayan Parmar"}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Student ID: 2024001"})]}),c.jsx(Y4,{size:18,color:"var(--text-secondary)",style:{cursor:"pointer"},onClick:n})]})]}),c.jsxs("main",{className:"main-content",children:[c.jsxs("header",{className:"topbar",children:[c.jsxs("div",{className:"search-bar",style:{position:"relative"},children:[c.jsx(pg,{size:18,color:"var(--text-secondary)"}),c.jsx("input",{type:"text",placeholder:"Search courses, programs, tools...",value:a,onChange:I,onFocus:()=>a&&f(!0)}),d&&S.length>0&&c.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"0.5rem",background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",zIndex:1e3,maxHeight:"400px",overflowY:"auto"},children:[c.jsxs("div",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid var(--border-color)",fontSize:"0.85rem",color:"var(--text-secondary)",fontWeight:"600"},children:["Search Results (",S.length,")"]}),S.map((j,z)=>c.jsx("div",{onClick:()=>_(j.path),style:{padding:"1rem",borderBottom:z<S.length-1?"1px solid var(--border-color)":"none",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:x=>x.currentTarget.style.background="var(--surface-hover)",onMouseLeave:x=>x.currentTarget.style.background="transparent",children:c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"500",marginBottom:"0.25rem"},children:j.title}),c.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:[j.type.charAt(0).toUpperCase()+j.type.slice(1),"  ",j.category]})]}),c.jsx("div",{style:{padding:"0.25rem 0.75rem",background:"var(--primary-color)",color:"white",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600"},children:j.type})]})},z))]}),d&&S.length===0&&a&&c.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"0.5rem",background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",zIndex:1e3,padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:['No results found for "',a,'"']})]}),c.jsxs("div",{style:{display:"flex",gap:"1.5rem",alignItems:"center",position:"relative"},children:[c.jsxs("div",{style:{position:"relative",cursor:"pointer"},onClick:k,children:[c.jsx(U4,{size:20}),V>0&&c.jsx("div",{style:{position:"absolute",top:"-5px",right:"-5px",background:"var(--accent-color)",color:"white",fontSize:"0.6rem",width:"14px",height:"14px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:V})]}),c.jsx("div",{style:{cursor:"pointer"},onClick:()=>i("/profile"),children:c.jsx(mp,{size:20})}),s&&c.jsxs("div",{style:{position:"absolute",top:"40px",right:"0",width:"320px",background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",zIndex:1e3,overflow:"hidden"},children:[c.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("h3",{style:{fontSize:"1rem",margin:0},children:"Notifications"}),c.jsx(Cd,{size:16,style:{cursor:"pointer",color:"var(--text-secondary)"},onClick:()=>o(!1)})]}),c.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:p.length>0?p.map(j=>c.jsxs("div",{onClick:()=>T(j.id),style:{padding:"1rem",borderBottom:"1px solid var(--border-color)",background:j.read?"transparent":"var(--surface-hover)",cursor:"pointer"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[c.jsx("span",{style:{fontWeight:"600",fontSize:"0.9rem"},children:j.title}),!j.read&&c.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"var(--primary-color)"}})]}),c.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",margin:"0 0 0.5rem 0"},children:j.message}),c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:j.time})]},j.id)):c.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:"No notifications"})}),c.jsx("div",{style:{padding:"0.75rem",textAlign:"center",borderTop:"1px solid var(--border-color)",fontSize:"0.85rem",color:"var(--primary-color)",cursor:"pointer",fontWeight:"500"},onClick:()=>{o(!1),i("/notifications")},children:"View All Notifications"})]})]})]}),c.jsx("div",{className:"page-content",children:t})]})]})},oM=()=>{const t=$i(),{login:e}=kT(),[n,r]=F.useState(""),[i,s]=F.useState(""),[o,a]=F.useState(""),[u,d]=F.useState(!1),f=async p=>{p.preventDefault();try{a(""),d(!0),await e(n,i),t("/dashboard")}catch(g){a("Failed to sign in. Please check your credentials."),console.error("Login error:",g)}finally{d(!1)}};return c.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#F5F1ED",padding:"2rem"},children:c.jsxs("div",{style:{background:"white",borderRadius:"18px",boxShadow:"0 4px 8px 0 rgba(62, 52, 43, 0.08)",overflow:"hidden",maxWidth:"900px",width:"100%",display:"grid",gridTemplateColumns:"1fr 1fr",border:"1px solid #E5DFD6"},children:[c.jsxs("div",{style:{background:"linear-gradient(135deg, #8B9D7F 0%, #6B7D5F 100%)",padding:"3rem",color:"white",display:"flex",flexDirection:"column",justifyContent:"center"},children:[c.jsx("div",{style:{marginBottom:"1.5rem",fontSize:"2.5rem"},children:""}),c.jsx("h1",{style:{fontSize:"2rem",marginBottom:"0.875rem",fontWeight:"600",letterSpacing:"-0.03em"},children:"NutraSim"}),c.jsx("p",{style:{fontSize:"1rem",opacity:.95,lineHeight:"1.65"},children:"Professional nutrition education and wellness programs platform"})]}),c.jsxs("div",{style:{padding:"3rem"},children:[c.jsx("h2",{style:{fontSize:"1.625rem",marginBottom:"0.5rem",color:"#3E342B",fontWeight:"600",letterSpacing:"-0.03em"},children:"Welcome back"}),c.jsx("p",{style:{color:"#8B7D6B",marginBottom:"2rem",fontSize:"0.9375rem"},children:"Sign in to continue"}),o&&c.jsx("div",{style:{padding:"0.75rem",background:"#FFF5F0",border:"1px solid #F7D7C8",borderRadius:"12px",color:"#C4632E",marginBottom:"1rem",fontSize:"0.875rem"},children:o}),c.jsxs("form",{onSubmit:f,children:[c.jsxs("div",{style:{marginBottom:"1.25rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#3E342B",fontSize:"0.875rem"},children:"Email"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx(DT,{size:16,style:{position:"absolute",left:"0.875rem",top:"50%",transform:"translateY(-50%)",color:"#A69C8E"}}),c.jsx("input",{type:"email",value:n,onChange:p=>r(p.target.value),required:!0,placeholder:"name@example.com",style:{width:"100%",padding:"0.75rem 0.875rem 0.75rem 2.75rem",border:"1px solid #E5DFD6",borderRadius:"12px",fontSize:"0.9375rem",transition:"all 0.2s",outline:"none",color:"#3E342B",boxSizing:"border-box",background:"#FAF8F5"},onFocus:p=>{p.target.style.borderColor="#8B9D7F",p.target.style.boxShadow="0 0 0 3px rgba(139, 157, 127, 0.15)",p.target.style.background="#FFFFFF"},onBlur:p=>{p.target.style.borderColor="#E5DFD6",p.target.style.boxShadow="none",p.target.style.background="#FAF8F5"}})]})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#3E342B",fontSize:"0.875rem"},children:"Password"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx(Q4,{size:16,style:{position:"absolute",left:"0.875rem",top:"50%",transform:"translateY(-50%)",color:"#A69C8E"}}),c.jsx("input",{type:"password",value:i,onChange:p=>s(p.target.value),required:!0,placeholder:"",style:{width:"100%",padding:"0.75rem 0.875rem 0.75rem 2.75rem",border:"1px solid #E5DFD6",borderRadius:"12px",fontSize:"0.9375rem",transition:"all 0.2s",outline:"none",color:"#3E342B",boxSizing:"border-box",background:"#FAF8F5"},onFocus:p=>{p.target.style.borderColor="#8B9D7F",p.target.style.boxShadow="0 0 0 3px rgba(139, 157, 127, 0.15)",p.target.style.background="#FFFFFF"},onBlur:p=>{p.target.style.borderColor="#E5DFD6",p.target.style.boxShadow="none",p.target.style.background="#FAF8F5"}})]})]}),c.jsx("button",{type:"submit",disabled:u,style:{width:"100%",padding:"0.875rem",background:u?"#D4CEC5":"#8B9D7F",color:"white",border:"none",borderRadius:"12px",fontSize:"0.9375rem",fontWeight:"600",cursor:u?"not-allowed":"pointer",transition:"all 0.2s",letterSpacing:"-0.01em"},onMouseEnter:p=>{u||(p.currentTarget.style.background="#6B7D5F")},onMouseLeave:p=>{u||(p.currentTarget.style.background="#8B9D7F")},children:u?"Signing in...":"Sign In"})]}),c.jsx("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:c.jsx("p",{style:{color:"#A69C8E",fontSize:"0.8125rem"},children:"Test: demo@nutrasim.com / demo123"})})]})]})})},aM=()=>{const t=$i(),[e,n]=F.useState("overview"),[r,i]=F.useState(new Date),[s,o]=F.useState(14);F.useEffect(()=>{const T=setInterval(()=>i(new Date),1e3);return()=>clearInterval(T)},[]);const a=[{label:"Courses Enrolled",value:"10",icon:c.jsx(il,{size:20}),color:"#8B9D7F",bgColor:"#F0F4ED",change:"+2 this month",trend:"up"},{label:"Courses Completed",value:"6",icon:c.jsx(Ds,{size:20}),color:"#6B7D5F",bgColor:"#EDF2E8",change:"+1 this week",trend:"up"},{label:"Certificates Earned",value:"6",icon:c.jsx(vn,{size:20}),color:"#D4A574",bgColor:"#FFF9F0",change:"+1 new",trend:"up"},{label:"Study Hours",value:"142",icon:c.jsx(Li,{size:20}),color:"#D97642",bgColor:"#FFF5F0",change:"18h this week",trend:"up"},{label:"Current Streak",value:`${s}`,icon:c.jsx(Bu,{size:20}),color:"#C4632E",bgColor:"#FFF3EC",change:"Impressive!",trend:"up"},{label:"Rank",value:"#8",icon:c.jsx(Mh,{size:20}),color:"#A68B5B",bgColor:"#FAF7F0",change:"Top 3%",trend:"up"},{label:"Health Score",value:"87",icon:c.jsx(NT,{size:20}),color:"#C97F8C",bgColor:"#FFF5F7",change:"+5 this week",trend:"up"},{label:"Meal Plans",value:"12",icon:c.jsx(VT,{size:20}),color:"#7A9B9E",bgColor:"#F0F6F7",change:"3 active",trend:"neutral"}],u=[{id:1,title:"Sports Nutrition Masterclass",progress:78,lastAccessed:"1 hour ago",nextLesson:"Pre & Post-Workout Nutrition",duration:"35 min",instructor:"Dr. Amanda Stevens",rating:4.9,students:8234},{id:2,title:"Plant-Based Nutrition Fundamentals",progress:65,lastAccessed:"3 hours ago",nextLesson:"Complete Protein Sources",duration:"28 min",instructor:"Sarah Williams",rating:4.8,students:12456},{id:3,title:"Gut Health & Microbiome",progress:52,lastAccessed:"1 day ago",nextLesson:"Probiotic Foods Guide",duration:"22 min",instructor:"Prof. Michael Chen",rating:4.7,students:9876},{id:4,title:"Weight Management Science",progress:41,lastAccessed:"2 days ago",nextLesson:"Metabolic Rate Basics",duration:"30 min",instructor:"Dr. Lisa Johnson",rating:4.8,students:15234}],d=[{id:1,title:"Nutrition Quiz: Macronutrients",course:"Sports Nutrition",date:"Tomorrow, 11:59 PM",priority:"high",points:100},{id:2,title:"Meal Plan Assignment",course:"Clinical Nutrition",date:"In 2 days",priority:"high",points:150},{id:3,title:"Case Study: Gut Health",course:"Microbiome",date:"In 4 days",priority:"medium",points:75},{id:4,title:"Supplement Analysis Report",course:"Advanced Nutrition",date:"In 6 days",priority:"medium",points:120},{id:5,title:"Food Label Reading Exercise",course:"Basics",date:"In 1 week",priority:"low",points:50}],f=[{id:1,title:"Health Champion",description:"Maintained 14-day streak",icon:"",unlocked:!0,rarity:"epic",points:200},{id:2,title:"Nutrition Expert",description:"Completed 5 courses",icon:"",unlocked:!0,rarity:"rare",points:150},{id:3,title:"Meal Planner Pro",description:"Created 10 meal plans",icon:"",unlocked:!0,rarity:"rare",points:100},{id:4,title:"Early Riser",description:"Logged breakfast 7 days straight",icon:"",unlocked:!0,rarity:"common",points:50},{id:5,title:"Hydration Hero",description:"Met water goal 14 days",icon:"",unlocked:!0,rarity:"rare",points:100},{id:6,title:"Master Nutritionist",description:"Complete 10 courses",icon:"",unlocked:!1,progress:"6/10",rarity:"legendary",points:500},{id:7,title:"Perfect Balance",description:"Maintain 85+ health score for month",icon:"",unlocked:!1,progress:"14/30",rarity:"epic",points:250},{id:8,title:"Community Helper",description:"Help 20 members in forums",icon:"",unlocked:!1,progress:"12/20",rarity:"rare",points:150}],p=[{rank:1,name:"Emma Rodriguez",points:4250,avatar:"",streak:28,badges:15},{rank:2,name:"David Kim",points:3980,avatar:"",streak:21,badges:13},{rank:3,name:"Sophia Martinez",points:3750,avatar:"",streak:18,badges:12},{rank:4,name:"James Wilson",points:3620,avatar:"",streak:16,badges:11},{rank:5,name:"Olivia Brown",points:3450,avatar:"",streak:19,badges:10},{rank:8,name:"You (Ayan Parmar)",points:3180,avatar:"",streak:14,badges:8,isCurrentUser:!0}],g=[{id:1,type:"completed",title:'Completed "Macronutrient Ratios" lesson',time:"1 hour ago",icon:c.jsx(Ds,{size:16}),color:"#4CAF50"},{id:2,type:"achievement",title:'Earned "Health Champion" badge',time:"5 hours ago",icon:c.jsx(vn,{size:16}),color:"#FFC107"},{id:3,type:"quiz",title:"Scored 94% in Plant Nutrition Quiz",time:"1 day ago",icon:c.jsx(Ei,{size:16}),color:"#06b6d4"},{id:4,type:"discussion",title:"Posted in Gut Health Forum",time:"2 days ago",icon:c.jsx(J4,{size:16}),color:"#9C27B0"},{id:5,type:"certificate",title:"Earned Sports Nutrition Certificate",time:"4 days ago",icon:c.jsx(vn,{size:16}),color:"#FFC107"}],w=[{day:"Mon",calories:2100,completed:!0},{day:"Tue",calories:1950,completed:!0},{day:"Wed",calories:2200,completed:!0},{day:"Thu",calories:2050,completed:!0},{day:"Fri",calories:1980,completed:!0},{day:"Sat",calories:2300,completed:!0},{day:"Sun",calories:2150,completed:!0}],E=[{id:1,title:"Advanced Clinical Nutrition",category:"Medical",duration:"8 weeks",level:"Advanced",rating:4.9,enrolled:3210},{id:2,title:"Pediatric Nutrition",category:"Specialized",duration:"6 weeks",level:"Intermediate",rating:4.8,enrolled:2890},{id:3,title:"Holistic Wellness Coaching",category:"Wellness",duration:"10 weeks",level:"Beginner",rating:4.7,enrolled:5432}],k=()=>{const T=r.getHours();return T<12?" Good Morning":T<17?" Good Afternoon":T<21?" Good Evening":" Good Night"};return c.jsxs("div",{children:[c.jsxs("div",{style:{background:"linear-gradient(135deg, #16a34a 0%, #22c55e 50%, #4ade80 100%)",borderRadius:"20px",padding:"3rem",marginBottom:"2rem",color:"white",position:"relative",overflow:"hidden"},children:[c.jsx("div",{style:{position:"absolute",top:"-50%",right:"-10%",width:"400px",height:"400px",background:"rgba(255,255,255,0.05)",borderRadius:"50%",animation:"float 6s ease-in-out infinite"}}),c.jsx("div",{style:{position:"absolute",bottom:"-30%",left:"-5%",width:"300px",height:"300px",background:"rgba(255,255,255,0.05)",borderRadius:"50%",animation:"float 8s ease-in-out infinite reverse"}}),c.jsx("style",{children:`
          @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
          }
          @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
          }
        `}),c.jsxs("div",{style:{position:"relative",zIndex:1},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"2rem"},children:[c.jsxs("div",{children:[c.jsxs("h1",{style:{fontSize:"2.5rem",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"1rem"},children:[k(),", Ayan! ",c.jsx(MT,{size:32})]}),c.jsx("p",{style:{fontSize:"1.2rem",opacity:.9},children:r.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),c.jsx("p",{style:{fontSize:"1rem",opacity:.8,marginTop:"0.5rem"},children:r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),c.jsxs("div",{style:{textAlign:"right"},children:[c.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.5rem"},children:c.jsx(Bu,{size:48,color:"#FF6B35",style:{animation:"pulse 2s ease-in-out infinite"}})}),c.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:[s," Day Streak!"]}),c.jsx("div",{style:{fontSize:"0.9rem",opacity:.8},children:"Stay consistent"})]})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem"},children:[c.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"1rem",borderRadius:"12px",backdropFilter:"blur(10px)"},children:[c.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"Health Score"}),c.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold"},children:"87/100"})]}),c.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"1rem",borderRadius:"12px",backdropFilter:"blur(10px)"},children:[c.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"Global Rank"}),c.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold"},children:"#8"})]}),c.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"1rem",borderRadius:"12px",backdropFilter:"blur(10px)"},children:[c.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"Daily Calories"}),c.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold"},children:"2050"})]}),c.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"1rem",borderRadius:"12px",backdropFilter:"blur(10px)"},children:[c.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"Water Intake"}),c.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold"},children:"2.5L"})]})]})]})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:a.map((T,I)=>c.jsxs("div",{style:{background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"12px",padding:"1.25rem",display:"flex",flexDirection:"column",gap:"0.75rem",transition:"all 0.3s",cursor:"pointer"},onMouseEnter:_=>{_.currentTarget.style.transform="translateY(-4px)",_.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.12)"},onMouseLeave:_=>{_.currentTarget.style.transform="translateY(0)",_.currentTarget.style.boxShadow="none"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[c.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"10px",background:`${T.color}15`,display:"flex",alignItems:"center",justifyContent:"center",color:T.color},children:T.icon}),c.jsxs("div",{style:{fontSize:"0.75rem",color:T.trend==="up"?"#4CAF50":"#666",display:"flex",alignItems:"center",gap:"0.25rem",backgroundColor:T.trend==="up"?"#4CAF5015":"#f5f5f5",padding:"0.25rem 0.5rem",borderRadius:"6px"},children:[T.trend==="up"&&c.jsx(nM,{size:12}),T.change]})]}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"bold",marginBottom:"0.25rem"},children:T.value}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:T.label})]})]},I))}),c.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"2rem",padding:"0.5rem",background:"var(--surface-color)",borderRadius:"12px",border:"1px solid var(--border-color)",flexWrap:"wrap"},children:["overview","courses","activity","achievements","leaderboard","schedule"].map(T=>c.jsx("button",{onClick:()=>n(T),style:{padding:"0.75rem 1.5rem",borderRadius:"8px",border:"none",background:e===T?"var(--primary-color)":"transparent",color:e===T?"white":"var(--text-secondary)",fontWeight:"600",cursor:"pointer",transition:"all 0.3s",fontSize:"0.9rem"},children:T.charAt(0).toUpperCase()+T.slice(1)},T))}),e==="overview"&&c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"2rem"},children:[c.jsxs("div",{style:{background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[c.jsxs("h2",{style:{fontSize:"1.25rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(il,{size:24}),"Continue Learning"]}),c.jsxs("button",{onClick:()=>t("/courses"),style:{display:"flex",alignItems:"center",gap:"0.25rem",padding:"0.5rem 1rem",background:"transparent",border:"1px solid var(--border-color)",borderRadius:"8px",color:"var(--primary-color)",fontWeight:"600",cursor:"pointer",transition:"all 0.3s",fontSize:"0.85rem"},children:["View All ",c.jsx(z4,{size:16})]})]}),u.map(T=>c.jsxs("div",{style:{padding:"1.25rem",border:"1px solid var(--border-color)",borderRadius:"12px",marginBottom:"1rem",cursor:"pointer",transition:"all 0.3s"},onClick:()=>t("/courses"),onMouseEnter:I=>{I.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.08)",I.currentTarget.style.transform="translateX(4px)"},onMouseLeave:I=>{I.currentTarget.style.boxShadow="none",I.currentTarget.style.transform="translateX(0)"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[c.jsxs("div",{style:{flex:1},children:[c.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem"},children:T.title}),c.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.8rem",color:"var(--text-secondary)"},children:[c.jsxs("span",{children:["By ",T.instructor]}),c.jsxs("span",{children:[" ",T.duration]}),c.jsxs("span",{children:[" ",c.jsx(Ei,{size:12,style:{display:"inline",marginRight:"2px",fill:"#FFC107",color:"#FFC107"}}),T.rating]})]})]}),c.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"var(--primary-color)"},children:[T.progress,"%"]})]}),c.jsx("div",{style:{position:"relative",height:"8px",background:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:c.jsx("div",{style:{position:"absolute",height:"100%",width:`${T.progress}%`,background:"linear-gradient(90deg, var(--primary-color), var(--accent-color))",transition:"width 0.3s"}})}),c.jsxs("div",{style:{marginTop:"0.75rem",fontSize:"0.85rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(PT,{size:14}),"Next: ",T.nextLesson]})]},T.id))]}),c.jsxs("div",{style:{background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem"},children:[c.jsxs("h2",{style:{fontSize:"1.25rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Li,{size:24}),"Upcoming Deadlines"]}),d.map(T=>c.jsxs("div",{style:{padding:"1rem",border:`1px solid ${T.priority==="high"?"#ef4444":T.priority==="medium"?"#f59e0b":"#94a3b8"}`,borderLeft:`4px solid ${T.priority==="high"?"#ef4444":T.priority==="medium"?"#f59e0b":"#94a3b8"}`,borderRadius:"8px",marginBottom:"1rem",background:`${T.priority==="high"?"#ef444408":"white"}`},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[c.jsx("span",{style:{fontSize:"0.7rem",padding:"0.25rem 0.5rem",borderRadius:"4px",background:T.priority==="high"?"#ef4444":T.priority==="medium"?"#f59e0b":"#94a3b8",color:"white",fontWeight:"600",textTransform:"uppercase"},children:T.priority}),c.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--primary-color)",fontWeight:"600"},children:[T.points," pts"]})]}),c.jsx("h4",{style:{fontSize:"0.9rem",fontWeight:"600",marginBottom:"0.25rem"},children:T.title}),c.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:T.course}),c.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(fg,{size:12}),T.date]})]},T.id))]})]}),e==="courses"&&c.jsx("div",{children:c.jsxs("div",{style:{background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem"},children:[c.jsx("h2",{style:{fontSize:"1.25rem",marginBottom:"1.5rem"},children:"Recommended for You"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem"},children:E.map(T=>c.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"12px",padding:"1.5rem",cursor:"pointer",transition:"all 0.3s"},onClick:()=>t("/courses"),onMouseEnter:I=>{I.currentTarget.style.transform="translateY(-4px)",I.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.12)"},onMouseLeave:I=>{I.currentTarget.style.transform="translateY(0)",I.currentTarget.style.boxShadow="none"},children:[c.jsx("div",{style:{display:"inline-block",padding:"0.25rem 0.75rem",background:"var(--primary-color)",color:"white",borderRadius:"20px",fontSize:"0.7rem",fontWeight:"600",marginBottom:"1rem"},children:T.level}),c.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"0.5rem"},children:T.title}),c.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"1rem"},children:[T.category,"  ",T.duration]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.85rem"},children:[c.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"var(--text-secondary)"},children:[c.jsx(mg,{size:14})," ",T.enrolled.toLocaleString()]}),c.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",color:"#FFC107"},children:[c.jsx(Ei,{size:14,fill:"#FFC107"})," ",T.rating]})]})]},T.id))})]})}),e==="activity"&&c.jsxs("div",{style:{background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem"},children:[c.jsxs("h2",{style:{fontSize:"1.25rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(hp,{size:24}),"Recent Activity"]}),g.map(T=>c.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",padding:"1rem",borderBottom:"1px solid var(--border-color)",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:I=>I.currentTarget.style.background="var(--surface-hover)",onMouseLeave:I=>I.currentTarget.style.background="transparent",children:[c.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"8px",background:`${T.color}15`,display:"flex",alignItems:"center",justifyContent:"center",color:T.color,flexShrink:0},children:T.icon}),c.jsxs("div",{style:{flex:1},children:[c.jsx("p",{style:{fontSize:"0.95rem",fontWeight:"500",marginBottom:"0.25rem"},children:T.title}),c.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:T.time})]})]},T.id))]}),e==="achievements"&&c.jsxs("div",{style:{background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem"},children:[c.jsxs("h2",{style:{fontSize:"1.25rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Mh,{size:24}),"Your Achievements"]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem"},children:f.map(T=>c.jsxs("div",{style:{padding:"1.25rem",border:T.unlocked?"2px solid var(--primary-color)":"1px dashed var(--border-color)",borderRadius:"12px",textAlign:"center",opacity:T.unlocked?1:.5,transition:"all 0.3s",cursor:"pointer",background:T.unlocked?"linear-gradient(135deg, rgba(22,163,74,0.05), rgba(249,115,22,0.05))":"transparent"},onMouseEnter:I=>I.currentTarget.style.transform="scale(1.05)",onMouseLeave:I=>I.currentTarget.style.transform="scale(1)",children:[c.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:T.icon}),c.jsx("h4",{style:{fontSize:"0.9rem",fontWeight:"600",marginBottom:"0.25rem"},children:T.title}),c.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:T.description}),T.unlocked?c.jsx("span",{style:{display:"inline-block",padding:"0.25rem 0.75rem",background:`${T.rarity==="legendary"?"#9333ea":T.rarity==="epic"?"#8b5cf6":T.rarity==="rare"?"#3b82f6":"#6b7280"}`,color:"white",borderRadius:"12px",fontSize:"0.65rem",fontWeight:"600",textTransform:"uppercase"},children:T.rarity}):c.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:T.progress})]},T.id))})]}),e==="leaderboard"&&c.jsxs("div",{style:{background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem"},children:[c.jsxs("h2",{style:{fontSize:"1.25rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Mh,{size:24}),"Global Leaderboard"]}),p.map(T=>c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem",padding:"1.25rem",borderRadius:"12px",marginBottom:"0.75rem",background:T.isCurrentUser?"linear-gradient(90deg, rgba(22,163,74,0.1), rgba(249,115,22,0.1))":"white",border:T.isCurrentUser?"2px solid var(--primary-color)":"1px solid var(--border-color)",transition:"transform 0.2s",cursor:"pointer"},onMouseEnter:I=>I.currentTarget.style.transform="translateX(4px)",onMouseLeave:I=>I.currentTarget.style.transform="translateX(0)",children:[c.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:T.rank<=3?"#FFC107":"var(--text-secondary)",minWidth:"40px"},children:T.rank<=3?["","",""][T.rank-1]:`#${T.rank}`}),c.jsx("div",{style:{fontSize:"2rem"},children:T.avatar}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontWeight:"600",fontSize:"1rem",marginBottom:"0.25rem"},children:T.name}),c.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",display:"flex",gap:"1rem"},children:[c.jsxs("span",{children:[c.jsx(Bu,{size:12,style:{display:"inline",marginRight:"2px"}}),T.streak," days"]}),c.jsxs("span",{children:[c.jsx(vn,{size:12,style:{display:"inline",marginRight:"2px"}}),T.badges," badges"]})]})]}),c.jsxs("div",{style:{textAlign:"right"},children:[c.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"var(--primary-color)"},children:T.points.toLocaleString()}),c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"points"})]})]},T.rank))]}),e==="schedule"&&c.jsxs("div",{style:{background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"16px",padding:"1.5rem"},children:[c.jsxs("h2",{style:{fontSize:"1.25rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(B4,{size:24}),"Weekly Nutrition Tracking"]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"1rem",marginTop:"2rem"},children:w.map((T,I)=>c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.5rem",fontWeight:"600"},children:T.day}),c.jsx("div",{style:{height:`${T.calories/2500*200}px`,minHeight:"60px",background:T.completed?"linear-gradient(180deg, var(--primary-color), var(--accent-color))":"#e0e0e0",borderRadius:"8px 8px 0 0",display:"flex",alignItems:"flex-end",justifyContent:"center",paddingBottom:"0.5rem",color:"white",fontWeight:"bold",fontSize:"0.85rem",transition:"all 0.3s",cursor:"pointer"},onMouseEnter:_=>_.currentTarget.style.transform="scaleY(1.05)",onMouseLeave:_=>_.currentTarget.style.transform="scaleY(1)",children:T.calories}),T.completed&&c.jsx("div",{style:{marginTop:"0.5rem",color:"#4CAF50"},children:c.jsx(Ds,{size:16})})]},I))}),c.jsxs("div",{style:{marginTop:"2rem",textAlign:"center",fontSize:"0.85rem",color:"var(--text-secondary)"},children:["Average Daily Intake: ",c.jsx("strong",{style:{color:"var(--primary-color)"},children:"2,104 calories"})]})]})]})},lM=()=>{const t=$i(),[e,n]=F.useState(""),[r,i]=F.useState("all"),[s,o]=F.useState("all"),[a,u]=F.useState("popular"),d=[{id:"all",label:"All Courses",count:28},{id:"basics",label:"Nutrition Basics",count:5},{id:"sports",label:"Sports Nutrition",count:4},{id:"clinical",label:"Clinical Nutrition",count:4},{id:"plant-based",label:"Plant-Based",count:3},{id:"wellness",label:"Wellness & Lifestyle",count:4},{id:"specialized",label:"Specialized Diets",count:4},{id:"pediatric",label:"Pediatric Nutrition",count:2},{id:"geriatric",label:"Geriatric Nutrition",count:2}],f=[{id:1,title:"Nutrition Fundamentals",category:"basics",level:"Beginner",duration:"6 weeks",rating:4.9,students:15234,instructor:"Dr. Sarah Mitchell",progress:0,enrolled:!1,price:"Free",image:"",modules:18,trending:!0},{id:2,title:"Macro & Micronutrients Deep Dive",category:"basics",level:"Intermediate",duration:"8 weeks",rating:4.8,students:12456,instructor:"Prof. James Anderson",progress:0,enrolled:!1,price:"Free",image:"",modules:24,trending:!0},{id:3,title:"Food Science & Chemistry",category:"basics",level:"Intermediate",duration:"7 weeks",rating:4.7,students:8765,instructor:"Dr. Emily Chen",progress:0,enrolled:!1,price:"Free",image:"",modules:20},{id:4,title:"Nutritional Biochemistry",category:"basics",level:"Advanced",duration:"10 weeks",rating:4.8,students:6543,instructor:"Prof. Michael Lee",progress:0,enrolled:!1,price:"Free",image:"",modules:28},{id:5,title:"Reading Food Labels & Ingredients",category:"basics",level:"Beginner",duration:"3 weeks",rating:4.9,students:10234,instructor:"Sarah Williams",progress:0,enrolled:!1,price:"Free",image:"",modules:12,new:!0},{id:6,title:"Sports Nutrition Masterclass",category:"sports",level:"Intermediate",duration:"9 weeks",rating:4.9,students:8234,instructor:"Dr. Amanda Stevens",progress:78,enrolled:!0,price:"Free",image:"",modules:26,trending:!0},{id:7,title:"Pre & Post-Workout Nutrition",category:"sports",level:"Beginner",duration:"5 weeks",rating:4.7,students:9876,instructor:"Coach Mark Johnson",progress:0,enrolled:!1,price:"Free",image:"",modules:16},{id:8,title:"Supplements for Athletes",category:"sports",level:"Advanced",duration:"6 weeks",rating:4.6,students:5432,instructor:"Dr. Lisa Martinez",progress:0,enrolled:!1,price:"Free",image:"",modules:18},{id:9,title:"Hydration & Electrolytes",category:"sports",level:"Beginner",duration:"4 weeks",rating:4.8,students:7654,instructor:"Dr. Robert Taylor",progress:0,enrolled:!1,price:"Free",image:"",modules:14,new:!0},{id:10,title:"Clinical Nutrition Essentials",category:"clinical",level:"Advanced",duration:"12 weeks",rating:4.9,students:6789,instructor:"Dr. Jennifer Wilson",progress:0,enrolled:!1,price:"Free",image:"",modules:32,trending:!0},{id:11,title:"Medical Nutrition Therapy",category:"clinical",level:"Advanced",duration:"10 weeks",rating:4.8,students:5432,instructor:"Dr. David Brown",progress:0,enrolled:!1,price:"Free",image:"",modules:28},{id:12,title:"Nutrition for Chronic Diseases",category:"clinical",level:"Intermediate",duration:"8 weeks",rating:4.7,students:6543,instructor:"Prof. Emma Davis",progress:0,enrolled:!1,price:"Free",image:"",modules:24},{id:13,title:"Diabetes & Blood Sugar Management",category:"clinical",level:"Intermediate",duration:"7 weeks",rating:4.9,students:8765,instructor:"Dr. Rachel Green",progress:0,enrolled:!1,price:"Free",image:"",modules:22},{id:14,title:"Plant-Based Nutrition Fundamentals",category:"plant-based",level:"Beginner",duration:"6 weeks",rating:4.8,students:12456,instructor:"Sarah Williams",progress:65,enrolled:!0,price:"Free",image:"",modules:20,trending:!0},{id:15,title:"Vegan Protein Sources",category:"plant-based",level:"Beginner",duration:"4 weeks",rating:4.7,students:9876,instructor:"Chef Maria Garcia",progress:0,enrolled:!1,price:"Free",image:"",modules:14},{id:16,title:"Whole Food Plant-Based Diet",category:"plant-based",level:"Intermediate",duration:"7 weeks",rating:4.9,students:7654,instructor:"Dr. Tom Anderson",progress:0,enrolled:!1,price:"Free",image:"",modules:22,new:!0},{id:17,title:"Gut Health & Microbiome",category:"wellness",level:"Intermediate",duration:"8 weeks",rating:4.9,students:9876,instructor:"Prof. Michael Chen",progress:52,enrolled:!0,price:"Free",image:"",modules:24},{id:18,title:"Weight Management Science",category:"wellness",level:"Intermediate",duration:"9 weeks",rating:4.8,students:15234,instructor:"Dr. Lisa Johnson",progress:41,enrolled:!0,price:"Free",image:"",modules:26,trending:!0},{id:19,title:"Holistic Nutrition",category:"wellness",level:"Beginner",duration:"6 weeks",rating:4.7,students:8765,instructor:"Dr. Maya Patel",progress:0,enrolled:!1,price:"Free",image:"",modules:18},{id:20,title:"Stress & Nutrition Connection",category:"wellness",level:"Beginner",duration:"5 weeks",rating:4.8,students:7654,instructor:"Dr. Alex Turner",progress:0,enrolled:!1,price:"Free",image:"",modules:16},{id:21,title:"Ketogenic Diet Science",category:"specialized",level:"Intermediate",duration:"6 weeks",rating:4.7,students:10234,instructor:"Dr. Kevin White",progress:0,enrolled:!1,price:"Free",image:"",modules:18},{id:22,title:"Mediterranean Diet",category:"specialized",level:"Beginner",duration:"5 weeks",rating:4.9,students:11234,instructor:"Chef Isabella Rossi",progress:0,enrolled:!1,price:"Free",image:"",modules:16,trending:!0},{id:23,title:"Gluten-Free Nutrition",category:"specialized",level:"Intermediate",duration:"6 weeks",rating:4.6,students:6543,instructor:"Dr. Anna Schmidt",progress:0,enrolled:!1,price:"Free",image:"",modules:18},{id:24,title:"Anti-Inflammatory Diet",category:"specialized",level:"Intermediate",duration:"7 weeks",rating:4.8,students:8765,instructor:"Dr. Susan Miller",progress:0,enrolled:!1,price:"Free",image:"",modules:20,new:!0},{id:25,title:"Pediatric Nutrition",category:"pediatric",level:"Advanced",duration:"10 weeks",rating:4.9,students:5432,instructor:"Dr. Patricia Moore",progress:0,enrolled:!1,price:"Free",image:"",modules:28},{id:26,title:"Infant & Toddler Feeding",category:"pediatric",level:"Intermediate",duration:"7 weeks",rating:4.8,students:7654,instructor:"Dr. Rebecca Clark",progress:0,enrolled:!1,price:"Free",image:"",modules:22},{id:27,title:"Geriatric Nutrition",category:"geriatric",level:"Advanced",duration:"8 weeks",rating:4.7,students:4321,instructor:"Dr. George Thompson",progress:0,enrolled:!1,price:"Free",image:"",modules:24},{id:28,title:"Nutrition for Healthy Aging",category:"geriatric",level:"Intermediate",duration:"6 weeks",rating:4.8,students:6543,instructor:"Dr. Helen Wright",progress:0,enrolled:!1,price:"Free",image:"",modules:18,new:!0}],g=[...f.filter(E=>{const k=E.title.toLowerCase().includes(e.toLowerCase())||E.instructor.toLowerCase().includes(e.toLowerCase()),T=r==="all"||E.category===r,I=s==="all"||E.level===s;return k&&T&&I})].sort((E,k)=>{switch(a){case"popular":return k.students-E.students;case"rating":return k.rating-E.rating;case"newest":return k.id-E.id;default:return 0}}),w=f.filter(E=>E.enrolled);return f.filter(E=>E.trending),f.filter(E=>E.new),c.jsxs("div",{children:[c.jsx("div",{style:{marginBottom:"2rem"},children:c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[c.jsxs("div",{children:[c.jsxs("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.jsx(Lc,{size:32,color:"#16a34a"}),"Nutrition Learning Hub"]}),c.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"1.1rem"},children:"Master nutrition science with expert-led courses covering all aspects of health and wellness"})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[c.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"var(--surface-color)",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[c.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--primary-color)"},children:f.length}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Total Courses"})]}),c.jsxs("div",{style:{textAlign:"center",padding:"1rem",background:"var(--surface-color)",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[c.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--accent-color)"},children:w.length}),c.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Enrolled"})]})]})]})}),w.length>0&&c.jsxs("div",{style:{marginBottom:"2rem"},children:[c.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Z4,{size:24}),"Continue Learning"]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.5rem"},children:w.map(E=>c.jsxs("div",{style:{background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"12px",padding:"1.5rem",cursor:"pointer",transition:"all 0.3s"},onClick:()=>t(`/course/${E.id}`),onMouseEnter:k=>{k.currentTarget.style.transform="translateY(-4px)",k.currentTarget.style.boxShadow="var(--shadow-md)"},onMouseLeave:k=>{k.currentTarget.style.transform="translateY(0)",k.currentTarget.style.boxShadow="none"},children:[c.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"1rem"},children:E.image}),c.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"0.5rem"},children:E.title}),c.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"1rem"},children:["By ",E.instructor]}),c.jsxs("div",{style:{marginBottom:"0.75rem"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",fontSize:"0.85rem"},children:[c.jsx("span",{children:"Progress"}),c.jsxs("span",{style:{fontWeight:"bold",color:"var(--primary-color)"},children:[E.progress,"%"]})]}),c.jsx("div",{style:{height:"8px",background:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:c.jsx("div",{style:{width:`${E.progress}%`,height:"100%",background:"linear-gradient(90deg, var(--primary-color), var(--accent-color))",transition:"width 0.3s"}})})]})]},E.id))})]}),c.jsxs("div",{style:{background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem"},children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[c.jsxs("div",{style:{position:"relative"},children:[c.jsx(pg,{size:18,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),c.jsx("input",{type:"text",placeholder:"Search courses...",value:e,onChange:E=>n(E.target.value),style:{width:"100%",padding:"0.75rem 1rem 0.75rem 3rem",border:"1px solid var(--border-color)",borderRadius:"8px",fontSize:"0.95rem"}})]}),c.jsxs("select",{value:s,onChange:E=>o(E.target.value),style:{padding:"0.75rem 1rem",border:"1px solid var(--border-color)",borderRadius:"8px",fontSize:"0.95rem"},children:[c.jsx("option",{value:"all",children:"All Levels"}),c.jsx("option",{value:"Beginner",children:"Beginner"}),c.jsx("option",{value:"Intermediate",children:"Intermediate"}),c.jsx("option",{value:"Advanced",children:"Advanced"})]}),c.jsxs("select",{value:a,onChange:E=>u(E.target.value),style:{padding:"0.75rem 1rem",border:"1px solid var(--border-color)",borderRadius:"8px",fontSize:"0.95rem"},children:[c.jsx("option",{value:"popular",children:"Most Popular"}),c.jsx("option",{value:"rating",children:"Highest Rated"}),c.jsx("option",{value:"newest",children:"Newest First"})]})]}),c.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:d.map(E=>c.jsxs("button",{onClick:()=>i(E.id),style:{padding:"0.5rem 1rem",borderRadius:"20px",border:"none",background:r===E.id?"var(--primary-color)":"white",color:r===E.id?"white":"var(--text-primary)",fontSize:"0.85rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},children:[E.label," (",E.count,")"]},E.id))})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1.5rem"},children:g.map(E=>c.jsxs("div",{style:{background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"12px",overflow:"hidden",cursor:"pointer",transition:"all 0.3s",position:"relative"},onClick:()=>t(`/course/${E.id}`),onMouseEnter:k=>{k.currentTarget.style.transform="translateY(-4px)",k.currentTarget.style.boxShadow="var(--shadow-md)"},onMouseLeave:k=>{k.currentTarget.style.transform="translateY(0)",k.currentTarget.style.boxShadow="none"},children:[(E.trending||E.new)&&c.jsxs("div",{style:{position:"absolute",top:"1rem",right:"1rem",zIndex:2},children:[E.trending&&c.jsx("span",{style:{display:"inline-block",padding:"0.25rem 0.75rem",background:"#ef4444",color:"white",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600",marginLeft:"0.5rem"},children:"TRENDING"}),E.new&&c.jsx("span",{style:{display:"inline-block",padding:"0.25rem 0.75rem",background:"var(--primary-color)",color:"white",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600"},children:"NEW"})]}),c.jsx("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)",textAlign:"center"},children:c.jsx("div",{style:{fontSize:"3.5rem"},children:E.image})}),c.jsxs("div",{style:{padding:"1.25rem"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[c.jsx("span",{style:{padding:"0.25rem 0.75rem",background:E.level==="Beginner"?"#dcfce7":E.level==="Intermediate"?"#fef3c7":"#fee2e2",color:E.level==="Beginner"?"#166534":E.level==="Intermediate"?"#92400e":"#991b1b",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600"},children:E.level}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(Ei,{size:14,fill:"#FFC107",color:"#FFC107"}),c.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"600"},children:E.rating})]})]}),c.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:"600",marginBottom:"0.5rem",lineHeight:"1.4"},children:E.title}),c.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"1rem"},children:["By ",E.instructor]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"1rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(Li,{size:14}),E.duration]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(il,{size:14}),E.modules," modules"]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(mg,{size:14}),E.students.toLocaleString()]})]}),E.enrolled&&c.jsxs("div",{style:{padding:"0.75rem",background:"#f0fdf4",borderRadius:"8px",border:"1px solid #bbf7d0",marginBottom:"0.75rem"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",fontSize:"0.85rem"},children:[c.jsx("span",{children:"Progress"}),c.jsxs("span",{style:{fontWeight:"bold",color:"var(--primary-color)"},children:[E.progress,"%"]})]}),c.jsx("div",{style:{height:"6px",background:"#e0e0e0",borderRadius:"3px",overflow:"hidden"},children:c.jsx("div",{style:{width:`${E.progress}%`,height:"100%",background:"var(--primary-color)",transition:"width 0.3s"}})})]}),c.jsx("button",{style:{width:"100%",padding:"0.75rem",background:E.enrolled?"var(--primary-color)":"white",color:E.enrolled?"white":"var(--primary-color)",border:E.enrolled?"none":"2px solid var(--primary-color)",borderRadius:"8px",fontWeight:"600",fontSize:"0.9rem",cursor:"pointer",transition:"all 0.2s"},children:E.enrolled?"Continue Learning":"Enroll Now"})]})]},E.id))})]})},uM="/assets/4549682-hd_1920_1080_30fps-BNf-gCX3.mp4",cM=()=>{const{courseId:t}=EA(),e=$i(),[n,r]=F.useState(0),[i,s]=F.useState(0),[o,a]=F.useState({0:!0}),u={title:"Clinical Nutrition Fundamentals",progress:15,modules:[{title:"Module 1: Introduction to Clinical Nutrition",lessons:[{title:"Role of Clinical Dietitians",duration:"10:00",completed:!0},{title:"Evidence-Based Nutrition Practice",duration:"15:00",completed:!0},{title:"Medical Terminology Essentials",duration:"25:00",completed:!1}]},{title:"Module 2: Nutritional Assessment",lessons:[{title:"Anthropometric Measurements",duration:"20:00",completed:!1},{title:"Biochemical Lab Interpretations",duration:"30:00",completed:!1},{title:"Clinical & Physical Assessment",duration:"15:00",completed:!1}]},{title:"Module 3: Medical Nutrition Therapy Basics",lessons:[{title:"Nutrition Care Process (NCP)",duration:"45:00",completed:!1},{title:"Diet Prescription & Modifications",duration:"40:00",completed:!1},{title:"Therapeutic Diet Planning",duration:"35:00",completed:!1}]},{title:"Module 4: Cardiovascular Disease Nutrition",lessons:[{title:"Hypertension Management",duration:"20:00",completed:!1},{title:"Heart Failure & Nutrition",duration:"30:00",completed:!1},{title:"Lipid Disorders & DASH Diet",duration:"45:00",completed:!1}]},{title:"Module 5: Diabetes Management",lessons:[{title:"Type 1 & Type 2 Diabetes Nutrition",duration:"25:00",completed:!1},{title:"Carbohydrate Counting Methods",duration:"35:00",completed:!1},{title:"Insulin Therapy & Nutrition",duration:"30:00",completed:!1}]},{title:"Module 6: Gastrointestinal Disorders",lessons:[{title:"IBD & IBS Nutrition Management",duration:"40:00",completed:!1},{title:"Celiac Disease & Gluten-Free Diets",duration:"45:00",completed:!1},{title:"GERD & Reflux Management",duration:"50:00",completed:!1}]},{title:"Module 7: Renal Nutrition",lessons:[{title:"Chronic Kidney Disease Stages",duration:"30:00",completed:!1},{title:"Dialysis Nutrition Management",duration:"55:00",completed:!1},{title:"Fluid & Electrolyte Balance",duration:"40:00",completed:!1}]},{title:"Module 8: Critical Care Nutrition",lessons:[{title:"Enteral & Parenteral Nutrition",duration:"25:00",completed:!1},{title:"ICU Patient Nutrition Support",duration:"60:00",completed:!1},{title:"Wound Healing & Nutrition",duration:"35:00",completed:!1}]},{title:"Module 9: Oncology Nutrition",lessons:[{title:"Cancer & Nutritional Impact",duration:"40:00",completed:!1},{title:"Managing Treatment Side Effects",duration:"45:00",completed:!1},{title:"Palliative & Supportive Care",duration:"30:00",completed:!1}]},{title:"Module 10: Case Studies & Simulations",lessons:[{title:"Complex Case Analysis",duration:"45:00",completed:!1},{title:"Interactive Patient Simulations",duration:"20:00",completed:!1},{title:"Clinical Documentation Practice",duration:"50:00",completed:!1}]}]},d=p=>{a(g=>({...g,[p]:!g[p]}))},f=u.modules[n].lessons[i];return c.jsxs("div",{style:{display:"flex",height:"calc(100vh - 70px)",overflow:"hidden"},children:[c.jsxs("div",{style:{width:"350px",borderRight:"1px solid var(--border-color)",background:"var(--surface-color)",overflowY:"auto",display:"flex",flexDirection:"column"},children:[c.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border-color)"},children:[c.jsxs("button",{onClick:()=>e("/courses"),className:"btn",style:{marginBottom:"1rem",padding:"0.25rem 0.5rem",fontSize:"0.8rem"},children:[c.jsx(L4,{size:14})," Back to Courses"]}),c.jsx("h2",{style:{fontSize:"1.2rem",marginBottom:"0.5rem"},children:u.title}),c.jsx("div",{style:{width:"100%",height:"4px",background:"var(--surface-hover)",borderRadius:"2px"},children:c.jsx("div",{style:{width:`${u.progress}%`,height:"100%",background:"var(--primary-color)",borderRadius:"2px"}})}),c.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.5rem"},children:[u.progress,"% Completed"]})]}),c.jsx("div",{style:{flex:1},children:u.modules.map((p,g)=>c.jsxs("div",{style:{borderBottom:"1px solid var(--border-color)"},children:[c.jsxs("div",{onClick:()=>d(g),style:{padding:"1rem",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--surface-hover)"},children:[c.jsx("span",{style:{fontWeight:"600",fontSize:"0.9rem"},children:p.title}),o[g]?c.jsx(W4,{size:16}):c.jsx(H4,{size:16})]}),o[g]&&c.jsx("div",{children:p.lessons.map((w,E)=>c.jsxs("div",{onClick:()=>{r(g),s(E)},style:{padding:"0.75rem 1rem 0.75rem 2rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.75rem",background:n===g&&i===E?"rgba(11, 61, 145, 0.05)":"transparent",borderLeft:n===g&&i===E?"3px solid var(--primary-color)":"3px solid transparent"},children:[w.completed?c.jsx(Ds,{size:16,color:"#4CAF50"}):c.jsx(PT,{size:16,color:n===g&&i===E?"var(--primary-color)":"var(--text-secondary)"}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontSize:"0.9rem",color:n===g&&i===E?"var(--primary-color)":"var(--text-primary)"},children:w.title}),c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:w.duration})]})]},E))})]},g))})]}),c.jsx("div",{style:{flex:1,overflowY:"auto",background:"var(--bg-color)"},children:c.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"2rem"},children:[c.jsx("div",{style:{aspectRatio:"16/9",background:"#000",borderRadius:"12px",marginBottom:"2rem",overflow:"hidden",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:c.jsx("video",{controls:!0,width:"100%",height:"100%",src:uM,style:{display:"block",width:"100%",height:"100%",objectFit:"cover"},children:"Your browser does not support the video tag."})}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[c.jsxs("div",{children:[c.jsx("h1",{style:{fontSize:"1.8rem",marginBottom:"0.5rem"},children:f.title}),c.jsx("p",{style:{color:"var(--text-secondary)"},children:u.modules[n].title})]}),c.jsx("button",{className:"btn btn-primary",children:"Mark as Complete"})]}),c.jsxs("div",{style:{background:"var(--surface-color)",padding:"2rem",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[c.jsx("h3",{style:{marginBottom:"1rem"},children:"Lesson Notes"}),c.jsxs("p",{style:{lineHeight:"1.6",color:"var(--text-secondary)"},children:["In this lesson, we will explore the essential concepts of ",f.title,". Prepare your clinical reference materials and review relevant patient case guidelines. We will use interactive simulations and real-world scenarios.",c.jsx("br",{}),c.jsx("br",{}),c.jsx("strong",{children:"Key Learning Objectives:"}),c.jsxs("ul",{style:{listStyle:"disc",marginLeft:"1.5rem",marginTop:"0.5rem"},children:[c.jsx("li",{children:"Understanding clinical assessment techniques"}),c.jsx("li",{children:"Evidence-based nutrition intervention strategies"}),c.jsx("li",{children:"Common clinical challenges and solutions"})]})]})]})]})})]})},dM=()=>{const[t,e]=F.useState("all"),n=[{id:"all",label:"All Programs",count:12},{id:"certification",label:"Certifications",count:5},{id:"internship",label:"Internships",count:3},{id:"workshop",label:"Workshops",count:4}],r=[{id:1,title:"Certified Nutrition Specialist (CNS)",organization:"International Nutrition Board",location:"Online",duration:"12 Months",type:"Certification",category:"certification",stipend:"Self-paced",description:"Comprehensive certification program covering all aspects of clinical nutrition, dietary planning, and nutritional counseling.",requirements:["Bachelor's degree","Basic nutrition knowledge","1000 hours supervised practice"],benefits:["Globally recognized","Career advancement","Clinical practice eligibility"],deadline:"Rolling admissions",applicants:2341,rating:4.9,featured:!0},{id:2,title:"Registered Dietitian Internship",organization:"National Dietetic Association",location:"Mumbai, India",duration:"9 Months",type:"Internship",category:"internship",stipend:"20,000/mo",description:"Hands-on clinical dietitian training in hospital and community settings with expert supervision.",requirements:["Nutrition degree","CGPA 7.5+","Cleared national exam"],benefits:["Hospital experience","Patient counseling","RD eligibility"],deadline:"Feb 15, 2026",applicants:1456,rating:4.8,featured:!0},{id:3,title:"Sports Nutrition Specialist",organization:"Sports Science Institute",location:"Bangalore, India",duration:"6 Months",type:"Certification",category:"certification",stipend:"Self-paced",description:"Advanced training in athletic nutrition, performance optimization, and supplement guidance for athletes.",requirements:["Nutrition background","Sports interest","100 hours supervised"],benefits:["Work with athletes","Sports teams access","ISSN certification"],deadline:"Mar 1, 2026",applicants:987,rating:4.7,featured:!1},{id:4,title:"Plant-Based Nutrition Certificate",organization:"Vegan Nutrition Academy",location:"Online",duration:"4 Months",type:"Certification",category:"certification",stipend:"Self-paced",description:"Specialized training in vegan and vegetarian nutrition, meal planning, and plant-based counseling.",requirements:["Open to all","Passion for plant-based","Basic nutrition"],benefits:["Growing field","Online practice","Recipe certification"],deadline:"Rolling admissions",applicants:1876,rating:4.9,featured:!1},{id:5,title:"Clinical Nutrition Internship",organization:"Apollo Hospitals",location:"Delhi, India",duration:"12 Months",type:"Internship",category:"internship",stipend:"25,000/mo",description:"Comprehensive hospital-based nutrition training covering ICU, pediatrics, oncology, and general wards.",requirements:["MSc Nutrition","CGPA 8.0+","Medical background preferred"],benefits:["Top hospital","Multi-specialty exposure","Job placement"],deadline:"Jan 31, 2026",applicants:2134,rating:4.9,featured:!0},{id:6,title:"Pediatric Nutrition Workshop",organization:"Child Health Foundation",location:"Chennai, India",duration:"2 Weeks",type:"Workshop",category:"workshop",stipend:"Free",description:"Intensive workshop on infant and child nutrition, growth monitoring, and feeding disorders.",requirements:["Healthcare professional","Interest in pediatrics"],benefits:["Expert speakers","Hands-on training","Certificate"],deadline:"Feb 10, 2026",applicants:456,rating:4.7,featured:!1},{id:7,title:"Wellness Coach Certification",organization:"Holistic Health Institute",location:"Online",duration:"5 Months",type:"Certification",category:"certification",stipend:"Self-paced",description:"Train to become a certified wellness coach specializing in lifestyle, nutrition, and behavior change.",requirements:["Open to all","Coaching interest","Complete assignments"],benefits:["Start own practice","Global recognition","Business training"],deadline:"Rolling admissions",applicants:1234,rating:4.8,featured:!1},{id:8,title:"Geriatric Nutrition Internship",organization:"Senior Care Nutrition",location:"Pune, India",duration:"6 Months",type:"Internship",category:"internship",stipend:"18,000/mo",description:"Specialized training in elderly nutrition, age-related diseases, and long-term care nutrition planning.",requirements:["Nutrition degree","Compassionate care","Communication skills"],benefits:["Growing field","Specialized expertise","Elder care homes"],deadline:"Mar 15, 2026",applicants:678,rating:4.6,featured:!1},{id:9,title:"Food Science Workshop",organization:"Culinary Nutrition Lab",location:"Goa, India",duration:"1 Week",type:"Workshop",category:"workshop",stipend:"Paid accommodation",description:"Hands-on workshop covering food chemistry, preservation, product development, and sensory science.",requirements:["Food/nutrition student","Lab experience helpful"],benefits:["Industry exposure","Networking","Recipe development"],deadline:"Feb 28, 2026",applicants:234,rating:4.8,featured:!1},{id:10,title:"Diabetes Education Specialist",organization:"Diabetes Foundation of India",location:"Hyderabad, India",duration:"3 Months",type:"Workshop",category:"workshop",stipend:"15,000/mo",description:"Intensive training in diabetes management, blood sugar monitoring, and patient education.",requirements:["Healthcare background","Basic nutrition","Patient care skills"],benefits:["High demand","Specialized skill","Clinic opportunities"],deadline:"Jan 25, 2026",applicants:892,rating:4.9,featured:!1},{id:11,title:"Functional Nutrition Practitioner",organization:"Functional Medicine Academy",location:"Online",duration:"8 Months",type:"Certification",category:"certification",stipend:"Self-paced",description:"Advanced training in functional nutrition, root cause analysis, and personalized nutrition protocols.",requirements:["Healthcare degree","Clinical interest","Case studies"],benefits:["Functional medicine","Private practice","Premium services"],deadline:"Rolling admissions",applicants:1567,rating:4.8,featured:!1},{id:12,title:"Community Nutrition Workshop",organization:"Public Health Nutrition",location:"Kolkata, India",duration:"2 Weeks",type:"Workshop",category:"workshop",stipend:"Free",description:"Learn community-based nutrition programs, public health interventions, and nutrition education.",requirements:["Open to all","Community service interest"],benefits:["Social impact","Field experience","Government programs"],deadline:"Feb 20, 2026",applicants:345,rating:4.7,featured:!1}],i=r.filter(o=>t==="all"||o.category===t),s=r.filter(o=>o.featured);return c.jsxs("div",{children:[c.jsxs("div",{style:{marginBottom:"2rem"},children:[c.jsxs("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.jsx(vn,{size:32,color:"#16a34a"}),"Nutrition Programs & Certifications"]}),c.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"1.1rem"},children:"Advance your career with professional certifications, internships, and specialized training programs"})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{style:{padding:"1.5rem",background:"var(--surface-color)",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--primary-color)",marginBottom:"0.5rem"},children:r.length}),c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Available Programs"})]}),c.jsxs("div",{style:{padding:"1.5rem",background:"var(--surface-color)",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#3b82f6",marginBottom:"0.5rem"},children:"5"}),c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Certifications"})]}),c.jsxs("div",{style:{padding:"1.5rem",background:"var(--surface-color)",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--accent-color)",marginBottom:"0.5rem"},children:"3"}),c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Internships"})]}),c.jsxs("div",{style:{padding:"1.5rem",background:"var(--surface-color)",borderRadius:"12px",border:"1px solid var(--border-color)"},children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#8b5cf6",marginBottom:"0.5rem"},children:"4"}),c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Workshops"})]})]}),s.length>0&&c.jsxs("div",{style:{marginBottom:"2rem"},children:[c.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Ei,{size:24,fill:"#FFC107",color:"#FFC107"}),"Featured Programs"]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:"1.5rem"},children:s.map(o=>c.jsxs("div",{style:{background:"linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)",border:"2px solid var(--primary-color)",borderRadius:"16px",padding:"2rem",position:"relative"},children:[c.jsx("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:"var(--primary-color)",color:"white",padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600"},children:"FEATURED"}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("h3",{style:{fontSize:"1.3rem",fontWeight:"700",marginBottom:"0.5rem",color:"var(--primary-color)"},children:o.title}),c.jsx("p",{style:{fontSize:"1rem",fontWeight:"500",color:"var(--text-secondary)"},children:o.organization})]}),c.jsx("p",{style:{fontSize:"0.95rem",lineHeight:"1.6",marginBottom:"1rem",color:"var(--text-primary)"},children:o.description}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem"},children:[c.jsx(pp,{size:16,color:"var(--primary-color)"}),o.location]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem"},children:[c.jsx(Li,{size:16,color:"var(--primary-color)"}),o.duration]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem"},children:[c.jsx(vn,{size:16,color:"var(--primary-color)"}),o.type]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem"},children:[c.jsx(mg,{size:16,color:"var(--primary-color)"}),o.applicants," applicants"]})]}),c.jsx("button",{style:{width:"100%",padding:"0.875rem",background:"var(--primary-color)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",fontSize:"1rem",cursor:"pointer",transition:"all 0.2s"},children:"Apply Now"})]},o.id))})]}),c.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"2rem",flexWrap:"wrap"},children:n.map(o=>c.jsxs("button",{onClick:()=>e(o.id),style:{padding:"0.75rem 1.5rem",borderRadius:"20px",border:"none",background:t===o.id?"var(--primary-color)":"var(--surface-color)",color:t===o.id?"white":"var(--text-primary)",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",boxShadow:t===o.id?"0 4px 12px rgba(22, 163, 74, 0.3)":"none"},children:[o.label," (",o.count,")"]},o.id))}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:i.map(o=>c.jsxs("div",{style:{background:"var(--surface-color)",border:"1px solid var(--border-color)",borderRadius:"12px",padding:"1.5rem",transition:"all 0.3s",cursor:"pointer",position:"relative"},onMouseEnter:a=>{a.currentTarget.style.transform="translateY(-4px)",a.currentTarget.style.boxShadow="var(--shadow-md)"},onMouseLeave:a=>{a.currentTarget.style.transform="translateY(0)",a.currentTarget.style.boxShadow="none"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1rem"},children:[c.jsx("div",{children:c.jsx("span",{style:{display:"inline-block",padding:"0.25rem 0.75rem",background:o.type==="Certification"?"#dbeafe":o.type==="Internship"?"#fef3c7":"#ede9fe",color:o.type==="Certification"?"#1e40af":o.type==="Internship"?"#92400e":"#5b21b6",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600",marginBottom:"0.75rem"},children:o.type})}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(Ei,{size:14,fill:"#FFC107",color:"#FFC107"}),c.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"600"},children:o.rating})]})]}),c.jsx("h3",{style:{fontSize:"1.15rem",fontWeight:"600",marginBottom:"0.5rem",lineHeight:"1.3"},children:o.title}),c.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:"1rem"},children:o.organization}),c.jsx("p",{style:{fontSize:"0.9rem",lineHeight:"1.5",marginBottom:"1rem",color:"var(--text-primary)"},children:o.description}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1rem",fontSize:"0.85rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(pp,{size:14}),o.location]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Li,{size:14}),o.duration]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(NT,{size:14}),o.stipend]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(fg,{size:14}),o.deadline]})]}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("div",{style:{fontSize:"0.85rem",fontWeight:"600",marginBottom:"0.5rem"},children:"Requirements:"}),c.jsx("ul",{style:{margin:0,paddingLeft:"1.5rem",fontSize:"0.85rem",color:"var(--text-secondary)"},children:o.requirements.map((a,u)=>c.jsx("li",{style:{marginBottom:"0.25rem"},children:a},u))})]}),c.jsx("button",{style:{width:"100%",padding:"0.75rem",background:"var(--primary-color)",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",fontSize:"0.9rem",cursor:"pointer",transition:"all 0.2s"},children:"View Details & Apply"})]},o.id))})]})},hM=()=>{const[t,e]=F.useState("all"),[n,r]=F.useState(""),i=[{id:"all",label:"All Resources",icon:c.jsx(zu,{size:16})},{id:"documents",label:"Guides & PDFs",icon:c.jsx(zu,{size:16})},{id:"videos",label:"Videos",icon:c.jsx(P_,{size:16})},{id:"recipes",label:"Recipes",icon:c.jsx(Lc,{size:16})},{id:"links",label:"External Links",icon:c.jsx(k_,{size:16})}],s=[{id:1,title:"Complete Nutrition Guide",description:"Comprehensive guide covering macronutrients, micronutrients, and meal planning",type:"documents",format:"PDF",size:"4.2 MB",downloads:3456,category:"Nutrition Basics",downloadUrl:"#",rating:4.9},{id:2,title:"Sports Nutrition Handbook",description:"Complete reference for pre/post-workout nutrition and athletic performance",type:"documents",format:"PDF",size:"3.8 MB",downloads:2876,category:"Sports Nutrition",downloadUrl:"#",rating:4.8},{id:3,title:"Plant-Based Protein Guide",description:"Visual guide to complete plant-based protein sources and combinations",type:"documents",format:"PDF",size:"2.5 MB",downloads:4123,category:"Plant-Based",downloadUrl:"#",rating:4.9},{id:4,title:"Food Label Reading Master Guide",description:"Learn to decode nutrition labels, ingredients, and health claims",type:"documents",format:"PDF",size:"1.8 MB",downloads:5234,category:"Basics",downloadUrl:"#",rating:4.7},{id:5,title:"Meal Prep Planning Templates",description:"Weekly meal planning templates with shopping lists and prep guides",type:"documents",format:"PDF",size:"2.2 MB",downloads:6789,category:"Meal Planning",downloadUrl:"#",rating:4.9},{id:6,title:"Macronutrients Explained",description:"Detailed video series on carbs, protein, and fats",type:"videos",format:"MP4",duration:"45 min",views:12456,category:"Nutrition Basics",downloadUrl:"#",rating:4.8},{id:7,title:"Gut Health Masterclass",description:"Understanding the microbiome and digestive wellness",type:"videos",format:"MP4",duration:"60 min",views:8765,category:"Wellness",downloadUrl:"#",rating:4.9},{id:8,title:"Healthy Cooking Techniques",description:"Learn nutrient-preserving cooking methods and meal prep",type:"videos",format:"MP4",duration:"38 min",views:9876,category:"Cooking",downloadUrl:"#",rating:4.7},{id:9,title:"High-Protein Breakfasts",description:"15 delicious breakfast recipes with 25g+ protein",type:"recipes",format:"PDF",servings:"1-2",difficulty:"Easy",category:"Meals",downloadUrl:"#",rating:4.9},{id:10,title:"Plant-Based Meal Ideas",description:"20 complete plant-based meals with nutritional info",type:"recipes",format:"PDF",servings:"2-4",difficulty:"Medium",category:"Plant-Based",downloadUrl:"#",rating:4.8},{id:11,title:"Healthy Snacks Under 200 Calories",description:"30 satisfying snack ideas for weight management",type:"recipes",format:"PDF",servings:"1",difficulty:"Easy",category:"Snacks",downloadUrl:"#",rating:4.8},{id:12,title:"USDA FoodData Central",description:"Official database of food composition and nutrition information",type:"links",url:"https://fdc.nal.usda.gov/",category:"Databases",rating:4.9},{id:13,title:"WHO Nutrition Guidelines",description:"World Health Organization official nutrition recommendations",type:"links",url:"https://www.who.int/health-topics/nutrition",category:"Guidelines",rating:4.9},{id:14,title:"Academy of Nutrition and Dietetics",description:"Professional resources and evidence-based nutrition information",type:"links",url:"https://www.eatright.org/",category:"Professional",rating:4.8}],o=s.filter(a=>{const u=t==="all"||a.type===t,d=a.title.toLowerCase().includes(n.toLowerCase())||a.description.toLowerCase().includes(n.toLowerCase());return u&&d});return c.jsxs("div",{style:{padding:"2rem"},children:[c.jsxs("div",{style:{marginBottom:"2rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[c.jsx(il,{size:32,style:{color:"var(--primary-color)"}}),c.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",margin:0},children:"Learning Resources"})]}),c.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"1.1rem"},children:"Essential nutrition guides, videos, recipes, and reference materials"})]}),c.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap",alignItems:"center"},children:[c.jsxs("div",{style:{flex:"1",minWidth:"300px",position:"relative"},children:[c.jsx(pg,{size:20,style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),c.jsx("input",{type:"text",placeholder:"Search resources...",value:n,onChange:a=>r(a.target.value),style:{width:"100%",padding:"0.75rem 1rem 0.75rem 3rem",border:"2px solid var(--border-color)",borderRadius:"8px",fontSize:"1rem"}})]}),c.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:i.map(a=>c.jsxs("button",{onClick:()=>e(a.id),style:{padding:"0.75rem 1.25rem",background:t===a.id?"var(--primary-color)":"white",color:t===a.id?"white":"var(--text-color)",border:"2px solid",borderColor:t===a.id?"var(--primary-color)":"var(--border-color)",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:"500",transition:"all 0.2s"},children:[a.icon,a.label]},a.id))})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #16a34a 0%, #15803d 100%)",borderRadius:"12px",color:"white"},children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:s.filter(a=>a.type==="documents").length}),c.jsx("div",{style:{opacity:.9},children:"Guides & PDFs"})]}),c.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)",borderRadius:"12px",color:"white"},children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:s.filter(a=>a.type==="videos").length}),c.jsx("div",{style:{opacity:.9},children:"Video Tutorials"})]}),c.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%)",borderRadius:"12px",color:"white"},children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:s.filter(a=>a.type==="recipes").length}),c.jsx("div",{style:{opacity:.9},children:"Recipe Collections"})]}),c.jsxs("div",{style:{padding:"1.5rem",background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",borderRadius:"12px",color:"white"},children:[c.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:s.filter(a=>a.type==="links").length}),c.jsx("div",{style:{opacity:.9},children:"External Resources"})]})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:o.map(a=>c.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"1.5rem",border:"2px solid var(--border-color)",transition:"all 0.3s",cursor:"pointer"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-4px)",u.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.12)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="none"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",marginBottom:"1rem"},children:[c.jsxs("div",{style:{width:"48px",height:"48px",borderRadius:"10px",background:a.type==="documents"?"linear-gradient(135deg, #16a34a 0%, #15803d 100%)":a.type==="videos"?"linear-gradient(135deg, #f97316 0%, #ea580c 100%)":a.type==="recipes"?"linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%)":"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:[a.type==="documents"&&c.jsx(zu,{size:24}),a.type==="videos"&&c.jsx(P_,{size:24}),a.type==="recipes"&&c.jsx(Lc,{size:24}),a.type==="links"&&c.jsx(k_,{size:24})]}),c.jsxs("div",{style:{flex:1},children:[c.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"0.5rem"},children:a.title}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[[...Array(5)].map((u,d)=>c.jsx(Ei,{size:14,fill:d<Math.floor(a.rating)?"#fbbf24":"none",stroke:"#fbbf24"},d)),c.jsx("span",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:a.rating})]})]})]}),c.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.95rem",marginBottom:"1rem",lineHeight:"1.5"},children:a.description}),c.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"1rem",fontSize:"0.85rem",color:"var(--text-secondary)"},children:[c.jsx("span",{style:{padding:"0.25rem 0.75rem",background:"var(--background-secondary)",borderRadius:"6px"},children:a.category}),a.format&&c.jsx("span",{style:{padding:"0.25rem 0.75rem",background:"var(--background-secondary)",borderRadius:"6px"},children:a.format}),a.size&&c.jsx("span",{style:{padding:"0.25rem 0.75rem",background:"var(--background-secondary)",borderRadius:"6px"},children:a.size}),a.duration&&c.jsx("span",{style:{padding:"0.25rem 0.75rem",background:"var(--background-secondary)",borderRadius:"6px"},children:a.duration}),a.servings&&c.jsxs("span",{style:{padding:"0.25rem 0.75rem",background:"var(--background-secondary)",borderRadius:"6px"},children:["Serves ",a.servings]})]}),c.jsxs("button",{style:{width:"100%",padding:"0.75rem",background:"var(--primary-color)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"0.95rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.2s"},children:[c.jsx(fp,{size:16}),a.type==="links"?"Visit Resource":"Download"]})]},a.id))})]})},fM=()=>{const[t,e]=F.useState(null),[n,r]=F.useState("all"),i=[{id:1,title:"Clinical Nutrition Fundamentals",issuer:"NutraSim Academy",issueDate:"November 15, 2024",score:"95%",grade:"A+",credentialId:"NS-CN-2024-001-AYN",skills:["Patient Assessment","Nutritional Planning","Clinical Guidelines","Diet Therapy"],verified:!0,category:"Clinical Nutrition"},{id:2,title:"Sports Nutrition & Performance",issuer:"NutraSim Academy",issueDate:"October 28, 2024",score:"92%",grade:"A",credentialId:"NS-SP-2024-002-AYN",skills:["Performance Nutrition","Supplementation","Recovery Protocols","Body Composition"],verified:!0,category:"Sports Nutrition"},{id:3,title:"Pediatric Nutrition Specialist",issuer:"NutraSim Academy",issueDate:"October 10, 2024",score:"88%",grade:"A",credentialId:"NS-PN-2024-003-AYN",skills:["Child Development","Growth Monitoring","Feeding Disorders","Maternal Nutrition"],verified:!0,category:"Specialized Nutrition"},{id:4,title:"Metabolic Syndrome Management",issuer:"NutraSim Academy",issueDate:"September 22, 2024",score:"90%",grade:"A",credentialId:"NS-MS-2024-004-AYN",skills:["Diabetes Care","Obesity Management","Cardiovascular Nutrition","Lifestyle Intervention"],verified:!0,category:"Clinical Nutrition"},{id:5,title:"Nutrition Case Study Mastery",issuer:"NutraSim Academy",issueDate:"September 5, 2024",score:"94%",grade:"A+",credentialId:"NS-CS-2024-005-AYN",skills:["Case Analysis","Simulation Practice","Clinical Reasoning","Evidence-Based Practice"],verified:!0,category:"Simulation Training"}],s={total:i.length,thisMonth:1,avgScore:"91.8%",verified:i.filter(f=>f.verified).length},o=["all",...new Set(i.map(f=>f.category))],a=n==="all"?i:i.filter(f=>f.category===n),u=f=>{alert(`Downloading certificate: ${f.title}
Credential ID: ${f.credentialId}

This is a demo - actual PDF download would start here.`)},d=f=>{const p=`I just earned a certificate in ${f.title}! Score: ${f.score}
Credential ID: ${f.credentialId}`;navigator.share?navigator.share({title:f.title,text:p}):(navigator.clipboard.writeText(p),alert("Certificate details copied to clipboard!"))};return c.jsxs("div",{children:[c.jsxs("div",{style:{marginBottom:"2rem"},children:[c.jsx("h1",{children:"My Certificates"}),c.jsx("p",{style:{color:"var(--text-secondary)"},children:"View, download, and share your earned certificates."})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[c.jsxs("div",{style:{background:"linear-gradient(135deg, #8B9D7F 0%, #6B7D5F 100%)",color:"white",padding:"1.75rem",borderRadius:"18px",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.06)"},children:[c.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:s.total}),c.jsx("div",{style:{opacity:.95},children:"Total Certificates"})]}),c.jsxs("div",{style:{background:"linear-gradient(135deg, #A4B494 0%, #8B9D7F 100%)",color:"white",padding:"1.75rem",borderRadius:"18px",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.06)"},children:[c.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:s.thisMonth}),c.jsx("div",{style:{opacity:.95},children:"Earned This Month"})]}),c.jsxs("div",{style:{background:"linear-gradient(135deg, #E8B878 0%, #D4A574 100%)",color:"white",padding:"1.75rem",borderRadius:"18px",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.06)"},children:[c.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:s.avgScore}),c.jsx("div",{style:{opacity:.95},children:"Average Score"})]}),c.jsxs("div",{style:{background:"linear-gradient(135deg, #E8945A 0%, #D97642 100%)",color:"white",padding:"1.75rem",borderRadius:"18px",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.06)"},children:[c.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:s.verified}),c.jsx("div",{style:{opacity:.95},children:"Verified"})]})]}),c.jsx("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"2rem",flexWrap:"wrap"},children:o.map(f=>c.jsx("button",{onClick:()=>r(f),style:{padding:"0.625rem 1.25rem",background:n===f?"#8B9D7F":"#FFFFFF",color:n===f?"white":"#3E342B",border:`1px solid ${n===f?"#8B9D7F":"#E5DFD6"}`,borderRadius:"24px",cursor:"pointer",fontWeight:"500",textTransform:"capitalize",transition:"all 0.2s",fontSize:"0.9375rem"},onMouseEnter:p=>{n!==f&&(p.currentTarget.style.background="#FAF8F5",p.currentTarget.style.borderColor="#8B9D7F")},onMouseLeave:p=>{n!==f&&(p.currentTarget.style.background="#FFFFFF",p.currentTarget.style.borderColor="#E5DFD6")},children:f},f))}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:a.map(f=>c.jsxs("div",{style:{background:"#FFFFFF",border:"1px solid #E5DFD6",borderRadius:"18px",overflow:"hidden",transition:"all 0.2s",cursor:"pointer",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.06)"},onMouseEnter:p=>{p.currentTarget.style.transform="translateY(-4px)",p.currentTarget.style.boxShadow="0 8px 16px 0 rgba(62, 52, 43, 0.12)",p.currentTarget.style.borderColor="#8B9D7F"},onMouseLeave:p=>{p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 2px 4px 0 rgba(62, 52, 43, 0.06)",p.currentTarget.style.borderColor="#E5DFD6"},children:[c.jsxs("div",{style:{background:"linear-gradient(135deg, #A4B494 0%, #8B9D7F 100%)",padding:"2.25rem",color:"white",textAlign:"center",position:"relative"},children:[f.verified&&c.jsxs("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:"#6B7D5F",padding:"0.375rem 0.875rem",borderRadius:"24px",fontSize:"0.75rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.375rem"},children:[c.jsx(Ds,{size:12})," Verified"]}),c.jsx(vn,{size:52,style:{marginBottom:"1rem",opacity:.95,strokeWidth:1.5}}),c.jsx("h3",{style:{marginBottom:"0.5rem",fontSize:"1.25rem",fontWeight:"600"},children:f.title}),c.jsx("div",{style:{opacity:.9,fontSize:"0.9375rem"},children:f.issuer})]}),c.jsxs("div",{style:{padding:"1.5rem"},children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Issue Date"}),c.jsxs("div",{style:{fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(fg,{size:14}),new Date(f.issueDate).toLocaleDateString("en-US",{month:"short",year:"numeric"})]})]}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Score"}),c.jsxs("div",{style:{fontWeight:"600",color:"var(--primary-color)",fontSize:"1.1rem"},children:[f.score," (",f.grade,")"]})]})]}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:"Skills Acquired"}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:f.skills.map((p,g)=>c.jsx("span",{style:{padding:"0.25rem 0.75rem",background:"var(--surface-hover)",borderRadius:"20px",fontSize:"0.8rem",color:"var(--text-primary)"},children:p},g))})]}),c.jsxs("div",{style:{padding:"0.75rem",background:"var(--surface-hover)",borderRadius:"8px",marginBottom:"1rem"},children:[c.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Credential ID"}),c.jsx("div",{style:{fontFamily:"monospace",fontSize:"0.9rem",fontWeight:"600",color:"var(--primary-color)"},children:f.credentialId})]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsxs("button",{onClick:()=>e(f),style:{flex:1,padding:"0.75rem",background:"var(--surface-hover)",border:"1px solid var(--border-color)",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontWeight:"500"},children:[c.jsx(G4,{size:16})," View"]}),c.jsxs("button",{onClick:()=>u(f),style:{flex:1,padding:"0.75rem",background:"var(--primary-color)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontWeight:"500"},children:[c.jsx(fp,{size:16})," Download"]}),c.jsx("button",{onClick:()=>d(f),style:{padding:"0.75rem",background:"var(--surface-hover)",border:"1px solid var(--border-color)",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(b_,{size:16})})]})]})]},f.id))}),t&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"2rem"},onClick:()=>e(null),children:c.jsxs("div",{style:{background:"white",borderRadius:"16px",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto",position:"relative"},onClick:f=>f.stopPropagation(),children:[c.jsx("button",{onClick:()=>e(null),style:{position:"absolute",top:"1rem",right:"1rem",background:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",zIndex:10},children:c.jsx(Cd,{size:20})}),c.jsxs("div",{style:{padding:"3rem",background:"linear-gradient(135deg, #0B3D91 0%, #1E5A9A 100%)",color:"white",textAlign:"center",borderBottom:"8px solid #FFC107"},children:[c.jsx(vn,{size:80,style:{marginBottom:"1.5rem",opacity:.9}}),c.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"1rem"},children:"Certificate of Completion"}),c.jsx("p",{style:{fontSize:"1.2rem",opacity:.9,marginBottom:"2rem"},children:"This is to certify that"}),c.jsx("h2",{style:{fontSize:"2rem",marginBottom:"2rem",borderBottom:"2px solid white",paddingBottom:"0.5rem",display:"inline-block"},children:"Ayan Parmar"}),c.jsx("p",{style:{fontSize:"1.2rem",opacity:.9,marginBottom:"0.5rem"},children:"has successfully completed"}),c.jsx("h3",{style:{fontSize:"1.8rem",marginBottom:"2rem"},children:t.title}),c.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"4rem",marginBottom:"2rem"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.9rem",opacity:.8,marginBottom:"0.5rem"},children:"Score"}),c.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:t.score})]}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.9rem",opacity:.8,marginBottom:"0.5rem"},children:"Grade"}),c.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:t.grade})]}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.9rem",opacity:.8,marginBottom:"0.5rem"},children:"Date"}),c.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:new Date(t.issueDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),c.jsxs("div",{style:{fontSize:"0.9rem",opacity:.8,fontFamily:"monospace"},children:["Credential ID: ",t.credentialId]})]}),c.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:c.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[c.jsxs("button",{onClick:()=>u(t),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(fp,{size:18})," Download PDF"]}),c.jsxs("button",{onClick:()=>d(t),className:"btn",style:{background:"var(--surface-hover)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(b_,{size:18})," Share"]})]})})]})})]})},pM=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState({name:"Ayan Parmar",id:"2024001",email:"ayan.parmar@student.portal.gov",phone:"+91 98765 43210",location:"Mumbai, India",department:"Computer Science & Engineering",semester:"6th Semester",cgpa:"8.9",skills:["React","Node.js","Python","Data Structures","AWS"],achievements:["Winner of National Hackathon 2024","Published paper on AI Ethics","Student Representative 2023-24"]}),i=o=>{const{name:a,value:u}=o.target;r(d=>({...d,[a]:u}))},s=()=>{e(!1),console.log("Profile saved:",n)};return c.jsxs("div",{children:[c.jsxs("div",{style:{marginBottom:"2rem"},children:[c.jsx("h1",{children:"Student Profile"}),c.jsx("p",{style:{color:"var(--text-secondary)"},children:"Manage your personal information and academic records."})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"2rem"},children:[c.jsxs("div",{style:{background:"var(--surface-color)",padding:"2rem",borderRadius:"16px",border:"1px solid var(--border-color)",textAlign:"center",height:"fit-content"},children:[c.jsx("div",{style:{width:"120px",height:"120px",background:"var(--surface-hover)",borderRadius:"50%",margin:"0 auto 1.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)"},children:c.jsx(mp,{size:64})}),t?c.jsx("input",{type:"text",name:"name",value:n.name,onChange:i,style:{marginBottom:"0.5rem",textAlign:"center",width:"100%",padding:"0.5rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"var(--bg-color)",color:"var(--text-primary)",fontSize:"1.2rem",fontWeight:"bold"}}):c.jsx("h2",{style:{marginBottom:"0.5rem"},children:n.name}),c.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1.5rem"},children:n.department}),c.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginBottom:"2rem"},children:[c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontWeight:"bold",fontSize:"1.2rem"},children:n.cgpa}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"CGPA"})]}),c.jsx("div",{style:{width:"1px",background:"var(--border-color)"}}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontWeight:"bold",fontSize:"1.2rem"},children:n.semester}),c.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Sem"})]})]}),t?c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsxs("button",{onClick:s,className:"btn btn-primary",style:{flex:1,justifyContent:"center"},children:[c.jsx(eM,{size:16})," Save"]}),c.jsxs("button",{onClick:()=>e(!1),className:"btn",style:{flex:1,justifyContent:"center",background:"var(--surface-hover)"},children:[c.jsx(Cd,{size:16})," Cancel"]})]}):c.jsx("button",{onClick:()=>e(!0),className:"btn btn-primary",style:{width:"100%",justifyContent:"center"},children:"Edit Profile"})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[c.jsxs("div",{style:{background:"var(--surface-color)",padding:"2rem",borderRadius:"16px",border:"1px solid var(--border-color)"},children:[c.jsxs("h3",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(mp,{size:20})," Personal Details"]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Student ID"}),c.jsx("div",{style:{fontWeight:"500"},children:n.id})]}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Email"}),t?c.jsx("input",{type:"email",name:"email",value:n.email,onChange:i,style:{width:"100%",padding:"0.5rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"var(--bg-color)",color:"var(--text-primary)"}}):c.jsxs("div",{style:{fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(DT,{size:16})," ",n.email]})]}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Phone"}),t?c.jsx("input",{type:"text",name:"phone",value:n.phone,onChange:i,style:{width:"100%",padding:"0.5rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"var(--bg-color)",color:"var(--text-primary)"}}):c.jsxs("div",{style:{fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(X4,{size:16})," ",n.phone]})]}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:"0.25rem"},children:"Location"}),t?c.jsx("input",{type:"text",name:"location",value:n.location,onChange:i,style:{width:"100%",padding:"0.5rem",borderRadius:"8px",border:"1px solid var(--border-color)",background:"var(--bg-color)",color:"var(--text-primary)"}}):c.jsxs("div",{style:{fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(pp,{size:16})," ",n.location]})]})]})]}),c.jsxs("div",{style:{background:"var(--surface-color)",padding:"2rem",borderRadius:"16px",border:"1px solid var(--border-color)"},children:[c.jsxs("h3",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(vn,{size:20})," Skills & Achievements"]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Technical Skills"}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:n.skills.map((o,a)=>c.jsx("span",{style:{background:"var(--surface-hover)",padding:"0.25rem 0.75rem",borderRadius:"20px",fontSize:"0.9rem",color:"var(--text-primary)"},children:o},a))})]}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Key Achievements"}),c.jsx("ul",{style:{listStyle:"none",padding:0},children:n.achievements.map((o,a)=>c.jsxs("li",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem",fontSize:"0.95rem"},children:[c.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"var(--primary-color)"}}),o]},a))})]})]})]})]})]})},mM=()=>{const t=[{id:1,title:"New Course Available",message:"Introduction to AI Ethics has been added.",time:"2 hrs ago",type:"info",read:!1},{id:2,title:"Internship Application Update",message:"Your application for ISRO Internship is under review.",time:"1 day ago",type:"info",read:!1},{id:3,title:"Certificate Earned",message:'Congratulations! You completed "Orbital Mechanics".',time:"2 days ago",type:"success",read:!0},{id:4,title:"System Maintenance",message:"Scheduled maintenance on Sunday 2 AM - 4 AM.",time:"3 days ago",type:"warning",read:!0},{id:5,title:"Welcome to the Portal",message:"Get started by exploring courses.",time:"1 week ago",type:"info",read:!0}],e=n=>{switch(n){case"success":return c.jsx(Ds,{size:20,color:"#4CAF50"});case"warning":return c.jsx(rM,{size:20,color:"#FFC107"});default:return c.jsx(q4,{size:20,color:"var(--primary-color)"})}};return c.jsxs("div",{children:[c.jsxs("div",{style:{marginBottom:"2rem"},children:[c.jsx("h1",{children:"Notifications"}),c.jsx("p",{style:{color:"var(--text-secondary)"},children:"Stay updated with course announcements and application status."})]}),c.jsx("div",{style:{background:"var(--surface-color)",borderRadius:"16px",border:"1px solid var(--border-color)",overflow:"hidden"},children:t.map(n=>c.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border-color)",display:"flex",gap:"1rem",background:n.read?"transparent":"var(--surface-hover)"},children:[c.jsx("div",{style:{marginTop:"2px"},children:e(n.type)}),c.jsxs("div",{style:{flex:1},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[c.jsx("h3",{style:{fontSize:"1rem",margin:0},children:n.title}),c.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:n.time})]}),c.jsx("p",{style:{color:"var(--text-secondary)",margin:0},children:n.message})]})]},n.id))})]})};var N_;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(N_||(N_={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D_;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(D_||(D_={}));var M_;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(M_||(M_={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=["user","model","function","system"];var j_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(j_||(j_={}));var O_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(O_||(O_={}));var F_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(F_||(F_={}));var L_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(L_||(L_={}));var Ia;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(Ia||(Ia={}));var z_;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(z_||(z_={}));var B_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(B_||(B_={}));var U_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(U_||(U_={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class is extends ct{constructor(e,n){super(e),this.response=n}}class jT extends ct{constructor(e,n,r,i){super(e),this.status=n,this.statusText=r,this.errorDetails=i}}class Vr extends ct{}class OT extends ct{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="https://generativelanguage.googleapis.com",yM="v1beta",vM="0.24.1",_M="genai-js";var zi;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(zi||(zi={}));class wM{constructor(e,n,r,i,s){this.model=e,this.task=n,this.apiKey=r,this.stream=i,this.requestOptions=s}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||yM;let s=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||gM}/${r}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function EM(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${_M}/${vM}`),e.join(" ")}async function IM(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",EM(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new Vr(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(const[i,s]of r.entries()){if(i==="x-goog-api-key")throw new Vr(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new Vr(`Header name ${i} can only be set using the apiClient field`);n.append(i,s)}}return n}async function xM(t,e,n,r,i,s){const o=new wM(t,e,n,r,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},AM(s)),{method:"POST",headers:await IM(o),body:i})}}async function Cl(t,e,n,r,i,s={},o=fetch){const{url:a,fetchOptions:u}=await xM(t,e,n,r,i,s);return TM(a,u,o)}async function TM(t,e,n=fetch){let r;try{r=await n(t,e)}catch(i){SM(i,t)}return r.ok||await CM(r,t),r}function SM(t,e){let n=t;throw n.name==="AbortError"?(n=new OT(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof jT||t instanceof Vr||(n=new ct(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function CM(t,e){let n="",r;try{const i=await t.json();n=i.error.message,i.error.details&&(n+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new jT(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function AM(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Uu(t.candidates[0]))throw new is(`${ur(t)}`,t);return RM(t)}else if(t.promptFeedback)throw new is(`Text not available. ${ur(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Uu(t.candidates[0]))throw new is(`${ur(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),$_(t)[0]}else if(t.promptFeedback)throw new is(`Function call not available. ${ur(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Uu(t.candidates[0]))throw new is(`${ur(t)}`,t);return $_(t)}else if(t.promptFeedback)throw new is(`Function call not available. ${ur(t)}`,t)},t}function RM(t){var e,n,r,i;const s=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const o of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function $_(t){var e,n,r,i;const s=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const o of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)o.functionCall&&s.push(o.functionCall);if(s.length>0)return s}const kM=[Ia.RECITATION,Ia.SAFETY,Ia.LANGUAGE];function Uu(t){return!!t.finishReason&&kM.includes(t.finishReason)}function ur(t){var e,n,r;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const s=t.candidates[0];Uu(s)&&(i+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(i+=`: ${s.finishMessage}`))}return i}function sl(t){return this instanceof sl?(this.v=t,this):new sl(t)}function bM(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(g){r[g]&&(i[g]=function(w){return new Promise(function(E,k){s.push([g,w,E,k])>1||a(g,w)})})}function a(g,w){try{u(r[g](w))}catch(E){p(s[0][3],E)}}function u(g){g.value instanceof sl?Promise.resolve(g.value.v).then(d,f):p(s[0][2],g)}function d(g){a("next",g)}function f(g){a("throw",g)}function p(g,w){g(w),s.shift(),s.length&&a(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function PM(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=MM(e),[r,i]=n.tee();return{stream:DM(r),response:NM(i)}}async function NM(t){const e=[],n=t.getReader();for(;;){const{done:r,value:i}=await n.read();if(r)return gg(VM(e));e.push(i)}}function DM(t){return bM(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:i}=yield sl(n.read());if(i)break;yield yield sl(gg(r))}})}function MM(t){const e=t.getReader();return new ReadableStream({start(r){let i="";return s();function s(){return e.read().then(({value:o,done:a})=>{if(a){if(i.trim()){r.error(new ct("Failed to parse stream"));return}r.close();return}i+=o;let u=i.match(W_),d;for(;u;){try{d=JSON.parse(u[1])}catch{r.error(new ct(`Error parsing JSON response: "${u[1]}"`));return}r.enqueue(d),i=i.substring(u[0].length),u=i.match(W_)}return s()}).catch(o=>{let a=o;throw a.stack=o.stack,a.name==="AbortError"?a=new OT("Request aborted when reading from the stream"):a=new ct("Error reading from the stream"),a})}}})}function VM(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t){if(r.candidates){let i=0;for(const s of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:i}),n.candidates[i].citationMetadata=s.citationMetadata,n.candidates[i].groundingMetadata=s.groundingMetadata,n.candidates[i].finishReason=s.finishReason,n.candidates[i].finishMessage=s.finishMessage,n.candidates[i].safetyRatings=s.safetyRatings,s.content&&s.content.parts){n.candidates[i].content||(n.candidates[i].content={role:s.content.role||"user",parts:[]});const o={};for(const a of s.content.parts)a.text&&(o.text=a.text),a.functionCall&&(o.functionCall=a.functionCall),a.executableCode&&(o.executableCode=a.executableCode),a.codeExecutionResult&&(o.codeExecutionResult=a.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),n.candidates[i].content.parts.push(o)}i++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FT(t,e,n,r){const i=await Cl(e,zi.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return PM(i)}async function LT(t,e,n,r){const s=await(await Cl(e,zi.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:gg(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function ol(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return jM(e)}function jM(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const s of t)"functionResponse"in s?(n.parts.push(s),i=!0):(e.parts.push(s),r=!0);if(r&&i)throw new ct("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new ct("No content is provided for sending chat message.");return r?e:n}function OM(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const i=t.generateContentRequest!=null;if(t.contents){if(i)throw new Vr("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(i)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const s=ol(t);r.contents=[s]}return{generateContentRequest:r}}function H_(t){let e;return t.contents?e=t:e={contents:[ol(t)]},t.systemInstruction&&(e.systemInstruction=zT(t.systemInstruction)),e}function FM(t){return typeof t=="string"||Array.isArray(t)?{content:ol(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],LM={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function zM(t){let e=!1;for(const n of t){const{role:r,parts:i}=n;if(!e&&r!=="user")throw new ct(`First content should be with role 'user', got ${r}`);if(!V_.includes(r))throw new ct(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(V_)}`);if(!Array.isArray(i))throw new ct("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new ct("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const a of i)for(const u of G_)u in a&&(s[u]+=1);const o=LM[r];for(const a of G_)if(!o.includes(a)&&s[a]>0)throw new ct(`Content with role '${r}' can't contain '${a}' part`);e=!0}}function q_(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="SILENT_ERROR";class BM{constructor(e,n,r,i={}){this.model=n,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(zM(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,i,s,o,a,u;await this._sendPromise;const d=ol(e),f={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,d]},p=Object.assign(Object.assign({},this._requestOptions),n);let g;return this._sendPromise=this._sendPromise.then(()=>LT(this._apiKey,this.model,f,p)).then(w=>{var E;if(q_(w.response)){this._history.push(d);const k=Object.assign({parts:[],role:"model"},(E=w.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(k)}else{const k=ur(w.response);k&&console.warn(`sendMessage() was unsuccessful. ${k}. Inspect response object for details.`)}g=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,g}async sendMessageStream(e,n={}){var r,i,s,o,a,u;await this._sendPromise;const d=ol(e),f={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,d]},p=Object.assign(Object.assign({},this._requestOptions),n),g=FT(this._apiKey,this.model,f,p);return this._sendPromise=this._sendPromise.then(()=>g).catch(w=>{throw new Error(K_)}).then(w=>w.response).then(w=>{if(q_(w)){this._history.push(d);const E=Object.assign({},w.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{const E=ur(w);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(w=>{w.message!==K_&&console.error(w)}),g}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UM(t,e,n,r){return(await Cl(e,zi.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(t,e,n,r){return(await Cl(e,zi.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function WM(t,e,n,r){const i=n.requests.map(o=>Object.assign(Object.assign({},o),{model:e}));return(await Cl(e,zi.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:i}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=zT(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const i=H_(e),s=Object.assign(Object.assign({},this._requestOptions),n);return LT(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),s)}async generateContentStream(e,n={}){var r;const i=H_(e),s=Object.assign(Object.assign({},this._requestOptions),n);return FT(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),s)}startChat(e){var n;return new BM(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=OM(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),n);return UM(this.apiKey,this.model,r,i)}async embedContent(e,n={}){const r=FM(e),i=Object.assign(Object.assign({},this._requestOptions),n);return $M(this.apiKey,this.model,r,i)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return WM(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new ct("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Q_(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new Vr("Cached content must contain a `name` field.");if(!e.model)throw new Vr("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const o of i)if(n!=null&&n[o]&&e[o]&&(n==null?void 0:n[o])!==e[o]){if(o==="model"){const a=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,u=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(a===u)continue}throw new Vr(`Different value for "${o}" specified in modelParams (${n[o]}) and cachedContent (${e[o]})`)}const s=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Q_(this.apiKey,s,r)}}const GM=()=>{const[t,e]=F.useState(null),[n,r]=F.useState(null),[i,s]=F.useState(""),[o,a]=F.useState("breakfast"),[u,d]=F.useState(!1),[f,p]=F.useState("general"),[g,w]=F.useState(null),[E,k]=F.useState(!1),[T,I]=F.useState(""),_=F.useRef(null),S=new HM("AIzaSyBg5wEiVKd7HQF6srFmoEMFdf6gaQV30jY"),V=O=>{const q=O.target.files[0];if(q){e(q);const ee=new FileReader;ee.onloadend=()=>{r(ee.result)},ee.readAsDataURL(q),I(""),w(null)}},j=async O=>new Promise((q,ee)=>{const re=new FileReader;re.onloadend=()=>{re.result.split(",")[1];const Te=new Image;Te.onload=()=>{const ke=document.createElement("canvas");let Me=Te.width,be=Te.height;const rt=1024;(Me>rt||be>rt)&&(Me>be?(be=be/Me*rt,Me=rt):(Me=Me/be*rt,be=rt)),ke.width=Me,ke.height=be,ke.getContext("2d").drawImage(Te,0,0,Me,be);const Al=ke.toDataURL("image/jpeg",.7).split(",")[1];q({inlineData:{data:Al,mimeType:"image/jpeg"}})},Te.src=re.result},re.onerror=ee,re.readAsDataURL(O)}),z=async()=>{if(!t||!i){I("Please upload an image and enter your weight");return}k(!0),I(""),w(null);try{const O=new Promise((re,Te)=>setTimeout(()=>Te(new Error("Request timeout - please try again")),45e3)),q=(async()=>{const re=S.getGenerativeModel({model:"gemini-3-flash-preview"}),Te=await j(t),ke=u?"vegetarian":"non-vegetarian";let Me="";f==="abha-worker"?Me="This is for an ASHA (Accredited Social Health Activist) worker who needs sustained energy and nutrition for community health work. Focus on sustained energy, immune support, and practical meals for field work.":f==="pregnant-woman"?Me="This is for a pregnant woman. Focus on folic acid, iron, calcium, protein needs for fetal development. Highlight foods that support pregnancy health and avoid harmful foods. Provide trimester-specific advice if possible.":Me="General nutrition analysis.";const be=`${Me}

Analyze this ${ke} food for ${i}kg person eating at ${o}.

NUTRITION DETAILS: List foods, calories, protein/carbs/fats, vitamins. ${u?"Confirm if meal is fully vegetarian and note any non-veg items if present.":"Include protein sources from meat/fish/eggs."} ${f==="pregnant-woman"?"Highlight pregnancy-essential nutrients (iron, folic acid, calcium, DHA).":""}

TIMING ANALYSIS: Is ${o} good timing? Impact on metabolism${f==="pregnant-woman"?" and pregnancy energy needs":f==="abha-worker"?" and sustained energy for active work":""}

RECOMMENDATIONS: Portions for ${i}kg, missing nutrients, ${u?"vegetarian protein alternatives":"balanced protein sources"}${f==="pregnant-woman"?", pregnancy-safe food suggestions, avoid caffeine/raw foods":f==="abha-worker"?", portable meal ideas for field work, energy-boosting foods":""}, improvements`;return(await(await re.generateContent([be,Te])).response).text()})(),ee=await Promise.race([q,O]);console.log("Analysis received:",ee),w(ee)}catch(O){console.error("Error analyzing nutrition:",O);const q=O.message.includes("timeout")?"Request timed out. Please try again with a smaller image or check your internet connection.":O.message.includes("API key")||O.message.includes("404")?"API service error. The Gemini API might be temporarily unavailable.":"Failed to analyze. Please try again.";I(q)}finally{k(!1)}},x=()=>{e(null),r(null),w(null),I(""),_.current&&(_.current.value="")},v=(O,q)=>{if(!O)return"";const ee=new RegExp(`${q}:([\\s\\S]*?)(?=\\n\\n[A-Z]|$)`,"i"),re=O.match(ee),Te=re?re[1].trim():"";return console.log(`Parsing ${q}:`,Te?"Found":"Not found"),Te},C=O=>O?O.replace(/\*\*/g,"").replace(/###/g,"").replace(/##/g,"").replace(/#/g,"").replace(/~~/g,"").trim():"",R=O=>{if(!O)return[];const q=["NUTRITION DETAILS","NUTRITION","TIMING ANALYSIS","TIMING","RECOMMENDATIONS","RECOMMENDATION","MEAL TIMING","MEAL TIMING ANALYSIS"];return O.split(`
`).map(ee=>C(ee)).filter(ee=>{const re=ee.trim(),Te=re.toUpperCase();return!(!re||/^[-*\s]+$/.test(re)||re.match(/^-+$/)||q.some(ke=>Te===ke||Te===ke+":"))}).map(ee=>{let re=ee.trim();return(re.startsWith("-")||re.startsWith("*"))&&(re=re.replace(/^[-*]\s*/,"")),re.trim()}).filter(ee=>ee.length>0)},b=g?v(g,"NUTRITION DETAILS"):"",N=g?v(g,"TIMING ANALYSIS"):"",A=g?v(g,"RECOMMENDATIONS"):"",Be=b||N||A;let Et={nutrition:"",timing:"",recommendations:""};if(g&&!Be){const O=g.split(`
`).filter(ee=>ee.trim()),q=Math.ceil(O.length/3);Et={nutrition:O.slice(0,q).join(`
`),timing:O.slice(q,q*2).join(`
`),recommendations:O.slice(q*2).join(`
`)}}const Kn=R(b||Et.nutrition),Qn=R(N||Et.timing),H=R(A||Et.recommendations);return c.jsxs("div",{style:{minHeight:"100vh",background:"#F5F1ED",padding:"2.5rem"},children:[c.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[c.jsxs("div",{style:{marginBottom:"2.5rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.625rem"},children:[c.jsx(R_,{style:{width:"32px",height:"32px",color:"#8B9D7F",strokeWidth:2}}),c.jsx("h1",{style:{fontSize:"2.125rem",fontWeight:"600",color:"#3E342B",margin:0,letterSpacing:"-0.03em"},children:"NutraCoach AI"})]}),c.jsx("p",{style:{color:"#6B5444",fontSize:"1rem",lineHeight:"1.65"},children:"AI-powered meal analysis with personalized insights"})]}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:g?"1fr":"repeat(auto-fit, minmax(400px, 1fr))",gap:"2rem",marginBottom:"2rem"},children:!g&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"18px",overflow:"hidden",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.06)",border:"1px solid #E5DFD6"},children:[c.jsx("div",{style:{background:"#FFFFFF",padding:"1.5rem",borderBottom:"1px solid #E5DFD6"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.jsx($4,{style:{width:"22px",height:"22px",color:"#6B5444",strokeWidth:2}}),c.jsx("h2",{style:{fontSize:"1.0625rem",fontWeight:"600",margin:0,color:"#3E342B",letterSpacing:"-0.01em"},children:"Upload Meal Photo"})]})}),c.jsxs("div",{style:{padding:"2rem"},children:[c.jsx("input",{ref:_,type:"file",accept:"image/*",onChange:V,style:{display:"none"},id:"image-upload"}),n?c.jsxs("div",{style:{position:"relative"},children:[c.jsx("img",{src:n,alt:"Meal",style:{width:"100%",height:"320px",objectFit:"cover",borderRadius:"14px"}}),c.jsx("button",{onClick:x,style:{position:"absolute",top:"1rem",right:"1rem",background:"#3E342B",color:"#fff",border:"none",borderRadius:"24px",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 8px 0 rgba(62, 52, 43, 0.2)",transition:"all 0.2s"},onMouseEnter:O=>O.currentTarget.style.background="#524539",onMouseLeave:O=>O.currentTarget.style.background="#3E342B",children:c.jsx(Cd,{style:{width:"18px",height:"18px",strokeWidth:2.5}})})]}):c.jsxs("label",{htmlFor:"image-upload",style:{display:"block",border:"2px dashed #D4CEC5",borderRadius:"14px",padding:"3rem 2rem",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",background:"#FAF8F5"},onMouseEnter:O=>{O.currentTarget.style.borderColor="#8B9D7F",O.currentTarget.style.background="#F5F1ED"},onMouseLeave:O=>{O.currentTarget.style.borderColor="#D4CEC5",O.currentTarget.style.background="#FAF8F5"},children:[c.jsx(iM,{style:{width:"56px",height:"56px",margin:"0 auto 1.25rem",color:"#A69C8E",strokeWidth:1.5}}),c.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",color:"#3E342B",marginBottom:"0.5rem"},children:"Click to upload"}),c.jsx("p",{style:{color:"#8B7D6B",marginBottom:0,fontSize:"0.875rem"},children:"PNG, JPG, JPEG"})]})]})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[c.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"18px",overflow:"hidden",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.06)",border:"1px solid #E5DFD6"},children:[c.jsx("div",{style:{background:"#FFFFFF",padding:"1.5rem",borderBottom:"1px solid #E5DFD6"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.jsx(R_,{style:{width:"22px",height:"22px",color:"#6B5444",strokeWidth:2}}),c.jsx("h2",{style:{fontSize:"1.0625rem",fontWeight:"600",margin:0,color:"#3E342B",letterSpacing:"-0.01em"},children:"User Profile"})]})}),c.jsx("div",{style:{padding:"1.5rem"},children:c.jsxs("select",{value:f,onChange:O=>p(O.target.value),style:{width:"100%",padding:"0.875rem 1rem",fontSize:"0.9375rem",border:"1px solid #E5DFD6",borderRadius:"12px",outline:"none",cursor:"pointer",background:"#fff",transition:"all 0.2s",boxSizing:"border-box",color:"#3E342B"},onFocus:O=>{O.target.style.borderColor="#8B9D7F",O.target.style.boxShadow="0 0 0 3px rgba(139, 157, 127, 0.15)"},onBlur:O=>{O.target.style.borderColor="#E5DFD6",O.target.style.boxShadow="none"},children:[c.jsx("option",{value:"general",children:" General User"}),c.jsx("option",{value:"abha-worker",children:" ASHA Worker"}),c.jsx("option",{value:"pregnant-woman",children:" Pregnant Woman"})]})})]}),c.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"18px",overflow:"hidden",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.06)",border:"1px solid #E5DFD6"},children:[c.jsx("div",{style:{background:"#FFFFFF",padding:"1.5rem",borderBottom:"1px solid #E5DFD6"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.jsx(tM,{style:{width:"22px",height:"22px",color:"#6B5444",strokeWidth:2}}),c.jsx("h2",{style:{fontSize:"1.0625rem",fontWeight:"600",margin:0,color:"#3E342B",letterSpacing:"-0.01em"},children:"Body Weight"})]})}),c.jsx("div",{style:{padding:"1.5rem"},children:c.jsxs("div",{style:{position:"relative"},children:[c.jsx("input",{type:"number",value:i,onChange:O=>s(O.target.value),placeholder:"Enter weight",style:{width:"100%",padding:"0.875rem 3.5rem 0.875rem 1rem",fontSize:"0.9375rem",border:"1px solid #E5DFD6",borderRadius:"12px",outline:"none",transition:"all 0.2s",boxSizing:"border-box",color:"#3E342B"},onFocus:O=>{O.target.style.borderColor="#8B9D7F",O.target.style.boxShadow="0 0 0 3px rgba(139, 157, 127, 0.15)"},onBlur:O=>{O.target.style.borderColor="#E5DFD6",O.target.style.boxShadow="none"}}),c.jsx("span",{style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",fontSize:"0.875rem",fontWeight:"600",color:"#8B7D6B"},children:"kg"})]})})]}),c.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"18px",overflow:"hidden",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.06)",border:"1px solid #E5DFD6"},children:[c.jsx("div",{style:{background:"#FFFFFF",padding:"1.5rem",borderBottom:"1px solid #E5DFD6"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.jsx(Li,{style:{width:"22px",height:"22px",color:"#6B5444",strokeWidth:2}}),c.jsx("h2",{style:{fontSize:"1.0625rem",fontWeight:"600",margin:0,color:"#3E342B",letterSpacing:"-0.01em"},children:"Meal Time"})]})}),c.jsx("div",{style:{padding:"1.5rem"},children:c.jsxs("select",{value:o,onChange:O=>a(O.target.value),style:{width:"100%",padding:"0.875rem 1rem",fontSize:"0.9375rem",border:"1px solid #E5DFD6",borderRadius:"12px",outline:"none",cursor:"pointer",background:"#fff",transition:"all 0.2s",boxSizing:"border-box",color:"#3E342B"},onFocus:O=>{O.target.style.borderColor="#8B9D7F",O.target.style.boxShadow="0 0 0 3px rgba(139, 157, 127, 0.15)"},onBlur:O=>{O.target.style.borderColor="#E5DFD6",O.target.style.boxShadow="none"},children:[c.jsx("option",{value:"breakfast",children:"Breakfast (6-10 AM)"}),c.jsx("option",{value:"mid-morning",children:"Mid-Morning (10 AM-12 PM)"}),c.jsx("option",{value:"lunch",children:"Lunch (12-2 PM)"}),c.jsx("option",{value:"afternoon",children:"Afternoon Snack (2-5 PM)"}),c.jsx("option",{value:"dinner",children:"Dinner (6-9 PM)"}),c.jsx("option",{value:"late-night",children:"Late Night (9 PM+)"})]})})]}),c.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"18px",overflow:"hidden",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.06)",border:"1px solid #E5DFD6"},children:[c.jsx("div",{style:{background:"#FFFFFF",padding:"1.5rem",borderBottom:"1px solid #E5DFD6"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.jsx(hp,{style:{width:"22px",height:"22px",color:"#6B5444",strokeWidth:2}}),c.jsx("h2",{style:{fontSize:"1.0625rem",fontWeight:"600",margin:0,color:"#3E342B",letterSpacing:"-0.01em"},children:"Diet Type"})]})}),c.jsx("div",{style:{padding:"1.5rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.875rem"},children:c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#3E342B"},children:u?"Vegetarian":"Non-Vegetarian"}),c.jsx("div",{style:{fontSize:"0.8125rem",color:"#8B7D6B",marginTop:"0.25rem"},children:u?"Plant-based":"Includes meat"})]})}),c.jsx("button",{onClick:()=>d(!u),style:{position:"relative",width:"52px",height:"28px",background:u?"#8B9D7F":"#D4CEC5",borderRadius:"14px",border:"none",cursor:"pointer",transition:"all 0.2s",flexShrink:0},children:c.jsx("div",{style:{position:"absolute",top:"3px",left:u?"27px":"3px",width:"22px",height:"22px",background:"#fff",borderRadius:"11px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.15)"}})})]})})]})]})]})}),T&&c.jsxs("div",{style:{background:"#FFF5F0",border:"1px solid #F7D7C8",borderRadius:"14px",padding:"1rem 1.25rem",marginBottom:"1.5rem",color:"#C4632E",fontSize:"0.875rem",display:"flex",alignItems:"start",gap:"0.75rem"},children:[c.jsx("span",{style:{fontSize:"1rem"},children:""}),c.jsx("span",{children:T})]}),!g&&c.jsx("button",{onClick:z,disabled:E||!t||!i,style:{width:"100%",background:E||!t||!i?"#D4CEC5":"#8B9D7F",color:"#fff",border:"none",padding:"1.125rem",borderRadius:"14px",fontSize:"1rem",fontWeight:"600",cursor:E||!t||!i?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.625rem",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.08)",transition:"all 0.2s",opacity:E||!t||!i?.5:1,letterSpacing:"-0.01em"},onMouseEnter:O=>{!E&&t&&i&&(O.currentTarget.style.background="#6B7D5F",O.currentTarget.style.transform="translateY(-1px)",O.currentTarget.style.boxShadow="0 4px 8px 0 rgba(62, 52, 43, 0.12)")},onMouseLeave:O=>{!E&&t&&i&&(O.currentTarget.style.background="#8B9D7F",O.currentTarget.style.transform="translateY(0)",O.currentTarget.style.boxShadow="0 2px 4px 0 rgba(62, 52, 43, 0.08)")},children:E?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{width:"18px",height:"18px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTop:"2px solid #fff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),c.jsx("span",{children:"Analyzing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(MT,{style:{width:"20px",height:"20px",strokeWidth:2}}),"Analyze Meal"]})}),g&&c.jsxs("div",{children:[c.jsx("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem"},children:c.jsx("button",{onClick:x,style:{background:"#3E342B",color:"#FFFFFF",border:"none",padding:"0.875rem 1.75rem",borderRadius:"14px",fontSize:"0.9375rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.15)",transition:"all 0.2s",letterSpacing:"-0.01em"},onMouseEnter:O=>{O.currentTarget.style.background="#524539",O.currentTarget.style.transform="translateY(-1px)",O.currentTarget.style.boxShadow="0 4px 8px 0 rgba(62, 52, 43, 0.2)"},onMouseLeave:O=>{O.currentTarget.style.background="#3E342B",O.currentTarget.style.transform="translateY(0)",O.currentTarget.style.boxShadow="0 2px 4px 0 rgba(62, 52, 43, 0.15)"},children:"Analyze Another"})}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:[c.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"18px",overflow:"hidden",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.06)",border:"1px solid #E5DFD6"},children:[c.jsx("div",{style:{background:"linear-gradient(135deg, #A4B494 0%, #8B9D7F 100%)",padding:"1.75rem",color:"#fff"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.875rem"},children:[c.jsx(Bu,{style:{width:"24px",height:"24px",strokeWidth:2}}),c.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",margin:0,letterSpacing:"-0.02em"},children:"Nutrition Details"})]})}),c.jsx("div",{style:{padding:"2rem"},children:Kn.length>0?c.jsx("div",{style:{fontSize:"0.9375rem",lineHeight:"1.7",color:"#524539"},children:Kn.map((O,q)=>c.jsxs("div",{style:{display:"flex",alignItems:"flex-start",marginBottom:"0.875rem"},children:[c.jsx("span",{style:{color:"#8B9D7F",fontSize:"1rem",marginRight:"0.75rem",lineHeight:"1.7",fontWeight:"600"},children:""}),c.jsx("span",{style:{flex:1},children:O})]},q))}):c.jsx("p",{style:{color:"#A69C8E",textAlign:"center",padding:"2rem",fontSize:"0.875rem"},children:"No nutrition data available"})})]}),c.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"18px",overflow:"hidden",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.06)",border:"1px solid #E5DFD6"},children:[c.jsx("div",{style:{background:"linear-gradient(135deg, #E8945A 0%, #D97642 100%)",padding:"1.75rem",color:"#fff"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.875rem"},children:[c.jsx(Li,{style:{width:"24px",height:"24px",strokeWidth:2}}),c.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",margin:0,letterSpacing:"-0.02em"},children:"Timing Analysis"})]})}),c.jsx("div",{style:{padding:"2rem"},children:Qn.length>0?c.jsx("div",{style:{fontSize:"0.9375rem",lineHeight:"1.7",color:"#524539"},children:Qn.map((O,q)=>c.jsxs("div",{style:{display:"flex",alignItems:"flex-start",marginBottom:"0.875rem"},children:[c.jsx("span",{style:{color:"#D97642",fontSize:"1rem",marginRight:"0.75rem",lineHeight:"1.7",fontWeight:"600"},children:""}),c.jsx("span",{style:{flex:1},children:O})]},q))}):c.jsx("p",{style:{color:"#A69C8E",textAlign:"center",padding:"2rem",fontSize:"0.875rem"},children:"No timing data available"})})]}),c.jsxs("div",{style:{background:"#FFFFFF",borderRadius:"18px",overflow:"hidden",boxShadow:"0 2px 4px 0 rgba(62, 52, 43, 0.06)",border:"1px solid #E5DFD6"},children:[c.jsx("div",{style:{background:"linear-gradient(135deg, #6B5444 0%, #524539 100%)",padding:"1.75rem",color:"#fff"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.875rem"},children:[c.jsx(hp,{style:{width:"24px",height:"24px",strokeWidth:2}}),c.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",margin:0,letterSpacing:"-0.02em"},children:"Recommendations"})]})}),c.jsx("div",{style:{padding:"2rem"},children:H.length>0?c.jsx("div",{style:{fontSize:"0.9375rem",lineHeight:"1.7",color:"#524539"},children:H.map((O,q)=>c.jsxs("div",{style:{display:"flex",alignItems:"flex-start",marginBottom:"0.875rem"},children:[c.jsx("span",{style:{color:"#6B5444",fontSize:"1rem",marginRight:"0.75rem",lineHeight:"1.7",fontWeight:"600"},children:""}),c.jsx("span",{style:{flex:1},children:O})]},q))}):c.jsx("p",{style:{color:"#A69C8E",textAlign:"center",padding:"2rem",fontSize:"0.875rem"},children:"No recommendations available"})})]})]})]})]}),c.jsx("style",{children:`
          @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
          @keyframes fadeIn {
            from {
              opacity: 0;
              transform: translateY(20px);
            }
            to {
              opacity: 1;
              transform: translateY(0);
            }
          }
        `})]})};function qM(){const{currentUser:t,logout:e,loading:n}=kT();return n?c.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-gradient)",color:"var(--text-primary)",fontSize:"18px"},children:c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{width:"50px",height:"50px",border:"4px solid rgba(15, 23, 42, 0.15)",borderTop:"4px solid var(--accent-color)",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),c.jsx("p",{children:"Loading..."}),c.jsx("style",{children:"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }"})]})}):c.jsx(sM,{isAuthenticated:!!t,onLogout:e,children:c.jsxs(OA,{children:[c.jsx(Xt,{path:"/",element:t?c.jsx(hn,{to:"/dashboard",replace:!0}):c.jsx(oM,{})}),c.jsx(Xt,{path:"/dashboard",element:t?c.jsx(aM,{}):c.jsx(hn,{to:"/",replace:!0})}),c.jsx(Xt,{path:"/courses",element:t?c.jsx(lM,{}):c.jsx(hn,{to:"/",replace:!0})}),c.jsx(Xt,{path:"/course/:courseId",element:t?c.jsx(cM,{}):c.jsx(hn,{to:"/",replace:!0})}),c.jsx(Xt,{path:"/internships",element:t?c.jsx(dM,{}):c.jsx(hn,{to:"/",replace:!0})}),c.jsx(Xt,{path:"/resources",element:t?c.jsx(hM,{}):c.jsx(hn,{to:"/",replace:!0})}),c.jsx(Xt,{path:"/certificates",element:t?c.jsx(fM,{}):c.jsx(hn,{to:"/",replace:!0})}),c.jsx(Xt,{path:"/profile",element:t?c.jsx(pM,{}):c.jsx(hn,{to:"/",replace:!0})}),c.jsx(Xt,{path:"/notifications",element:t?c.jsx(mM,{}):c.jsx(hn,{to:"/",replace:!0})}),c.jsx(Xt,{path:"/nutracoach",element:t?c.jsx(GM,{}):c.jsx(hn,{to:"/",replace:!0})})]})})}function KM(){return c.jsx(WA,{children:c.jsx(V4,{children:c.jsx(qM,{})})})}Vh.createRoot(document.getElementById("root")).render(c.jsx(o1.StrictMode,{children:c.jsx(KM,{})}));
